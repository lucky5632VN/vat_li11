{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/experiments/physics-intro.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React from \"react\"\r\nimport { \r\n  Activity, Waves, Mic, Anchor, Aperture, Infinity, TrendingDown, Zap, \r\n  Database, Cpu, ArrowUpRight\r\n} from \"lucide-react\"\r\n// Sửa đường dẫn import cho đúng cấu trúc thư mục\r\nimport { HoloCard, NeonButton } from \"../ui/sci-fi-lab.t\"\r\n\r\nconst EXPERIMENTS = [\r\n  {\r\n    id: \"spring-oscillator\",\r\n    title: \"Con lắc lò xo\",\r\n    icon: Activity,\r\n    code: \"EXP-01\",\r\n    desc: \"Mô phỏng dao động điều hòa lò xo ngang/dọc.\"\r\n  },\r\n  {\r\n    id: \"simple-pendulum\",\r\n    title: \"Con lắc đơn\",\r\n    icon: Anchor,\r\n    code: \"EXP-02\",\r\n    desc: \"Khảo sát chu kỳ và quỹ đạo con lắc đơn.\"\r\n  },\r\n  {\r\n    id: \"damped-oscillation\",\r\n    title: \"Dao động tắt dần\",\r\n    icon: TrendingDown,\r\n    code: \"EXP-03\",\r\n    desc: \"Sự suy giảm năng lượng trong môi trường cản.\"\r\n  },\r\n  {\r\n    id: \"harmonic-oscillation\",\r\n    title: \"Dao động điều hòa\",\r\n    icon: Zap,\r\n    code: \"EXP-04\",\r\n    desc: \"Mối liên hệ chuyển động tròn đều.\"\r\n  },\r\n  {\r\n    id: \"mechanical-waves\",\r\n    title: \"Sóng cơ\",\r\n    icon: Waves,\r\n    code: \"EXP-05\",\r\n    desc: \"Truyền sóng ngang và dọc trong môi trường.\"\r\n  },\r\n  {\r\n    id: \"sound-waves\",\r\n    title: \"Sóng âm\",\r\n    icon: Mic,\r\n    code: \"EXP-06\",\r\n    desc: \"Phân tích tần số và biên độ âm thanh.\"\r\n  },\r\n  {\r\n    id: \"wave-interference\",\r\n    title: \"Giao thoa sóng\",\r\n    icon: Aperture,\r\n    code: \"EXP-07\",\r\n    desc: \"Hiện tượng giao thoa hai nguồn kết hợp.\"\r\n  },\r\n  {\r\n    id: \"standing-waves\",\r\n    title: \"Sóng dừng\",\r\n    icon: Infinity,\r\n    code: \"EXP-08\",\r\n    desc: \"Bụng sóng và nút sóng trên dây.\"\r\n  }\r\n]\r\n\r\nexport default function PhysicsIntro({ onSelectExperiment }: { onSelectExperiment?: (id: string) => void }) {\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Hero Section */}\r\n      <div className=\"relative rounded-2xl overflow-hidden border border-slate-800 bg-slate-900/50 p-8 md:p-12\">\r\n        <div className=\"absolute top-0 right-0 p-4 opacity-20\">\r\n            <Cpu size={200} className=\"text-cyan-500\" />\r\n        </div>\r\n        \r\n        <div className=\"relative z-10 max-w-2xl\">\r\n           <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-cyan-950/50 border border-cyan-800 text-cyan-400 text-xs font-bold uppercase tracking-wider mb-4\">\r\n              <span className=\"w-2 h-2 bg-cyan-400 rounded-full animate-pulse\"></span>\r\n              Virtual Laboratory v2.0\r\n           </div>\r\n           <h1 className=\"text-4xl md:text-5xl font-bold text-white mb-4 tracking-tight\">\r\n             Chào mừng đến với <br/>\r\n             <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500\">PHÒNG THÍ NGHIỆM VẬT LÝ</span>\r\n           </h1>\r\n           <p className=\"text-slate-400 text-lg mb-8 leading-relaxed\">\r\n             Hệ thống mô phỏng tương tác cao cấp dành cho Vật lý lớp 11. <br/>\r\n             Truy cập dữ liệu thời gian thực, đồ thị năng lượng và các tham số vật lý chính xác.\r\n           </p>\r\n           \r\n           <div className=\"flex gap-4\">\r\n             <NeonButton onClick={() => onSelectExperiment && onSelectExperiment('harmonic-oscillation')} active={true}>\r\n                Bắt đầu ngay\r\n             </NeonButton>\r\n             <NeonButton variant=\"amber\" onClick={() => window.open('https://github.com', '_blank')}>\r\n                Tài liệu hướng dẫn\r\n             </NeonButton>\r\n           </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Grid Dashboard */}\r\n      <div>\r\n        <div className=\"flex items-center gap-2 mb-6 border-b border-slate-800 pb-2\">\r\n            <Database size={20} className=\"text-cyan-500\"/>\r\n            <h2 className=\"text-lg font-bold text-slate-200 uppercase tracking-widest\">Danh mục thí nghiệm</h2>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {EXPERIMENTS.map((exp) => (\r\n            <HoloCard key={exp.id} className=\"h-full flex flex-col hover:-translate-y-1 hover:shadow-lg transition-transform\">\r\n              <div className=\"flex justify-between items-start mb-4\">\r\n                 <div className=\"p-3 rounded bg-slate-900/50 border border-slate-700 text-cyan-400 group-hover:text-cyan-300 group-hover:border-cyan-500/50 transition-colors\">\r\n                    <exp.icon size={24} />\r\n                 </div>\r\n                 <span className=\"text-[10px] font-mono text-slate-600 font-bold border border-slate-800 px-1.5 py-0.5 rounded group-hover:text-cyan-500 group-hover:border-cyan-900\">\r\n                    {exp.code}\r\n                 </span>\r\n              </div>\r\n              \r\n              <h3 className=\"text-lg font-bold text-slate-200 mb-2 group-hover:text-cyan-400\">{exp.title}</h3>\r\n              <p className=\"text-sm text-slate-500 leading-relaxed mb-6 flex-1\">{exp.desc}</p>\r\n              \r\n              <button \r\n                onClick={() => onSelectExperiment && onSelectExperiment(exp.id)}\r\n                className=\"w-full py-2 rounded border border-slate-700 text-xs font-bold uppercase tracking-widest text-slate-400 hover:bg-cyan-500 hover:text-white hover:border-cyan-500 transition-all flex items-center justify-center gap-2 group-hover:bg-slate-800\"\r\n              >\r\n                Truy cập <ArrowUpRight size={14}/>\r\n              </button>\r\n            </HoloCard>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;AAHA;;;;AAUA,MAAM,cAAc;IAClB;QACE,IAAI;QACJ,OAAO;QACP,MAAM,yNAAQ;QACd,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM,mNAAM;QACZ,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM,yOAAY;QAClB,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM,0MAAG;QACT,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM,gNAAK;QACX,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM,0MAAG;QACT,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM,yNAAQ;QACd,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM,yNAAQ;QACd,MAAM;QACN,MAAM;IACR;CACD;AAEc,SAAS,aAAa,EAAE,kBAAkB,EAAiD;IACxG,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC,0MAAG;4BAAC,MAAM;4BAAK,WAAU;;;;;;;;;;;kCAG9B,6LAAC;wBAAI,WAAU;;0CACZ,6LAAC;gCAAI,WAAU;;kDACZ,6LAAC;wCAAK,WAAU;;;;;;oCAAwD;;;;;;;0CAG3E,6LAAC;gCAAG,WAAU;;oCAAgE;kDAC1D,6LAAC;;;;;kDACnB,6LAAC;wCAAK,WAAU;kDAA2E;;;;;;;;;;;;0CAE7F,6LAAC;gCAAE,WAAU;;oCAA8C;kDACG,6LAAC;;;;;oCAAI;;;;;;;0CAInE,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAW,SAAS,IAAM,sBAAsB,mBAAmB;wCAAyB,QAAQ;kDAAM;;;;;;kDAG3G,6LAAC;wCAAW,SAAQ;wCAAQ,SAAS,IAAM,OAAO,IAAI,CAAC,sBAAsB;kDAAW;;;;;;;;;;;;;;;;;;;;;;;;0BAQ/F,6LAAC;;kCACC,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,yNAAQ;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC9B,6LAAC;gCAAG,WAAU;0CAA6D;;;;;;;;;;;;kCAG/E,6LAAC;wBAAI,WAAU;kCACZ,YAAY,GAAG,CAAC,CAAC,oBAChB,6LAAC;gCAAsB,WAAU;;kDAC/B,6LAAC;wCAAI,WAAU;;0DACZ,6LAAC;gDAAI,WAAU;0DACZ,cAAA,6LAAC,IAAI,IAAI;oDAAC,MAAM;;;;;;;;;;;0DAEnB,6LAAC;gDAAK,WAAU;0DACZ,IAAI,IAAI;;;;;;;;;;;;kDAIf,6LAAC;wCAAG,WAAU;kDAAmE,IAAI,KAAK;;;;;;kDAC1F,6LAAC;wCAAE,WAAU;kDAAsD,IAAI,IAAI;;;;;;kDAE3E,6LAAC;wCACC,SAAS,IAAM,sBAAsB,mBAAmB,IAAI,EAAE;wCAC9D,WAAU;;4CACX;0DACU,6LAAC,6OAAY;gDAAC,MAAM;;;;;;;;;;;;;+BAjBlB,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;AAyBjC;KApEwB"}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/ui/control-panel.tsx"],"sourcesContent":["import type React from \"react\"\ninterface ControlPanelProps {\n  title: string\n  children: React.ReactNode\n}\n\nexport default function ControlPanel({ title, children }: ControlPanelProps) {\n  return (\n    <div className=\"bg-[#16213e] rounded-lg p-4 border border-cyan-900/50\">\n      <h3 className=\"text-cyan-400 font-semibold mb-3\">{title}</h3>\n      {children}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;;AAMe,SAAS,aAAa,EAAE,KAAK,EAAE,QAAQ,EAAqB;IACzE,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAoC;;;;;;YACjD;;;;;;;AAGP;KAPwB"}},
    {"offset": {"line": 374, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/experiments/spring-oscillator.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRef, useEffect, useState, useCallback } from \"react\"\nimport ControlPanel from \"../ui/control-panel\"\nimport { TrendingUp, Ruler, Activity, RotateCcw, SkipBack, Play, Pause, SkipForward } from \"lucide-react\"\n\nexport default function SpringOscillator() {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const energyCanvasRef = useRef<HTMLCanvasElement>(null)\n\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [time, setTime] = useState(0)\n  const [layout, setLayout] = useState<\"horizontal\" | \"vertical\">(\"horizontal\")\n\n  const [params, setParams] = useState({\n    mass: 0.5,\n    springConstant: 20,\n    amplitude: 80,\n    phase: 0,\n  })\n\n  const historyRef = useRef<{ t: number; x: number; wd: number; wt: number; w: number }[]>([])\n\n  const animationRef = useRef<number>()\n  const timeRef = useRef(0)\n\n  const omega = Math.sqrt(params.springConstant / params.mass)\n  const period = (2 * Math.PI) / omega\n  const frequency = omega / (2 * Math.PI)\n  const dt = 0.016\n\n  const calculateState = useCallback(\n    (t: number) => {\n      const x = params.amplitude * Math.cos(omega * t + params.phase)\n      const v = -params.amplitude * omega * Math.sin(omega * t + params.phase)\n      const a = -params.amplitude * omega * omega * Math.cos(omega * t + params.phase)\n      const force = -params.springConstant * (x / 100)\n\n      const x_m = x / 100\n      const v_m = v / 100\n      const wt = 0.5 * params.springConstant * x_m * x_m\n      const wd = 0.5 * params.mass * v_m * v_m\n      const wTotal = wt + wd\n\n      return { x, v, a, force, wt, wd, wTotal }\n    },\n    [params, omega],\n  )\n\n  const drawSpring = (\n    ctx: CanvasRenderingContext2D,\n    startX: number,\n    startY: number,\n    endX: number,\n    endY: number,\n    coils = 12,\n    width = 20,\n  ) => {\n    const dx = endX - startX\n    const dy = endY - startY\n    const len = Math.sqrt(dx * dx + dy * dy)\n    const angle = Math.atan2(dy, dx)\n\n    ctx.save()\n    ctx.translate(startX, startY)\n    ctx.rotate(angle)\n\n    ctx.beginPath()\n    ctx.moveTo(0, 0)\n    ctx.lineTo(10, 0)\n\n    const step = (len - 20) / coils\n    for (let i = 0; i < coils; i++) {\n      const x = 10 + i * step\n      ctx.lineTo(x + step * 0.25, width)\n      ctx.lineTo(x + step * 0.75, -width)\n    }\n\n    ctx.lineTo(len - 10, 0)\n    ctx.lineTo(len, 0)\n\n    ctx.stroke()\n    ctx.restore()\n  }\n\n  const drawArrow = (\n    ctx: CanvasRenderingContext2D,\n    x: number,\n    y: number,\n    len: number,\n    color: string,\n    label: string,\n  ) => {\n    if (Math.abs(len) < 5) return\n    ctx.save()\n    ctx.strokeStyle = color\n    ctx.fillStyle = color\n    ctx.lineWidth = 2\n    ctx.beginPath()\n\n    const angle = layout === \"horizontal\" ? (len > 0 ? 0 : Math.PI) : len > 0 ? Math.PI / 2 : -Math.PI / 2\n\n    const endX = x + (layout === \"horizontal\" ? len : 0)\n    const endY = y + (layout === \"vertical\" ? len : 0)\n\n    ctx.moveTo(x, y)\n    ctx.lineTo(endX, endY)\n\n    const headLen = 6\n    ctx.translate(endX, endY)\n    ctx.rotate(angle)\n    ctx.moveTo(0, 0)\n    ctx.lineTo(-headLen, -headLen / 2)\n    ctx.lineTo(-headLen, headLen / 2)\n    ctx.lineTo(0, 0)\n    ctx.fill()\n\n    ctx.font = \"bold 12px sans-serif\"\n    ctx.fillText(label, len > 0 ? 5 : -15, -5)\n\n    ctx.stroke()\n    ctx.restore()\n  }\n\n  const draw = useCallback(\n    (ctx: CanvasRenderingContext2D, t: number) => {\n      const width = ctx.canvas.width\n      const height = ctx.canvas.height\n      const state = calculateState(t)\n\n      ctx.clearRect(0, 0, width, height)\n\n      ctx.strokeStyle = \"#1e293b\"\n      ctx.lineWidth = 1\n      ctx.beginPath()\n      for (let i = 0; i < width; i += 40) {\n        ctx.moveTo(i, 0)\n        ctx.lineTo(i, height)\n      }\n      for (let i = 0; i < height; i += 40) {\n        ctx.moveTo(0, i)\n        ctx.lineTo(width, i)\n      }\n      ctx.stroke()\n\n      if (layout === \"horizontal\") {\n        const centerY = height / 2\n        const wallX = 60\n        const equilibriumX = width / 2\n        const massX = equilibriumX + state.x\n\n        ctx.fillStyle = \"#64748b\"\n        ctx.fillRect(wallX - 10, centerY - 50, 10, 100)\n\n        ctx.strokeStyle = \"#475569\"\n        ctx.beginPath()\n        ctx.moveTo(wallX, centerY + 30)\n        ctx.lineTo(width, centerY + 30)\n        ctx.stroke()\n\n        ctx.strokeStyle = \"rgba(250, 204, 21, 0.3)\"\n        ctx.setLineDash([5, 5])\n        ctx.beginPath()\n        ctx.moveTo(equilibriumX - params.amplitude, centerY - 60)\n        ctx.lineTo(equilibriumX - params.amplitude, centerY + 60)\n        ctx.moveTo(equilibriumX + params.amplitude, centerY - 60)\n        ctx.lineTo(equilibriumX + params.amplitude, centerY + 60)\n        ctx.stroke()\n        ctx.setLineDash([])\n\n        ctx.fillStyle = \"rgba(250, 204, 21, 0.7)\"\n        ctx.font = \"10px monospace\"\n        ctx.fillText(\"-A\", equilibriumX - params.amplitude - 15, centerY - 65)\n        ctx.fillText(\"+A\", equilibriumX + params.amplitude - 5, centerY - 65)\n\n        ctx.strokeStyle = \"#4ade80\"\n        ctx.setLineDash([5, 5])\n        ctx.beginPath()\n        ctx.moveTo(equilibriumX, centerY - 70)\n        ctx.lineTo(equilibriumX, centerY + 70)\n        ctx.stroke()\n        ctx.setLineDash([])\n        ctx.fillStyle = \"#4ade80\"\n        ctx.fillText(\"VTCB (O)\", equilibriumX - 20, centerY - 75)\n\n        ctx.strokeStyle = \"#cbd5e1\"\n        ctx.lineWidth = 2\n        drawSpring(ctx, wallX, centerY, massX - 25, centerY, 15, 15)\n\n        ctx.fillStyle = \"#3b82f6\"\n        ctx.fillRect(massX - 25, centerY - 25, 50, 50)\n        ctx.strokeStyle = \"#60a5fa\"\n        ctx.strokeRect(massX - 25, centerY - 25, 50, 50)\n\n        drawArrow(ctx, massX, centerY, state.v * 0.5, \"#22c55e\", \"v\")\n        drawArrow(ctx, massX, centerY + 35, state.force * 5, \"#ef4444\", \"F_kv\")\n      } else {\n        const centerX = width / 2\n        const ceilingY = 40\n        const equilibriumY = height / 2\n\n        const deltaL_m = (params.mass * 9.8) / params.springConstant\n        const deltaL_px = deltaL_m * 100 * 1.5\n\n        const naturalY = equilibriumY - deltaL_px\n\n        const massY = equilibriumY + state.x\n\n        ctx.fillStyle = \"#64748b\"\n        ctx.fillRect(centerX - 50, ceilingY - 10, 100, 10)\n\n        ctx.strokeStyle = \"#fbbf24\"\n        ctx.setLineDash([4, 4])\n        ctx.beginPath()\n        ctx.moveTo(centerX - 120, naturalY)\n        ctx.lineTo(centerX + 120, naturalY)\n        ctx.stroke()\n        ctx.fillStyle = \"#fbbf24\"\n        ctx.textAlign = \"right\"\n        ctx.fillText(\"Lò xo không giãn (L0)\", centerX - 130, naturalY + 4)\n\n        ctx.strokeStyle = \"#4ade80\"\n        ctx.beginPath()\n        ctx.moveTo(centerX - 120, equilibriumY)\n        ctx.lineTo(centerX + 120, equilibriumY)\n        ctx.stroke()\n        ctx.fillStyle = \"#4ade80\"\n        ctx.fillText(\"VTCB (O)\", centerX - 130, equilibriumY + 4)\n        ctx.setLineDash([])\n\n        if (deltaL_px > 10) {\n          const measureX = centerX + 100\n          ctx.strokeStyle = \"#94a3b8\"\n          ctx.beginPath()\n          ctx.moveTo(measureX, naturalY)\n          ctx.lineTo(measureX + 10, naturalY)\n          ctx.moveTo(measureX, equilibriumY)\n          ctx.lineTo(measureX + 10, equilibriumY)\n          ctx.moveTo(measureX + 5, naturalY)\n          ctx.lineTo(measureX + 5, equilibriumY)\n          ctx.stroke()\n\n          ctx.fillStyle = \"#f8fafc\"\n          ctx.textAlign = \"left\"\n          ctx.fillText(`Δl₀ = ${(deltaL_m * 100).toFixed(1)} cm`, measureX + 15, naturalY + deltaL_px / 2)\n        }\n        ctx.textAlign = \"left\"\n\n        ctx.strokeStyle = \"rgba(250, 204, 21, 0.2)\"\n        ctx.setLineDash([2, 2])\n        ctx.beginPath()\n        ctx.moveTo(centerX - 60, equilibriumY - params.amplitude)\n        ctx.lineTo(centerX + 60, equilibriumY - params.amplitude)\n        ctx.moveTo(centerX - 60, equilibriumY + params.amplitude)\n        ctx.lineTo(centerX + 60, equilibriumY + params.amplitude)\n        ctx.stroke()\n        ctx.setLineDash([])\n        ctx.fillStyle = \"rgba(250, 204, 21, 0.5)\"\n        ctx.font = \"10px monospace\"\n        ctx.fillText(\"-A\", centerX + 65, equilibriumY - params.amplitude + 3)\n        ctx.fillText(\"+A\", centerX + 65, equilibriumY + params.amplitude + 3)\n\n        ctx.strokeStyle = \"#cbd5e1\"\n        ctx.lineWidth = 2\n        drawSpring(ctx, centerX, ceilingY, centerX, massY - 25, 12, 15)\n\n        ctx.fillStyle = \"#3b82f6\"\n        ctx.beginPath()\n        ctx.arc(centerX, massY, 25, 0, Math.PI * 2)\n        ctx.fill()\n        ctx.strokeStyle = \"#60a5fa\"\n        ctx.stroke()\n\n        drawArrow(ctx, centerX + 30, massY, state.v * 0.5, \"#22c55e\", \"v\")\n        drawArrow(ctx, centerX - 30, massY, state.force * 5, \"#ef4444\", \"F\")\n      }\n\n      ctx.fillStyle = \"rgba(15, 23, 42, 0.7)\"\n      ctx.fillRect(10, 10, 140, 70)\n      ctx.strokeStyle = \"rgba(56, 189, 248, 0.3)\"\n      ctx.strokeRect(10, 10, 140, 70)\n\n      ctx.fillStyle = \"#4ade80\"\n      ctx.font = \"13px monospace\"\n      ctx.fillText(`t = ${t.toFixed(2)} s`, 20, 30)\n      ctx.fillStyle = \"#38bdf8\"\n      ctx.fillText(`x = ${state.x.toFixed(1)} cm`, 20, 50)\n      ctx.fillStyle = \"#facc15\"\n      ctx.fillText(`v = ${state.v.toFixed(1)} cm/s`, 20, 70)\n\n      ctx.fillStyle = \"rgba(255, 255, 255, 0.1)\" // Opacity thấp hơn (0.1)\n      ctx.font = \"12px sans-serif\" // Font nhỏ hơn (12px), bỏ in đậm\n      ctx.textAlign = \"right\"\n      ctx.fillText(\"Hô Hoàng Anh A1K50\", width - 15, height - 15)\n    },\n    [layout, calculateState, params.amplitude, params.mass, params.springConstant],\n  )\n\n  const drawEnergyGraph = useCallback(\n    (ctx: CanvasRenderingContext2D) => {\n      const w = ctx.canvas.width\n      const h = ctx.canvas.height\n      const history = historyRef.current\n\n      ctx.fillStyle = \"#0f172a\"\n      ctx.fillRect(0, 0, w, h)\n\n      ctx.strokeStyle = \"#1e293b\"\n      ctx.lineWidth = 0.5\n      ctx.beginPath()\n      for (let x = 0; x < w; x += 50) {\n        ctx.moveTo(x, 0)\n        ctx.lineTo(x, h)\n      }\n      for (let y = 0; y < h; y += 30) {\n        ctx.moveTo(0, y)\n        ctx.lineTo(w, y)\n      }\n      ctx.stroke()\n\n      if (history.length < 2) return\n\n      const maxEnergy = 0.5 * params.springConstant * Math.pow(params.amplitude / 100, 2)\n      const yScale = (h * 0.8) / (maxEnergy || 1)\n\n      const drawLine = (key: \"wd\" | \"wt\" | \"w\", color: string) => {\n        ctx.strokeStyle = color\n        ctx.lineWidth = 2\n        ctx.beginPath()\n        const stepX = w / 300\n        const dataSlice = history.slice(-300)\n\n        dataSlice.forEach((pt, i) => {\n          const x = i * stepX\n          const y = h - pt[key] * yScale - 20\n          if (i === 0) ctx.moveTo(x, y)\n          else ctx.lineTo(x, y)\n        })\n        ctx.stroke()\n      }\n\n      drawLine(\"wd\", \"#22c55e\")\n      drawLine(\"wt\", \"#3b82f6\")\n      drawLine(\"w\", \"#eab308\")\n    },\n    [params.springConstant, params.amplitude],\n  )\n\n  useEffect(() => {\n    const render = () => {\n      if (isPlaying) {\n        timeRef.current += dt\n        setTime(timeRef.current)\n\n        const state = calculateState(timeRef.current)\n        historyRef.current.push({\n          t: timeRef.current,\n          x: state.x,\n          wd: state.wd,\n          wt: state.wt,\n          w: state.wTotal,\n        })\n        if (historyRef.current.length > 500) historyRef.current.shift()\n      }\n\n      if (canvasRef.current) {\n        const ctx = canvasRef.current.getContext(\"2d\")\n        if (ctx) draw(ctx, timeRef.current)\n      }\n      if (energyCanvasRef.current) {\n        const ctx = energyCanvasRef.current.getContext(\"2d\")\n        if (ctx) drawEnergyGraph(ctx)\n      }\n\n      animationRef.current = requestAnimationFrame(render)\n    }\n    render()\n    return () => {\n      if (animationRef.current) cancelAnimationFrame(animationRef.current)\n    }\n  }, [isPlaying, draw, calculateState, drawEnergyGraph])\n\n  const handleStepForward = () => {\n    setIsPlaying(false)\n    timeRef.current += dt\n    setTime(timeRef.current)\n    const state = calculateState(timeRef.current)\n    historyRef.current.push({ t: timeRef.current, x: state.x, wd: state.wd, wt: state.wt, w: state.wTotal })\n  }\n\n  const handleStepBackward = () => {\n    setIsPlaying(false)\n    timeRef.current = Math.max(0, timeRef.current - dt)\n    setTime(timeRef.current)\n    if (historyRef.current.length > 0) historyRef.current.pop()\n  }\n\n  const handleReset = () => {\n    setIsPlaying(false)\n    timeRef.current = 0\n    setTime(0)\n    historyRef.current = []\n  }\n\n  const deltaL = (params.mass * 9.8) / params.springConstant\n  const vmax = omega * params.amplitude\n  const amax = omega * omega * params.amplitude\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n      <div className=\"lg:col-span-2 space-y-4\">\n        <div className=\"bg-[#16213e] rounded-xl overflow-hidden border border-cyan-900/50 shadow-lg relative\">\n          <canvas ref={canvasRef} width={800} height={400} className=\"w-full h-auto\" />\n          <div className=\"absolute top-2 right-2 text-xs text-gray-400 pointer-events-none\">\n            Mô phỏng lò xo {layout === \"horizontal\" ? \"nằm ngang\" : \"thẳng đứng\"}\n          </div>\n        </div>\n\n        {/* UNIFIED CONTROLS */}\n        <div className=\"flex justify-center gap-3 py-2\">\n          <button\n            onClick={handleReset}\n            className=\"w-12 h-12 rounded-xl bg-slate-700 hover:bg-slate-600 border border-slate-600 text-white flex items-center justify-center transition-all shadow-md active:scale-95\"\n            title=\"Reset\"\n          >\n            <RotateCcw size={20} />\n          </button>\n          <button\n            onClick={handleStepBackward}\n            className=\"w-12 h-12 rounded-xl bg-slate-700 hover:bg-slate-600 border border-slate-600 text-white flex items-center justify-center transition-all shadow-md active:scale-95\"\n            title=\"Lùi\"\n          >\n            <SkipBack size={20} />\n          </button>\n          <button\n            onClick={() => setIsPlaying(!isPlaying)}\n            className={`w-14 h-14 rounded-2xl flex items-center justify-center transition-all shadow-lg active:scale-95 border border-transparent ${\n              isPlaying\n                ? \"bg-amber-600 hover:bg-amber-500 shadow-amber-900/20\"\n                : \"bg-cyan-600 hover:bg-cyan-500 shadow-cyan-500/30\"\n            } text-white`}\n            title={isPlaying ? \"Dừng\" : \"Chạy\"}\n          >\n            {isPlaying ? (\n              <Pause size={28} fill=\"currentColor\" />\n            ) : (\n              <Play size={28} fill=\"currentColor\" className=\"ml-1\" />\n            )}\n          </button>\n          <button\n            onClick={handleStepForward}\n            className=\"w-12 h-12 rounded-xl bg-slate-700 hover:bg-slate-600 border border-slate-600 text-white flex items-center justify-center transition-all shadow-md active:scale-95\"\n            title=\"Tiến\"\n          >\n            <SkipForward size={20} />\n          </button>\n        </div>\n\n        <div className=\"bg-[#16213e] rounded-xl p-4 border border-cyan-900/50 relative\">\n          <h4 className=\"text-sm font-bold text-orange-400 mb-2 flex items-center gap-2\">\n            <TrendingUp className=\"w-4 h-4\" /> Đồ thị Năng lượng\n          </h4>\n          <canvas\n            ref={energyCanvasRef}\n            width={800}\n            height={200}\n            className=\"w-full h-40 bg-slate-900 rounded border border-slate-700/50\"\n          />\n          <div className=\"flex justify-center gap-6 mt-2 text-xs font-mono\">\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-3 h-1 bg-yellow-500\"></div> Cơ năng (W)\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-3 h-1 bg-green-500\"></div> Động năng (Wđ)\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-3 h-1 bg-blue-500\"></div> Thế năng (Wt)\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-4\">\n        <ControlPanel title=\"Cấu hình hệ thống\">\n          <div className=\"flex gap-2 mb-4\">\n            <button\n              onClick={() => setLayout(\"horizontal\")}\n              className={`flex-1 py-3 px-2 rounded-lg text-sm font-semibold transition-all border ${layout === \"horizontal\" ? \"bg-cyan-600 border-cyan-500 text-white shadow\" : \"bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700\"}`}\n            >\n              Nằm ngang\n            </button>\n            <button\n              onClick={() => setLayout(\"vertical\")}\n              className={`flex-1 py-3 px-2 rounded-lg text-sm font-semibold transition-all border ${layout === \"vertical\" ? \"bg-cyan-600 border-cyan-500 text-white shadow\" : \"bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700\"}`}\n            >\n              Thẳng đứng\n            </button>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-xs text-gray-400 mb-1 block\">Khối lượng m</label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"range\"\n                  min=\"0.1\"\n                  max=\"2\"\n                  step=\"0.1\"\n                  value={params.mass}\n                  onChange={(e) => setParams({ ...params, mass: Number(e.target.value) })}\n                  className=\"flex-1 accent-cyan-500 h-2 bg-slate-700 rounded-lg cursor-pointer\"\n                />\n                <span className=\"w-16 text-right font-mono text-cyan-400 text-sm\">{params.mass} kg</span>\n              </div>\n            </div>\n            <div>\n              <label className=\"text-xs text-gray-400 mb-1 block\">Độ cứng k</label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"range\"\n                  min=\"10\"\n                  max=\"200\"\n                  step=\"5\"\n                  value={params.springConstant}\n                  onChange={(e) => setParams({ ...params, springConstant: Number(e.target.value) })}\n                  className=\"flex-1 accent-cyan-500 h-2 bg-slate-700 rounded-lg cursor-pointer\"\n                />\n                <span className=\"w-16 text-right font-mono text-cyan-400 text-sm\">{params.springConstant} N/m</span>\n              </div>\n            </div>\n            <div>\n              <label className=\"text-xs text-gray-400 mb-1 block\">Biên độ A</label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"range\"\n                  min=\"10\"\n                  max=\"100\"\n                  value={params.amplitude}\n                  onChange={(e) => setParams({ ...params, amplitude: Number(e.target.value) })}\n                  className=\"flex-1 accent-cyan-500 h-2 bg-slate-700 rounded-lg cursor-pointer\"\n                />\n                <span className=\"w-16 text-right font-mono text-cyan-400 text-sm\">{params.amplitude} cm</span>\n              </div>\n            </div>\n          </div>\n        </ControlPanel>\n\n        <div className=\"bg-[#1e293b] rounded-xl p-0 border border-cyan-900/50 overflow-hidden\">\n          <div className=\"bg-slate-800/50 p-3 border-b border-slate-700 flex items-center gap-2\">\n            <Activity className=\"w-4 h-4 text-green-400\" />\n            <h3 className=\"text-sm font-bold text-slate-200\">Đại lượng dao động</h3>\n          </div>\n          <div className=\"p-4 grid grid-cols-2 gap-4\">\n            <div>\n              <div className=\"text-[10px] text-gray-500 uppercase\">Chu kỳ (T)</div>\n              <div className=\"text-lg font-mono font-bold text-white\">\n                {period.toFixed(2)} <span className=\"text-xs font-normal text-gray-400\">s</span>\n              </div>\n            </div>\n            <div>\n              <div className=\"text-[10px] text-gray-500 uppercase\">Tần số (f)</div>\n              <div className=\"text-lg font-mono font-bold text-white\">\n                {frequency.toFixed(2)} <span className=\"text-xs font-normal text-gray-400\">Hz</span>\n              </div>\n            </div>\n            <div>\n              <div className=\"text-[10px] text-gray-500 uppercase\">Vận tốc Max</div>\n              <div className=\"text-lg font-mono font-bold text-green-400\">\n                {vmax.toFixed(1)} <span className=\"text-xs font-normal text-gray-400\">cm/s</span>\n              </div>\n            </div>\n            <div>\n              <div className=\"text-[10px] text-gray-500 uppercase\">Gia tốc Max</div>\n              <div className=\"text-lg font-mono font-bold text-red-400\">\n                {amax.toFixed(0)} <span className=\"text-xs font-normal text-gray-400\">cm/s²</span>\n              </div>\n            </div>\n            {layout === \"vertical\" && (\n              <div className=\"col-span-2 bg-slate-900 p-2 rounded border border-slate-700 flex items-center justify-between\">\n                <span className=\"text-xs text-yellow-500 flex items-center gap-1\">\n                  <Ruler size={12} /> Độ giãn lò xo (Δl₀)\n                </span>\n                <span className=\"font-mono font-bold text-yellow-400\">{(deltaL * 100).toFixed(1)} cm</span>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"bg-[#16213e] rounded-lg p-4 border border-cyan-900/50\">\n          <h3 className=\"text-cyan-400 font-semibold mb-2\">Công thức</h3>\n          <div className=\"text-sm text-gray-300 space-y-1 font-mono\">\n            <p>ω = √(k/m) = {omega.toFixed(2)} rad/s</p>\n            <p>T = 2π√(m/k) = {period.toFixed(2)} s</p>\n            <p>F = -kx (Định luật Hooke)</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,YAAY,IAAA,uKAAM,EAAoB;IAC5C,MAAM,kBAAkB,IAAA,uKAAM,EAAoB;IAElD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAA4B;IAEhE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;QACnC,MAAM;QACN,gBAAgB;QAChB,WAAW;QACX,OAAO;IACT;IAEA,MAAM,aAAa,IAAA,uKAAM,EAAgE,EAAE;IAE3F,MAAM,eAAe,IAAA,uKAAM;IAC3B,MAAM,UAAU,IAAA,uKAAM,EAAC;IAEvB,MAAM,QAAQ,KAAK,IAAI,CAAC,OAAO,cAAc,GAAG,OAAO,IAAI;IAC3D,MAAM,SAAS,AAAC,IAAI,KAAK,EAAE,GAAI;IAC/B,MAAM,YAAY,QAAQ,CAAC,IAAI,KAAK,EAAE;IACtC,MAAM,KAAK;IAEX,MAAM,iBAAiB,IAAA,4KAAW;wDAChC,CAAC;YACC,MAAM,IAAI,OAAO,SAAS,GAAG,KAAK,GAAG,CAAC,QAAQ,IAAI,OAAO,KAAK;YAC9D,MAAM,IAAI,CAAC,OAAO,SAAS,GAAG,QAAQ,KAAK,GAAG,CAAC,QAAQ,IAAI,OAAO,KAAK;YACvE,MAAM,IAAI,CAAC,OAAO,SAAS,GAAG,QAAQ,QAAQ,KAAK,GAAG,CAAC,QAAQ,IAAI,OAAO,KAAK;YAC/E,MAAM,QAAQ,CAAC,OAAO,cAAc,GAAG,CAAC,IAAI,GAAG;YAE/C,MAAM,MAAM,IAAI;YAChB,MAAM,MAAM,IAAI;YAChB,MAAM,KAAK,MAAM,OAAO,cAAc,GAAG,MAAM;YAC/C,MAAM,KAAK,MAAM,OAAO,IAAI,GAAG,MAAM;YACrC,MAAM,SAAS,KAAK;YAEpB,OAAO;gBAAE;gBAAG;gBAAG;gBAAG;gBAAO;gBAAI;gBAAI;YAAO;QAC1C;uDACA;QAAC;QAAQ;KAAM;IAGjB,MAAM,aAAa,CACjB,KACA,QACA,QACA,MACA,MACA,QAAQ,EAAE,EACV,QAAQ,EAAE;QAEV,MAAM,KAAK,OAAO;QAClB,MAAM,KAAK,OAAO;QAClB,MAAM,MAAM,KAAK,IAAI,CAAC,KAAK,KAAK,KAAK;QACrC,MAAM,QAAQ,KAAK,KAAK,CAAC,IAAI;QAE7B,IAAI,IAAI;QACR,IAAI,SAAS,CAAC,QAAQ;QACtB,IAAI,MAAM,CAAC;QAEX,IAAI,SAAS;QACb,IAAI,MAAM,CAAC,GAAG;QACd,IAAI,MAAM,CAAC,IAAI;QAEf,MAAM,OAAO,CAAC,MAAM,EAAE,IAAI;QAC1B,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,IAAK;YAC9B,MAAM,IAAI,KAAK,IAAI;YACnB,IAAI,MAAM,CAAC,IAAI,OAAO,MAAM;YAC5B,IAAI,MAAM,CAAC,IAAI,OAAO,MAAM,CAAC;QAC/B;QAEA,IAAI,MAAM,CAAC,MAAM,IAAI;QACrB,IAAI,MAAM,CAAC,KAAK;QAEhB,IAAI,MAAM;QACV,IAAI,OAAO;IACb;IAEA,MAAM,YAAY,CAChB,KACA,GACA,GACA,KACA,OACA;QAEA,IAAI,KAAK,GAAG,CAAC,OAAO,GAAG;QACvB,IAAI,IAAI;QACR,IAAI,WAAW,GAAG;QAClB,IAAI,SAAS,GAAG;QAChB,IAAI,SAAS,GAAG;QAChB,IAAI,SAAS;QAEb,MAAM,QAAQ,WAAW,eAAgB,MAAM,IAAI,IAAI,KAAK,EAAE,GAAI,MAAM,IAAI,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,EAAE,GAAG;QAErG,MAAM,OAAO,IAAI,CAAC,WAAW,eAAe,MAAM,CAAC;QACnD,MAAM,OAAO,IAAI,CAAC,WAAW,aAAa,MAAM,CAAC;QAEjD,IAAI,MAAM,CAAC,GAAG;QACd,IAAI,MAAM,CAAC,MAAM;QAEjB,MAAM,UAAU;QAChB,IAAI,SAAS,CAAC,MAAM;QACpB,IAAI,MAAM,CAAC;QACX,IAAI,MAAM,CAAC,GAAG;QACd,IAAI,MAAM,CAAC,CAAC,SAAS,CAAC,UAAU;QAChC,IAAI,MAAM,CAAC,CAAC,SAAS,UAAU;QAC/B,IAAI,MAAM,CAAC,GAAG;QACd,IAAI,IAAI;QAER,IAAI,IAAI,GAAG;QACX,IAAI,QAAQ,CAAC,OAAO,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC;QAExC,IAAI,MAAM;QACV,IAAI,OAAO;IACb;IAEA,MAAM,OAAO,IAAA,4KAAW;8CACtB,CAAC,KAA+B;YAC9B,MAAM,QAAQ,IAAI,MAAM,CAAC,KAAK;YAC9B,MAAM,SAAS,IAAI,MAAM,CAAC,MAAM;YAChC,MAAM,QAAQ,eAAe;YAE7B,IAAI,SAAS,CAAC,GAAG,GAAG,OAAO;YAE3B,IAAI,WAAW,GAAG;YAClB,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,KAAK,GAAI;gBAClC,IAAI,MAAM,CAAC,GAAG;gBACd,IAAI,MAAM,CAAC,GAAG;YAChB;YACA,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAI;gBACnC,IAAI,MAAM,CAAC,GAAG;gBACd,IAAI,MAAM,CAAC,OAAO;YACpB;YACA,IAAI,MAAM;YAEV,IAAI,WAAW,cAAc;gBAC3B,MAAM,UAAU,SAAS;gBACzB,MAAM,QAAQ;gBACd,MAAM,eAAe,QAAQ;gBAC7B,MAAM,QAAQ,eAAe,MAAM,CAAC;gBAEpC,IAAI,SAAS,GAAG;gBAChB,IAAI,QAAQ,CAAC,QAAQ,IAAI,UAAU,IAAI,IAAI;gBAE3C,IAAI,WAAW,GAAG;gBAClB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,OAAO,UAAU;gBAC5B,IAAI,MAAM,CAAC,OAAO,UAAU;gBAC5B,IAAI,MAAM;gBAEV,IAAI,WAAW,GAAG;gBAClB,IAAI,WAAW,CAAC;oBAAC;oBAAG;iBAAE;gBACtB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,eAAe,OAAO,SAAS,EAAE,UAAU;gBACtD,IAAI,MAAM,CAAC,eAAe,OAAO,SAAS,EAAE,UAAU;gBACtD,IAAI,MAAM,CAAC,eAAe,OAAO,SAAS,EAAE,UAAU;gBACtD,IAAI,MAAM,CAAC,eAAe,OAAO,SAAS,EAAE,UAAU;gBACtD,IAAI,MAAM;gBACV,IAAI,WAAW,CAAC,EAAE;gBAElB,IAAI,SAAS,GAAG;gBAChB,IAAI,IAAI,GAAG;gBACX,IAAI,QAAQ,CAAC,MAAM,eAAe,OAAO,SAAS,GAAG,IAAI,UAAU;gBACnE,IAAI,QAAQ,CAAC,MAAM,eAAe,OAAO,SAAS,GAAG,GAAG,UAAU;gBAElE,IAAI,WAAW,GAAG;gBAClB,IAAI,WAAW,CAAC;oBAAC;oBAAG;iBAAE;gBACtB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,cAAc,UAAU;gBACnC,IAAI,MAAM,CAAC,cAAc,UAAU;gBACnC,IAAI,MAAM;gBACV,IAAI,WAAW,CAAC,EAAE;gBAClB,IAAI,SAAS,GAAG;gBAChB,IAAI,QAAQ,CAAC,YAAY,eAAe,IAAI,UAAU;gBAEtD,IAAI,WAAW,GAAG;gBAClB,IAAI,SAAS,GAAG;gBAChB,WAAW,KAAK,OAAO,SAAS,QAAQ,IAAI,SAAS,IAAI;gBAEzD,IAAI,SAAS,GAAG;gBAChB,IAAI,QAAQ,CAAC,QAAQ,IAAI,UAAU,IAAI,IAAI;gBAC3C,IAAI,WAAW,GAAG;gBAClB,IAAI,UAAU,CAAC,QAAQ,IAAI,UAAU,IAAI,IAAI;gBAE7C,UAAU,KAAK,OAAO,SAAS,MAAM,CAAC,GAAG,KAAK,WAAW;gBACzD,UAAU,KAAK,OAAO,UAAU,IAAI,MAAM,KAAK,GAAG,GAAG,WAAW;YAClE,OAAO;gBACL,MAAM,UAAU,QAAQ;gBACxB,MAAM,WAAW;gBACjB,MAAM,eAAe,SAAS;gBAE9B,MAAM,WAAW,AAAC,OAAO,IAAI,GAAG,MAAO,OAAO,cAAc;gBAC5D,MAAM,YAAY,WAAW,MAAM;gBAEnC,MAAM,WAAW,eAAe;gBAEhC,MAAM,QAAQ,eAAe,MAAM,CAAC;gBAEpC,IAAI,SAAS,GAAG;gBAChB,IAAI,QAAQ,CAAC,UAAU,IAAI,WAAW,IAAI,KAAK;gBAE/C,IAAI,WAAW,GAAG;gBAClB,IAAI,WAAW,CAAC;oBAAC;oBAAG;iBAAE;gBACtB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,UAAU,KAAK;gBAC1B,IAAI,MAAM,CAAC,UAAU,KAAK;gBAC1B,IAAI,MAAM;gBACV,IAAI,SAAS,GAAG;gBAChB,IAAI,SAAS,GAAG;gBAChB,IAAI,QAAQ,CAAC,yBAAyB,UAAU,KAAK,WAAW;gBAEhE,IAAI,WAAW,GAAG;gBAClB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,UAAU,KAAK;gBAC1B,IAAI,MAAM,CAAC,UAAU,KAAK;gBAC1B,IAAI,MAAM;gBACV,IAAI,SAAS,GAAG;gBAChB,IAAI,QAAQ,CAAC,YAAY,UAAU,KAAK,eAAe;gBACvD,IAAI,WAAW,CAAC,EAAE;gBAElB,IAAI,YAAY,IAAI;oBAClB,MAAM,WAAW,UAAU;oBAC3B,IAAI,WAAW,GAAG;oBAClB,IAAI,SAAS;oBACb,IAAI,MAAM,CAAC,UAAU;oBACrB,IAAI,MAAM,CAAC,WAAW,IAAI;oBAC1B,IAAI,MAAM,CAAC,UAAU;oBACrB,IAAI,MAAM,CAAC,WAAW,IAAI;oBAC1B,IAAI,MAAM,CAAC,WAAW,GAAG;oBACzB,IAAI,MAAM,CAAC,WAAW,GAAG;oBACzB,IAAI,MAAM;oBAEV,IAAI,SAAS,GAAG;oBAChB,IAAI,SAAS,GAAG;oBAChB,IAAI,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC,WAAW,GAAG,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC,EAAE,WAAW,IAAI,WAAW,YAAY;gBAChG;gBACA,IAAI,SAAS,GAAG;gBAEhB,IAAI,WAAW,GAAG;gBAClB,IAAI,WAAW,CAAC;oBAAC;oBAAG;iBAAE;gBACtB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,UAAU,IAAI,eAAe,OAAO,SAAS;gBACxD,IAAI,MAAM,CAAC,UAAU,IAAI,eAAe,OAAO,SAAS;gBACxD,IAAI,MAAM,CAAC,UAAU,IAAI,eAAe,OAAO,SAAS;gBACxD,IAAI,MAAM,CAAC,UAAU,IAAI,eAAe,OAAO,SAAS;gBACxD,IAAI,MAAM;gBACV,IAAI,WAAW,CAAC,EAAE;gBAClB,IAAI,SAAS,GAAG;gBAChB,IAAI,IAAI,GAAG;gBACX,IAAI,QAAQ,CAAC,MAAM,UAAU,IAAI,eAAe,OAAO,SAAS,GAAG;gBACnE,IAAI,QAAQ,CAAC,MAAM,UAAU,IAAI,eAAe,OAAO,SAAS,GAAG;gBAEnE,IAAI,WAAW,GAAG;gBAClB,IAAI,SAAS,GAAG;gBAChB,WAAW,KAAK,SAAS,UAAU,SAAS,QAAQ,IAAI,IAAI;gBAE5D,IAAI,SAAS,GAAG;gBAChB,IAAI,SAAS;gBACb,IAAI,GAAG,CAAC,SAAS,OAAO,IAAI,GAAG,KAAK,EAAE,GAAG;gBACzC,IAAI,IAAI;gBACR,IAAI,WAAW,GAAG;gBAClB,IAAI,MAAM;gBAEV,UAAU,KAAK,UAAU,IAAI,OAAO,MAAM,CAAC,GAAG,KAAK,WAAW;gBAC9D,UAAU,KAAK,UAAU,IAAI,OAAO,MAAM,KAAK,GAAG,GAAG,WAAW;YAClE;YAEA,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,IAAI,IAAI,KAAK;YAC1B,IAAI,WAAW,GAAG;YAClB,IAAI,UAAU,CAAC,IAAI,IAAI,KAAK;YAE5B,IAAI,SAAS,GAAG;YAChB,IAAI,IAAI,GAAG;YACX,IAAI,QAAQ,CAAC,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI;YAC1C,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI;YACjD,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC,EAAE,IAAI;YAEnD,IAAI,SAAS,GAAG,4BAA2B,yBAAyB;YACpE,IAAI,IAAI,GAAG,mBAAkB,iCAAiC;YAC9D,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,sBAAsB,QAAQ,IAAI,SAAS;QAC1D;6CACA;QAAC;QAAQ;QAAgB,OAAO,SAAS;QAAE,OAAO,IAAI;QAAE,OAAO,cAAc;KAAC;IAGhF,MAAM,kBAAkB,IAAA,4KAAW;yDACjC,CAAC;YACC,MAAM,IAAI,IAAI,MAAM,CAAC,KAAK;YAC1B,MAAM,IAAI,IAAI,MAAM,CAAC,MAAM;YAC3B,MAAM,UAAU,WAAW,OAAO;YAElC,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,GAAG;YAEtB,IAAI,WAAW,GAAG;YAClB,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,KAAK,GAAI;gBAC9B,IAAI,MAAM,CAAC,GAAG;gBACd,IAAI,MAAM,CAAC,GAAG;YAChB;YACA,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,KAAK,GAAI;gBAC9B,IAAI,MAAM,CAAC,GAAG;gBACd,IAAI,MAAM,CAAC,GAAG;YAChB;YACA,IAAI,MAAM;YAEV,IAAI,QAAQ,MAAM,GAAG,GAAG;YAExB,MAAM,YAAY,MAAM,OAAO,cAAc,GAAG,KAAK,GAAG,CAAC,OAAO,SAAS,GAAG,KAAK;YACjF,MAAM,SAAS,AAAC,IAAI,MAAO,CAAC,aAAa,CAAC;YAE1C,MAAM;0EAAW,CAAC,KAAwB;oBACxC,IAAI,WAAW,GAAG;oBAClB,IAAI,SAAS,GAAG;oBAChB,IAAI,SAAS;oBACb,MAAM,QAAQ,IAAI;oBAClB,MAAM,YAAY,QAAQ,KAAK,CAAC,CAAC;oBAEjC,UAAU,OAAO;kFAAC,CAAC,IAAI;4BACrB,MAAM,IAAI,IAAI;4BACd,MAAM,IAAI,IAAI,EAAE,CAAC,IAAI,GAAG,SAAS;4BACjC,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,GAAG;iCACtB,IAAI,MAAM,CAAC,GAAG;wBACrB;;oBACA,IAAI,MAAM;gBACZ;;YAEA,SAAS,MAAM;YACf,SAAS,MAAM;YACf,SAAS,KAAK;QAChB;wDACA;QAAC,OAAO,cAAc;QAAE,OAAO,SAAS;KAAC;IAG3C,IAAA,0KAAS;sCAAC;YACR,MAAM;qDAAS;oBACb,IAAI,WAAW;wBACb,QAAQ,OAAO,IAAI;wBACnB,QAAQ,QAAQ,OAAO;wBAEvB,MAAM,QAAQ,eAAe,QAAQ,OAAO;wBAC5C,WAAW,OAAO,CAAC,IAAI,CAAC;4BACtB,GAAG,QAAQ,OAAO;4BAClB,GAAG,MAAM,CAAC;4BACV,IAAI,MAAM,EAAE;4BACZ,IAAI,MAAM,EAAE;4BACZ,GAAG,MAAM,MAAM;wBACjB;wBACA,IAAI,WAAW,OAAO,CAAC,MAAM,GAAG,KAAK,WAAW,OAAO,CAAC,KAAK;oBAC/D;oBAEA,IAAI,UAAU,OAAO,EAAE;wBACrB,MAAM,MAAM,UAAU,OAAO,CAAC,UAAU,CAAC;wBACzC,IAAI,KAAK,KAAK,KAAK,QAAQ,OAAO;oBACpC;oBACA,IAAI,gBAAgB,OAAO,EAAE;wBAC3B,MAAM,MAAM,gBAAgB,OAAO,CAAC,UAAU,CAAC;wBAC/C,IAAI,KAAK,gBAAgB;oBAC3B;oBAEA,aAAa,OAAO,GAAG,sBAAsB;gBAC/C;;YACA;YACA;8CAAO;oBACL,IAAI,aAAa,OAAO,EAAE,qBAAqB,aAAa,OAAO;gBACrE;;QACF;qCAAG;QAAC;QAAW;QAAM;QAAgB;KAAgB;IAErD,MAAM,oBAAoB;QACxB,aAAa;QACb,QAAQ,OAAO,IAAI;QACnB,QAAQ,QAAQ,OAAO;QACvB,MAAM,QAAQ,eAAe,QAAQ,OAAO;QAC5C,WAAW,OAAO,CAAC,IAAI,CAAC;YAAE,GAAG,QAAQ,OAAO;YAAE,GAAG,MAAM,CAAC;YAAE,IAAI,MAAM,EAAE;YAAE,IAAI,MAAM,EAAE;YAAE,GAAG,MAAM,MAAM;QAAC;IACxG;IAEA,MAAM,qBAAqB;QACzB,aAAa;QACb,QAAQ,OAAO,GAAG,KAAK,GAAG,CAAC,GAAG,QAAQ,OAAO,GAAG;QAChD,QAAQ,QAAQ,OAAO;QACvB,IAAI,WAAW,OAAO,CAAC,MAAM,GAAG,GAAG,WAAW,OAAO,CAAC,GAAG;IAC3D;IAEA,MAAM,cAAc;QAClB,aAAa;QACb,QAAQ,OAAO,GAAG;QAClB,QAAQ;QACR,WAAW,OAAO,GAAG,EAAE;IACzB;IAEA,MAAM,SAAS,AAAC,OAAO,IAAI,GAAG,MAAO,OAAO,cAAc;IAC1D,MAAM,OAAO,QAAQ,OAAO,SAAS;IACrC,MAAM,OAAO,QAAQ,QAAQ,OAAO,SAAS;IAE7C,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAO,KAAK;gCAAW,OAAO;gCAAK,QAAQ;gCAAK,WAAU;;;;;;0CAC3D,6LAAC;gCAAI,WAAU;;oCAAmE;oCAChE,WAAW,eAAe,cAAc;;;;;;;;;;;;;kCAK5D,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAS;gCACT,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,gOAAS;oCAAC,MAAM;;;;;;;;;;;0CAEnB,6LAAC;gCACC,SAAS;gCACT,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,6NAAQ;oCAAC,MAAM;;;;;;;;;;;0CAElB,6LAAC;gCACC,SAAS,IAAM,aAAa,CAAC;gCAC7B,WAAW,CAAC,0HAA0H,EACpI,YACI,wDACA,mDACL,WAAW,CAAC;gCACb,OAAO,YAAY,SAAS;0CAE3B,0BACC,6LAAC,gNAAK;oCAAC,MAAM;oCAAI,MAAK;;;;;yDAEtB,6LAAC,6MAAI;oCAAC,MAAM;oCAAI,MAAK;oCAAe,WAAU;;;;;;;;;;;0CAGlD,6LAAC;gCACC,SAAS;gCACT,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,sOAAW;oCAAC,MAAM;;;;;;;;;;;;;;;;;kCAIvB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;;kDACZ,6LAAC,mOAAU;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAEpC,6LAAC;gCACC,KAAK;gCACL,OAAO;gCACP,QAAQ;gCACR,WAAU;;;;;;0CAEZ,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;;;;;4CAA8B;;;;;;;kDAE/C,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;;;;;4CAA6B;;;;;;;kDAE9C,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;;;;;4CAA4B;;;;;;;;;;;;;;;;;;;;;;;;;0BAMnD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,mJAAY;wBAAC,OAAM;;0CAClB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAS,IAAM,UAAU;wCACzB,WAAW,CAAC,wEAAwE,EAAE,WAAW,eAAe,kDAAkD,kEAAkE;kDACrO;;;;;;kDAGD,6LAAC;wCACC,SAAS,IAAM,UAAU;wCACzB,WAAW,CAAC,wEAAwE,EAAE,WAAW,aAAa,kDAAkD,kEAAkE;kDACnO;;;;;;;;;;;;0CAKH,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;0DAAmC;;;;;;0DACpD,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,MAAK;wDACL,KAAI;wDACJ,KAAI;wDACJ,MAAK;wDACL,OAAO,OAAO,IAAI;wDAClB,UAAU,CAAC,IAAM,UAAU;gEAAE,GAAG,MAAM;gEAAE,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAE;wDACrE,WAAU;;;;;;kEAEZ,6LAAC;wDAAK,WAAU;;4DAAmD,OAAO,IAAI;4DAAC;;;;;;;;;;;;;;;;;;;kDAGnF,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;0DAAmC;;;;;;0DACpD,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,MAAK;wDACL,KAAI;wDACJ,KAAI;wDACJ,MAAK;wDACL,OAAO,OAAO,cAAc;wDAC5B,UAAU,CAAC,IAAM,UAAU;gEAAE,GAAG,MAAM;gEAAE,gBAAgB,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAE;wDAC/E,WAAU;;;;;;kEAEZ,6LAAC;wDAAK,WAAU;;4DAAmD,OAAO,cAAc;4DAAC;;;;;;;;;;;;;;;;;;;kDAG7F,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;0DAAmC;;;;;;0DACpD,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,MAAK;wDACL,KAAI;wDACJ,KAAI;wDACJ,OAAO,OAAO,SAAS;wDACvB,UAAU,CAAC,IAAM,UAAU;gEAAE,GAAG,MAAM;gEAAE,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAE;wDAC1E,WAAU;;;;;;kEAEZ,6LAAC;wDAAK,WAAU;;4DAAmD,OAAO,SAAS;4DAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAM5F,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,yNAAQ;wCAAC,WAAU;;;;;;kDACpB,6LAAC;wCAAG,WAAU;kDAAmC;;;;;;;;;;;;0CAEnD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;0DAAsC;;;;;;0DACrD,6LAAC;gDAAI,WAAU;;oDACZ,OAAO,OAAO,CAAC;oDAAG;kEAAC,6LAAC;wDAAK,WAAU;kEAAoC;;;;;;;;;;;;;;;;;;kDAG5E,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;0DAAsC;;;;;;0DACrD,6LAAC;gDAAI,WAAU;;oDACZ,UAAU,OAAO,CAAC;oDAAG;kEAAC,6LAAC;wDAAK,WAAU;kEAAoC;;;;;;;;;;;;;;;;;;kDAG/E,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;0DAAsC;;;;;;0DACrD,6LAAC;gDAAI,WAAU;;oDACZ,KAAK,OAAO,CAAC;oDAAG;kEAAC,6LAAC;wDAAK,WAAU;kEAAoC;;;;;;;;;;;;;;;;;;kDAG1E,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;0DAAsC;;;;;;0DACrD,6LAAC;gDAAI,WAAU;;oDACZ,KAAK,OAAO,CAAC;oDAAG;kEAAC,6LAAC;wDAAK,WAAU;kEAAoC;;;;;;;;;;;;;;;;;;oCAGzE,WAAW,4BACV,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAK,WAAU;;kEACd,6LAAC,gNAAK;wDAAC,MAAM;;;;;;oDAAM;;;;;;;0DAErB,6LAAC;gDAAK,WAAU;;oDAAuC,CAAC,SAAS,GAAG,EAAE,OAAO,CAAC;oDAAG;;;;;;;;;;;;;;;;;;;;;;;;;kCAMzF,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;4CAAE;4CAAc,MAAM,OAAO,CAAC;4CAAG;;;;;;;kDAClC,6LAAC;;4CAAE;4CAAgB,OAAO,OAAO,CAAC;4CAAG;;;;;;;kDACrC,6LAAC;kDAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMf;GAjlBwB;KAAA"}},
    {"offset": {"line": 1489, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/experiments/simple-pendulum.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRef, useEffect, useState, useCallback } from \"react\"\nimport { Activity, Zap, TrendingUp, Anchor, RotateCcw, SkipBack, Pause, Play, SkipForward, Settings, Ruler, Timer } from \"lucide-react\"\n\n// --- COMPONENT CON: BẢNG ĐIỀU KHIỂN ---\nconst ControlPanel = ({ title, icon: Icon, children }: { title: string; icon?: any; children: React.ReactNode }) => (\n  <div className=\"bg-[#1e293b] rounded-xl border border-slate-700/50 shadow-sm overflow-hidden flex flex-col h-full\">\n    <div className=\"bg-slate-800/50 px-4 py-3 border-b border-slate-700/50 flex items-center gap-2\">\n      {Icon && <Icon size={16} className=\"text-cyan-400\"/>}\n      <h3 className=\"text-slate-300 font-bold text-xs uppercase tracking-wider\">{title}</h3>\n    </div>\n    <div className=\"p-4 space-y-4 flex-1\">{children}</div>\n  </div>\n)\n\n// --- COMPONENT CON: Ô THÔNG SỐ NHỎ ---\nconst StatBox = ({ label, value, unit, color = \"text-slate-200\" }: { label: string, value: string, unit?: string, color?: string }) => (\n    <div className=\"bg-slate-900/50 rounded-lg p-2 border border-slate-700/50 flex flex-col items-center justify-center min-w-[80px]\">\n        <div className=\"text-[10px] text-slate-500 uppercase font-semibold mb-1\">{label}</div>\n        <div className={`text-lg font-mono font-bold ${color}`}>\n            {value} <span className=\"text-xs font-normal text-slate-500\">{unit}</span>\n        </div>\n    </div>\n)\n\nexport default function SimplePendulum() {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const energyCanvasRef = useRef<HTMLCanvasElement>(null)\n  \n  const [isPlaying, setIsPlaying] = useState(false)\n  const [time, setTime] = useState(0)\n  const MAX_TIME = 20\n  \n  const [params, setParams] = useState({\n    length: 100,      // cm\n    gravity: 9.8,     // m/s²\n    initialAngle: 30, // degrees\n    mass: 1.0         // kg\n  })\n  \n  const traceRef = useRef<{x: number, y: number}[]>([])\n  const energyHistoryRef = useRef<{t: number, wd: number, wt: number, w: number}[]>([])\n\n  const animationRef = useRef<number>()\n  const timeRef = useRef(0)\n\n  // --- TÍNH TOÁN VẬT LÝ ---\n  const lengthM = params.length / 100 \n  const omega = Math.sqrt(params.gravity / lengthM)\n  const period = (2 * Math.PI) / omega\n  const frequency = 1 / period\n  const thetaMax = (params.initialAngle * Math.PI) / 180\n  const dt = 0.016\n\n  const calculateState = useCallback((t: number) => {\n      const theta = thetaMax * Math.cos(omega * t)\n      const alphaDeg = (theta * 180) / Math.PI\n      \n      const omegaInst = -thetaMax * omega * Math.sin(omega * t) \n      const v = lengthM * omegaInst // m/s\n      \n      return { theta, alphaDeg, v }\n  }, [thetaMax, omega, lengthM])\n\n  // --- VẼ MÔ PHỎNG ---\n  const drawSim = useCallback((ctx: CanvasRenderingContext2D, t: number) => {\n      const width = ctx.canvas.width\n      const height = ctx.canvas.height\n      const centerX = width / 2\n      const pivotY = 40\n\n      ctx.clearRect(0,0, width, height)\n\n      // Grid\n      ctx.strokeStyle = \"#1e293b\"\n      ctx.lineWidth = 0.5\n      ctx.beginPath()\n      for (let i = 0; i < width; i += 40) { ctx.moveTo(i, 0); ctx.lineTo(i, height) }\n      for (let i = 0; i < height; i += 40) { ctx.moveTo(0, i); ctx.lineTo(width, i) }\n      ctx.stroke()\n\n      // Trục đối xứng\n      ctx.strokeStyle = \"#475569\"\n      ctx.setLineDash([6, 6])\n      ctx.beginPath(); ctx.moveTo(centerX, pivotY); ctx.lineTo(centerX, height - 30); ctx.stroke(); ctx.setLineDash([])\n\n      const state = calculateState(t)\n      const visualLength = Math.min(width, height) * 0.65 \n      const bobX = centerX + visualLength * Math.sin(state.theta)\n      const bobY = pivotY + visualLength * Math.cos(state.theta)\n\n      // Trace\n      if (traceRef.current.length > 1) {\n          ctx.strokeStyle = \"rgba(244, 63, 94, 0.4)\" // Rose\n          ctx.lineWidth = 4\n          ctx.lineCap = \"round\"\n          ctx.beginPath()\n          ctx.moveTo(traceRef.current[0].x, traceRef.current[0].y)\n          for (let i = 1; i < traceRef.current.length; i++) {\n              ctx.lineTo(traceRef.current[i].x, traceRef.current[i].y)\n          }\n          ctx.stroke()\n      }\n\n      // Con lắc\n      ctx.fillStyle = \"#64748b\"\n      ctx.fillRect(centerX - 40, pivotY - 10, 80, 10) // Giá treo\n\n      ctx.strokeStyle = \"#cbd5e1\"\n      ctx.lineWidth = 2\n      ctx.beginPath(); ctx.moveTo(centerX, pivotY); ctx.lineTo(bobX, bobY); ctx.stroke() // Dây\n\n      const gradient = ctx.createRadialGradient(bobX - 5, bobY - 5, 2, bobX, bobY, 25)\n      gradient.addColorStop(0, \"#fb923c\")\n      gradient.addColorStop(1, \"#ea580c\")\n      ctx.fillStyle = gradient\n      ctx.beginPath(); ctx.arc(bobX, bobY, 20, 0, 2 * Math.PI); ctx.fill()\n      ctx.strokeStyle = \"#fff7ed\"; ctx.lineWidth = 2; ctx.stroke()\n\n      // Góc alpha\n      ctx.fillStyle = \"#4ade80\"\n      ctx.font = \"bold 14px monospace\"\n      ctx.textAlign = \"center\"\n      ctx.fillText(`α = ${state.alphaDeg.toFixed(1)}°`, bobX, bobY + 45)\n\n      // INFO PANEL TRÊN CANVAS\n      ctx.fillStyle = \"rgba(15, 23, 42, 0.8)\"\n      ctx.fillRect(10, height - 100, 160, 90)\n      ctx.strokeStyle = \"rgba(56, 189, 248, 0.3)\"\n      ctx.strokeRect(10, height - 100, 160, 90)\n      \n      ctx.textAlign = \"left\"\n      ctx.font = \"13px monospace\"\n      \n      ctx.fillStyle = \"#e2e8f0\"\n      ctx.fillText(`t = ${t.toFixed(2)} s`, 20, height - 75)\n      \n      ctx.fillStyle = \"#22d3ee\"\n      ctx.fillText(`α = ${state.alphaDeg.toFixed(1)}°`, 20, height - 55)\n      \n      ctx.fillStyle = \"#facc15\" \n      ctx.fillText(`v = ${(state.v * 100).toFixed(1)} cm/s`, 20, height - 35)\n      \n      ctx.fillStyle = \"#a78bfa\"\n      ctx.fillText(`ω = ${omega.toFixed(2)} rad/s`, 20, height - 15)\n\n      // Tác giả (Đã chỉnh sửa: Nhỏ và mờ hơn)\n      ctx.fillStyle = \"rgba(255, 255, 255, 0.1)\" // Opacity thấp hơn (0.1)\n      ctx.font = \"12px sans-serif\" // Font nhỏ hơn (12px), bỏ in đậm\n      ctx.textAlign = \"right\"\n      ctx.fillText(\"Hô Hoàng Anh A1K50\", width - 15, height - 15)\n\n  }, [calculateState, omega])\n\n  // --- VẼ ĐỒ THỊ ---\n  const drawEnergyGraph = useCallback((ctx: CanvasRenderingContext2D) => {\n      const w = ctx.canvas.width\n      const h = ctx.canvas.height\n      const history = energyHistoryRef.current\n      \n      ctx.fillStyle = \"#0f172a\"\n      ctx.fillRect(0, 0, w, h)\n      \n      ctx.strokeStyle = \"#1e293b\"\n      ctx.lineWidth = 0.5\n      ctx.beginPath()\n      for(let x=0; x<w; x+=50) { ctx.moveTo(x,0); ctx.lineTo(x,h) }\n      for(let y=0; y<h; y+=25) { ctx.moveTo(0,y); ctx.lineTo(w,y) }\n      ctx.stroke()\n\n      if (history.length < 2) return\n\n      const maxE = Math.max(...history.map(pt => pt.w)) || 1\n      const yScale = (h - 30) / (maxE * 1.2)\n\n      const drawLine = (key: 'wd'|'wt'|'w', color: string, width: number = 2) => {\n          ctx.strokeStyle = color\n          ctx.lineWidth = width\n          ctx.beginPath()\n          const dataToDraw = history.slice(-400)\n          const stepX = w / (dataToDraw.length - 1 || 1)\n          dataToDraw.forEach((pt, i) => {\n              const x = i * stepX\n              const y = h - 15 - (pt[key] * yScale)\n              if (i===0) ctx.moveTo(x, y); else ctx.lineTo(x, y)\n          })\n          ctx.stroke()\n      }\n\n      drawLine('wt', '#3b82f6')\n      drawLine('wd', '#22c55e')\n      drawLine('w', '#eab308', 2.5)\n  }, [])\n\n  // --- ANIMATION ---\n  const animate = useCallback(() => {\n    if (!canvasRef.current) return\n    const ctx = canvasRef.current.getContext(\"2d\")\n    if (!ctx) return\n\n    if (isPlaying) {\n        timeRef.current += dt\n        if (timeRef.current > MAX_TIME) timeRef.current = 0\n        setTime(timeRef.current)\n        \n        const state = calculateState(timeRef.current)\n        \n        const width = ctx.canvas.width\n        const height = ctx.canvas.height\n        const visualLength = Math.min(width, height) * 0.65\n        const bobX = (width/2) + visualLength * Math.sin(state.theta)\n        const bobY = 40 + visualLength * Math.cos(state.theta)\n        \n        traceRef.current.push({x: bobX, y: bobY})\n        if (traceRef.current.length > 200) traceRef.current.shift()\n\n        const wt = params.mass * 9.8 * lengthM * (1 - Math.cos(state.theta))\n        const wd = 0.5 * params.mass * state.v * state.v\n        const wTotal = wt + wd\n        \n        energyHistoryRef.current.push({ t: timeRef.current, wd, wt, w: wTotal })\n        if (energyHistoryRef.current.length > 400) energyHistoryRef.current.shift()\n    }\n\n    drawSim(ctx, timeRef.current)\n    if (energyCanvasRef.current) drawEnergyGraph(energyCanvasRef.current.getContext(\"2d\")!)\n\n    animationRef.current = requestAnimationFrame(animate)\n  }, [isPlaying, drawSim, drawEnergyGraph, calculateState, params, lengthM])\n\n  useEffect(() => {\n    animationRef.current = requestAnimationFrame(animate)\n    return () => { if (animationRef.current) cancelAnimationFrame(animationRef.current) }\n  }, [animate])\n\n  useEffect(() => {\n    if (!isPlaying) {\n      if (canvasRef.current) drawSim(canvasRef.current.getContext(\"2d\")!, timeRef.current)\n      if (energyCanvasRef.current) drawEnergyGraph(energyCanvasRef.current.getContext(\"2d\")!)\n    }\n  }, [params, isPlaying, drawSim, drawEnergyGraph])\n\n  const handleReset = () => { setIsPlaying(false); timeRef.current = 0; setTime(0); traceRef.current = []; energyHistoryRef.current = []; }\n  const handleStep = (dir: number) => { setIsPlaying(false); timeRef.current = Math.max(0, timeRef.current + dir * 0.1); setTime(timeRef.current); }\n\n  const currState = calculateState(time)\n  const currWt = params.mass * 9.8 * lengthM * (1 - Math.cos(currState.theta))\n  const currWd = 0.5 * params.mass * currState.v * currState.v\n  const currW = currWt + currWd\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n      {/* CỘT TRÁI */}\n      <div className=\"lg:col-span-2 space-y-4\">\n        {/* Visualizer */}\n        <div className=\"bg-[#1e293b] rounded-xl border border-slate-700/50 shadow-lg relative overflow-hidden\">\n            <canvas ref={canvasRef} width={800} height={380} className=\"w-full h-[380px] cursor-crosshair bg-[#0f172a]\" />\n            <div className=\"absolute top-4 left-4 bg-slate-900/80 backdrop-blur px-3 py-2 rounded-lg border border-slate-700 text-xs font-mono text-cyan-400 flex gap-2\">\n                <Activity size={14}/> Mô phỏng thời gian thực\n            </div>\n        </div>\n\n        {/* Controls & Timeline */}\n        <div className=\"bg-[#1e293b] rounded-xl p-3 border border-slate-700/50 shadow-md flex items-center gap-4\">\n            <div className=\"flex items-center gap-2\">\n                <button onClick={handleReset} className=\"w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 flex items-center justify-center transition-all active:scale-95\"><RotateCcw size={18}/></button>\n                <button onClick={() => handleStep(-1)} className=\"w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 flex items-center justify-center transition-all active:scale-95\"><SkipBack size={18}/></button>\n                <button onClick={() => setIsPlaying(!isPlaying)} className={`w-12 h-12 rounded-xl flex items-center justify-center transition-all shadow-lg active:scale-95 ${isPlaying ? 'bg-amber-500 hover:bg-amber-400 text-white' : 'bg-cyan-500 hover:bg-cyan-400 text-white'}`}>\n                    {isPlaying ? <Pause size={24} fill=\"currentColor\"/> : <Play size={24} fill=\"currentColor\" className=\"ml-1\"/>}\n                </button>\n                <button onClick={() => handleStep(1)} className=\"w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 flex items-center justify-center transition-all active:scale-95\"><SkipForward size={18}/></button>\n            </div>\n            <div className=\"flex-1 flex items-center gap-3 bg-slate-800/50 px-4 py-2 rounded-lg border border-slate-700/30\">\n                <span className=\"text-xs font-mono text-slate-400 w-8\">0s</span>\n                <div className=\"relative flex-1 h-2 bg-slate-700 rounded-full\">\n                    <div className=\"absolute top-0 left-0 h-full bg-cyan-500 rounded-full\" style={{width: `${(time/MAX_TIME)*100}%`}}></div>\n                    <div className=\"absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-cyan-400 rounded-full shadow-md border-2 border-slate-800\" style={{left: `calc(${(time/MAX_TIME)*100}% - 8px)`}}></div>\n                    <input type=\"range\" min=\"0\" max={MAX_TIME} step=\"0.01\" value={time} onChange={(e) => { setIsPlaying(false); timeRef.current = Number(e.target.value); setTime(timeRef.current); traceRef.current = []; }} className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"/>\n                </div>\n                <span className=\"text-xs font-mono text-slate-400 w-8 text-right\">{MAX_TIME}s</span>\n            </div>\n        </div>\n\n        {/* Graph */}\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50 shadow-md\">\n            <div className=\"flex justify-between items-center mb-2\">\n                <h3 className=\"text-xs font-bold text-yellow-500 uppercase flex items-center gap-2\"><TrendingUp size={14}/> Đồ thị Năng lượng</h3>\n                <div className=\"flex gap-3 text-[10px] font-bold uppercase\">\n                    <div className=\"flex items-center gap-1 text-[#eab308]\"><div className=\"w-2 h-2 rounded-full bg-[#eab308]\"></div> Cơ năng</div>\n                    <div className=\"flex items-center gap-1 text-[#22c55e]\"><div className=\"w-2 h-2 rounded-full bg-[#22c55e]\"></div> Động năng</div>\n                    <div className=\"flex items-center gap-1 text-[#3b82f6]\"><div className=\"w-2 h-2 rounded-full bg-[#3b82f6]\"></div> Thế năng</div>\n                </div>\n            </div>\n            <div className=\"relative w-full h-32 bg-[#0f172a] rounded-lg border border-slate-700 overflow-hidden\">\n                <canvas ref={energyCanvasRef} width={800} height={128} className=\"w-full h-full\"/>\n            </div>\n        </div>\n      </div>\n\n      {/* CỘT PHẢI */}\n      <div className=\"lg:col-span-1 space-y-4 flex flex-col\">\n        <ControlPanel title=\"Đại lượng đo đạc\" icon={Activity}>\n            <div className=\"grid grid-cols-2 gap-2\">\n                <StatBox label=\"Thời gian\" value={time.toFixed(2)} unit=\"s\" />\n                <StatBox label=\"Vị trí (α)\" value={currState.alphaDeg.toFixed(1)} unit=\"°\" color=\"text-cyan-400\"/>\n                <StatBox label=\"Chu kỳ\" value={period.toFixed(2)} unit=\"s\" color=\"text-purple-400\"/>\n                <StatBox label=\"Tần số\" value={frequency.toFixed(2)} unit=\"Hz\" color=\"text-purple-400\"/>\n            </div>\n            <div className=\"space-y-1 mt-2\">\n                <div className=\"bg-green-900/20 px-3 py-1.5 rounded border border-green-500/20 flex justify-between items-center\">\n                    <span className=\"text-[10px] text-green-500 font-bold uppercase\">Động năng</span>\n                    <span className=\"font-mono font-bold text-green-400\">{currWd.toFixed(3)} J</span>\n                </div>\n                <div className=\"bg-blue-900/20 px-3 py-1.5 rounded border border-blue-500/20 flex justify-between items-center\">\n                    <span className=\"text-[10px] text-blue-500 font-bold uppercase\">Thế năng</span>\n                    <span className=\"font-mono font-bold text-blue-400\">{currWt.toFixed(3)} J</span>\n                </div>\n                <div className=\"bg-yellow-900/20 px-3 py-2 rounded border border-yellow-500/20 flex justify-between items-center mt-1\">\n                    <span className=\"text-[10px] text-yellow-500 font-bold uppercase\">Cơ năng</span>\n                    <span className=\"font-mono font-bold text-yellow-400 text-lg\">{currW.toFixed(3)} J</span>\n                </div>\n            </div>\n        </ControlPanel>\n\n        <ControlPanel title=\"Cấu hình hệ thống\" icon={Settings}>\n            <div className=\"space-y-5\">\n                <div>\n                    <div className=\"flex justify-between text-xs text-slate-400 mb-1\"><span className=\"flex items-center gap-1\"><Ruler size={12}/> Chiều dài (l)</span> <span className=\"text-cyan-400 font-mono font-bold\">{params.length} cm</span></div>\n                    <input type=\"range\" min=\"50\" max=\"250\" value={params.length} onChange={(e) => { setParams({ ...params, length: Number(e.target.value) }); traceRef.current = []; energyHistoryRef.current = []; }} className=\"w-full accent-cyan-500 h-1.5 bg-slate-700 rounded-lg cursor-pointer\"/>\n                </div>\n                <div>\n                    <div className=\"flex justify-between text-xs text-slate-400 mb-1\"><span className=\"flex items-center gap-1\"><Anchor size={12}/> Gia tốc (g)</span> <span className=\"text-cyan-400 font-mono font-bold\">{params.gravity} m/s²</span></div>\n                    <input type=\"range\" min=\"1.6\" max=\"20\" step=\"0.1\" value={params.gravity} onChange={(e) => { setParams({ ...params, gravity: Number(e.target.value) }); traceRef.current = []; energyHistoryRef.current = []; }} className=\"w-full accent-cyan-500 h-1.5 bg-slate-700 rounded-lg cursor-pointer\"/>\n                </div>\n                <div>\n                    <div className=\"flex justify-between text-xs text-slate-400 mb-1\"><span className=\"flex items-center gap-1\"><RotateCcw size={12}/> Góc đầu (α₀)</span> <span className=\"text-cyan-400 font-mono font-bold\">{params.initialAngle}°</span></div>\n                    <input type=\"range\" min=\"5\" max=\"60\" value={params.initialAngle} onChange={(e) => { setParams({ ...params, initialAngle: Number(e.target.value) }); traceRef.current = []; energyHistoryRef.current = []; }} className=\"w-full accent-cyan-500 h-1.5 bg-slate-700 rounded-lg cursor-pointer\"/>\n                </div>\n                <div>\n                    <div className=\"flex justify-between text-xs text-slate-400 mb-1\"><span className=\"flex items-center gap-1\"><Zap size={12}/> Khối lượng (m)</span> <span className=\"text-cyan-400 font-mono font-bold\">{params.mass} kg</span></div>\n                    <input type=\"range\" min=\"0.1\" max=\"5\" step=\"0.1\" value={params.mass} onChange={(e) => { setParams({ ...params, mass: Number(e.target.value) }); energyHistoryRef.current = []; }} className=\"w-full accent-cyan-500 h-1.5 bg-slate-700 rounded-lg cursor-pointer\"/>\n                </div>\n            </div>\n            <div className=\"mt-4 pt-4 border-t border-slate-700/50 text-xs text-slate-400 font-mono\">\n                <p>T = 2π√(l/g)</p>\n                <p>W = mgl(1-cos(α₀))</p>\n            </div>\n        </ControlPanel>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2670, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/experiments/damped-oscillation.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRef, useEffect, useState, useCallback } from \"react\"\nimport { Play, Pause, RotateCcw, SkipBack, SkipForward, Activity, Settings, TrendingDown, Wind, Zap, Droplets, Hexagon } from \"lucide-react\"\n\n// --- COMPONENT CON ---\nconst ControlPanel = ({ title, icon: Icon, children }: { title: string; icon?: any; children: React.ReactNode }) => (\n  <div className=\"bg-[#1e293b] rounded-xl border border-slate-700/50 shadow-sm overflow-hidden flex flex-col h-full\">\n    <div className=\"bg-slate-800/50 px-4 py-3 border-b border-slate-700/50 flex items-center gap-2\">\n      {Icon && <Icon size={16} className=\"text-cyan-400\"/>}\n      <h3 className=\"text-slate-300 font-bold text-xs uppercase tracking-wider\">{title}</h3>\n    </div>\n    <div className=\"p-4 space-y-4 flex-1\">{children}</div>\n  </div>\n)\n\n// --- GRID BACKGROUND COMPONENT ---\nconst GridBackground = () => (\n  <defs>\n    <pattern id=\"smallGrid\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\">\n      <path d=\"M 20 0 L 0 0 0 20\" fill=\"none\" stroke=\"#334155\" strokeWidth=\"0.5\" opacity=\"0.3\" />\n    </pattern>\n    <pattern id=\"grid\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\">\n      <rect width=\"100\" height=\"100\" fill=\"url(#smallGrid)\" />\n      <path d=\"M 100 0 L 0 0 0 100\" fill=\"none\" stroke=\"#475569\" strokeWidth=\"1\" opacity=\"0.5\" />\n    </pattern>\n  </defs>\n)\n\nconst ENVIRONMENTS: Record<string, { name: string; beta: number; color: string; icon: any }> = {\n    vacuum: { name: 'Chân không', beta: 0, color: '#94a3b8', icon: Zap },\n    air:    { name: 'Không khí',  beta: 0.05, color: '#38bdf8', icon: Wind },\n    water:  { name: 'Nước',       beta: 0.3,  color: '#3b82f6', icon: Droplets },\n    oil:    { name: 'Dầu nhớt',   beta: 0.8,  color: '#eab308', icon: Hexagon }\n};\n\nexport default function DampedOscillation() {\n  const energyCanvasRef = useRef<HTMLCanvasElement>(null)\n  \n  const [isPlaying, setIsPlaying] = useState(false)\n  const [time, setTime] = useState(0)\n  const [env, setEnv] = useState('air')\n  const [graphMode, setGraphMode] = useState<'x' | 'v' | 'a'>('x') // Chế độ hiển thị đồ thị\n  const MAX_TIME = 20\n\n  const [params, setParams] = useState({\n    A: 80,   // px\n    f: 0.5,  // Hz\n    phi: 0,  // rad\n    m: 1.0,  // kg\n    k: 20    // N/m\n  })\n\n  const energyHistoryRef = useRef<{t: number, w: number}[]>([])\n  const animationRef = useRef<number>()\n  const timeRef = useRef(0)\n  const dt = 0.02\n\n  // --- TÍNH TOÁN ---\n  const beta = ENVIRONMENTS[env].beta\n  const omega = 2 * Math.PI * params.f\n  \n  // Tính trạng thái x, v, a tại thời điểm t\n  const calculateState = useCallback((t: number) => {\n      // Phase\n      const phase = omega * t + params.phi\n      const exp = Math.exp(-beta * t)\n      \n      // Li độ x\n      const x = params.A * exp * Math.cos(phase)\n      const envelope = params.A * exp\n\n      // Vận tốc v = dx/dt\n      const v = -beta * x - params.A * exp * omega * Math.sin(phase)\n\n      // Gia tốc a = dv/dt\n      const a = -2 * beta * v - (beta * beta + omega * omega) * x\n\n      // Năng lượng (xấp xỉ)\n      const w0 = 0.5 * params.k * (params.A/100)**2 \n      const w = w0 * Math.exp(-2 * beta * t)\n      \n      return { x, v, a, envelope, w }\n  }, [beta, omega, params.A, params.k, params.phi])\n\n  // --- GENERATE SVG PATHS ---\n  const width = 800\n  const height = 380\n  const centerY = height / 2\n  const timeScale = width / MAX_TIME \n\n  const generatePaths = useCallback(() => {\n    const points = []\n    const envTop = []\n    const envBot = []\n\n    const scaleV = omega > 0 ? 1/omega : 1; \n    const scaleA = omega > 0 ? 1/(omega*omega) : 1;\n\n    for (let i = 0; i <= width; i += 2) {\n      const t_plot = i / timeScale\n      const state = calculateState(t_plot)\n      \n      let val = 0;\n      if (graphMode === 'x') val = state.x;\n      else if (graphMode === 'v') val = state.v * scaleV; \n      else if (graphMode === 'a') val = state.a * scaleA;\n\n      points.push(`${i},${centerY - val}`)\n      \n      if (graphMode === 'x') {\n          envTop.push(`${i},${centerY - state.envelope}`)\n          envBot.push(`${i},${centerY + state.envelope}`)\n      }\n    }\n\n    return {\n      wave: `M ${points.join(\" L \")}`,\n      envTop: graphMode === 'x' ? `M ${envTop.join(\" L \")}` : \"\",\n      envBot: graphMode === 'x' ? `M ${envBot.join(\" L \")}` : \"\",\n    }\n  }, [calculateState, graphMode, timeScale, centerY, omega])\n\n  const paths = generatePaths()\n  const cx = time * timeScale \n  const currState = calculateState(time)\n  \n  // Value to display for the dot (normalized)\n  let currentDisplayVal = currState.x;\n  if (graphMode === 'v') currentDisplayVal = currState.v * (omega > 0 ? 1/omega : 1);\n  if (graphMode === 'a') currentDisplayVal = currState.a * (omega > 0 ? 1/(omega*omega) : 1);\n\n\n  // --- DRAW ENERGY GRAPH ---\n  const drawEnergy = useCallback((ctx: CanvasRenderingContext2D) => {\n      const w = ctx.canvas.width; const h = ctx.canvas.height;\n      \n      ctx.fillStyle = \"#0f172a\"; ctx.fillRect(0,0,w,h);\n      ctx.strokeStyle = \"#1e293b\"; ctx.lineWidth = 0.5; ctx.beginPath();\n      for(let x=0; x<w; x+=w/10) { ctx.moveTo(x,0); ctx.lineTo(x,h) }\n      ctx.stroke();\n\n      const history = energyHistoryRef.current;\n      if(history.length < 2) return;\n\n      const maxE = history[0].w || 1; \n      const yScale = (h - 20) / maxE;\n\n      ctx.strokeStyle = \"#eab308\"; ctx.lineWidth = 2; ctx.beginPath();\n      history.forEach((pt, i) => {\n          const x = pt.t * (w/MAX_TIME);\n          const y = h - 10 - (pt.w * yScale);\n          if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);\n      });\n      ctx.stroke();\n      \n      ctx.fillStyle = \"rgba(234, 179, 8, 0.1)\"; \n      ctx.lineTo(history[history.length-1].t * (w/MAX_TIME), h); \n      ctx.lineTo(0, h); \n      ctx.fill();\n\n  }, [MAX_TIME])\n\n  // --- LOOP ---\n  const animate = useCallback(() => {\n    if (isPlaying) {\n        timeRef.current += dt;\n        if (timeRef.current > MAX_TIME) { setIsPlaying(false); timeRef.current = MAX_TIME; }\n        setTime(timeRef.current);\n        \n        const state = calculateState(timeRef.current);\n        if (timeRef.current % 0.1 < dt) {\n            energyHistoryRef.current.push({ t: timeRef.current, w: state.w });\n        }\n    }\n    if (energyCanvasRef.current) drawEnergy(energyCanvasRef.current.getContext('2d')!);\n    animationRef.current = requestAnimationFrame(animate);\n  }, [isPlaying, drawEnergy, calculateState]);\n\n  useEffect(() => {\n    animationRef.current = requestAnimationFrame(animate);\n    return () => { if(animationRef.current) cancelAnimationFrame(animationRef.current); }\n  }, [animate]);\n\n  useEffect(() => {\n      if (!isPlaying && energyCanvasRef.current) {\n          drawEnergy(energyCanvasRef.current.getContext('2d')!);\n      }\n  }, [params, env, drawEnergy, isPlaying])\n\n  const handleReset = () => { setIsPlaying(false); timeRef.current = 0; setTime(0); energyHistoryRef.current = []; }\n  const handleStep = (dir: number) => { setIsPlaying(false); timeRef.current = Math.max(0, Math.min(MAX_TIME, timeRef.current + dir*0.5)); setTime(timeRef.current); }\n\n  // Màu sắc cho từng chế độ\n  const getGraphColor = () => {\n      if (graphMode === 'x') return ENVIRONMENTS[env].color;\n      if (graphMode === 'v') return '#22c55e'; // Green\n      if (graphMode === 'a') return '#ef4444'; // Red\n      return '#fff';\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n      {/* CỘT TRÁI */}\n      <div className=\"lg:col-span-2 space-y-4\">\n        \n        {/* Main Visual (SVG) */}\n        <div className=\"bg-[#1e293b] rounded-xl border border-slate-700/50 shadow-lg relative overflow-hidden h-[380px]\">\n            {/* Mode Selector (Tabs) */}\n            <div className=\"absolute top-4 right-4 z-20 flex bg-slate-900/80 backdrop-blur rounded-lg p-1 border border-slate-700\">\n                <button onClick={() => setGraphMode('x')} className={`px-3 py-1 rounded text-xs font-bold transition-colors ${graphMode==='x' ? 'bg-cyan-600 text-white' : 'text-slate-400 hover:text-white'}`}>x(t)</button>\n                <button onClick={() => setGraphMode('v')} className={`px-3 py-1 rounded text-xs font-bold transition-colors ${graphMode==='v' ? 'bg-green-600 text-white' : 'text-slate-400 hover:text-white'}`}>v(t)</button>\n                <button onClick={() => setGraphMode('a')} className={`px-3 py-1 rounded text-xs font-bold transition-colors ${graphMode==='a' ? 'bg-red-500 text-white' : 'text-slate-400 hover:text-white'}`}>a(t)</button>\n            </div>\n\n            {/* SVG Layer */}\n            <svg width=\"100%\" height=\"100%\" viewBox={`0 0 ${width} ${height}`} className=\"bg-[#0f172a] absolute inset-0\">\n                <GridBackground />\n                <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" opacity=\"0.5\" />\n                \n                {/* Trục tọa độ */}\n                <line x1=\"0\" y1={centerY} x2={width} y2={centerY} stroke=\"#475569\" strokeWidth=\"1\" />\n                <line x1=\"2\" y1=\"0\" x2=\"2\" y2={height} stroke=\"#475569\" strokeWidth=\"1\" />\n\n                {/* Đường bao (Chỉ hiện khi xem x) */}\n                {beta > 0 && graphMode === 'x' && (\n                    <>\n                    <path d={paths.envTop} fill=\"none\" stroke=\"#94a3b8\" strokeDasharray=\"4 4\" strokeWidth=\"1\" opacity=\"0.5\" />\n                    <path d={paths.envBot} fill=\"none\" stroke=\"#94a3b8\" strokeDasharray=\"4 4\" strokeWidth=\"1\" opacity=\"0.5\" />\n                    </>\n                )}\n\n                {/* Đường sóng (Wave) */}\n                <path\n                    d={paths.wave}\n                    fill=\"none\"\n                    stroke={getGraphColor()}\n                    strokeWidth=\"3\"\n                    filter=\"drop-shadow(0 0 4px currentColor)\"\n                />\n\n                {/* Điểm chạy (Scan Line & Point) */}\n                {cx < width && (\n                    <g>\n                        <line x1={cx} y1=\"0\" x2={cx} y2={height} stroke=\"#facc15\" strokeWidth=\"1\" opacity=\"0.3\" />\n                        <g transform={`translate(${cx}, ${centerY - currentDisplayVal})`}>\n                            <circle r=\"6\" fill=\"#facc15\" stroke=\"white\" strokeWidth=\"2\" />\n                            <line x1=\"0\" y1=\"0\" x2=\"0\" y2={currentDisplayVal} stroke=\"#facc15\" strokeDasharray=\"2 2\" opacity=\"0.5\" />\n                        </g>\n                    </g>\n                )}\n            </svg>\n\n            {/* Labels Overlay */}\n            <div className=\"absolute top-4 left-4 bg-slate-900/80 backdrop-blur px-3 py-2 rounded-lg border border-slate-700 text-xs font-mono flex gap-2\" style={{color: getGraphColor()}}>\n                <Activity size={14}/> \n                {graphMode === 'x' && \"Đồ thị Li độ x(t)\"}\n                {graphMode === 'v' && \"Đồ thị Vận tốc v(t)\"}\n                {graphMode === 'a' && \"Đồ thị Gia tốc a(t)\"}\n            </div>\n            \n            {/* Info Panel Integrated into Canvas (Bottom Right - MOVED HERE) */}\n            <div className=\"absolute bottom-4 right-4 bg-slate-900/80 backdrop-blur p-3 rounded-lg border border-slate-700/50 text-xs font-mono shadow-lg min-w-[180px] z-10\">\n                <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-slate-400\">t:</span>\n                    <span className=\"text-white\">{time.toFixed(2)}s</span>\n                </div>\n                <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-slate-400\">x:</span>\n                    <span className=\"text-cyan-400\">{currState.x.toFixed(1)} px</span>\n                </div>\n                <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-slate-400\">v:</span>\n                    <span className=\"text-green-400\">{currState.v.toFixed(1)}</span>\n                </div>\n                <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-slate-400\">a:</span>\n                    <span className=\"text-red-400\">{currState.a.toFixed(1)}</span>\n                </div>\n                {beta > 0 && (\n                    <div className=\"flex justify-between border-t border-slate-700 mt-1 pt-1\">\n                        <span className=\"text-slate-500\">Env:</span>\n                        <span className=\"text-slate-300\">{currState.envelope.toFixed(1)}</span>\n                    </div>\n                )}\n            </div>\n\n            {/* Signature (Bottom Left - MOVED HERE) */}\n            <div className=\"absolute bottom-4 left-4 text-[10px] font-mono text-slate-600\">\n                Hô Hoàng Anh A1K50\n            </div>\n        </div>\n\n        {/* Controls */}\n        <div className=\"bg-[#1e293b] rounded-xl p-3 border border-slate-700/50 shadow-md flex items-center gap-4\">\n            <div className=\"flex items-center gap-2\">\n                <button onClick={handleReset} className=\"w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 flex items-center justify-center transition-all active:scale-95\"><RotateCcw size={18}/></button>\n                <button onClick={() => handleStep(-1)} className=\"w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 flex items-center justify-center transition-all active:scale-95\"><SkipBack size={18}/></button>\n                <button onClick={() => setIsPlaying(!isPlaying)} className={`w-12 h-12 rounded-xl flex items-center justify-center transition-all shadow-lg active:scale-95 ${isPlaying ? 'bg-amber-500 hover:bg-amber-400 text-white' : 'bg-cyan-500 hover:bg-cyan-400 text-white'}`}>\n                    {isPlaying ? <Pause size={24} fill=\"currentColor\"/> : <Play size={24} fill=\"currentColor\" className=\"ml-1\"/>}\n                </button>\n                <button onClick={() => handleStep(1)} className=\"w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 flex items-center justify-center transition-all active:scale-95\"><SkipForward size={18}/></button>\n            </div>\n            <div className=\"flex-1 flex items-center gap-3 bg-slate-800/50 px-4 py-2 rounded-lg border border-slate-700/30\">\n                <span className=\"text-xs font-mono text-slate-400 w-8\">0s</span>\n                <div className=\"relative flex-1 h-2 bg-slate-700 rounded-full\">\n                    <div className=\"absolute top-0 left-0 h-full bg-cyan-500 rounded-full\" style={{width: `${(time/MAX_TIME)*100}%`}}></div>\n                    <input type=\"range\" min=\"0\" max={MAX_TIME} step=\"0.01\" value={time} onChange={(e) => { setIsPlaying(false); timeRef.current = Number(e.target.value); setTime(timeRef.current); energyHistoryRef.current = []; }} className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"/>\n                </div>\n                <span className=\"text-xs font-mono text-slate-400 w-8 text-right\">{MAX_TIME}s</span>\n            </div>\n        </div>\n\n        {/* Energy Graph */}\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50 shadow-md\">\n            <div className=\"flex justify-between items-center mb-2\">\n                <h3 className=\"text-xs font-bold text-yellow-500 uppercase flex items-center gap-2\"><TrendingDown size={14}/> Sự hao hụt cơ năng</h3>\n                <div className=\"text-[10px] font-mono text-yellow-400 font-bold\">\n                    Năng lượng (W) = {(currState.w * 1000).toFixed(2)} mJ\n                </div>\n            </div>\n            <div className=\"relative w-full h-32 bg-[#0f172a] rounded-lg border border-slate-700 overflow-hidden\">\n                <canvas ref={energyCanvasRef} width={800} height={128} className=\"w-full h-full\"/>\n            </div>\n        </div>\n      </div>\n\n      {/* CỘT PHẢI */}\n      <div className=\"lg:col-span-1 space-y-4 flex flex-col\">\n        {/* Environment Selector */}\n        <div className=\"bg-[#1e293b] rounded-xl border border-slate-700/50 p-4 shadow-sm\">\n            <h3 className=\"text-slate-300 font-bold text-xs uppercase mb-3 flex items-center gap-2\"><Settings size={14}/> Môi trường cản</h3>\n            <div className=\"grid grid-cols-2 gap-2\">\n                {Object.entries(ENVIRONMENTS).map(([key, val]) => {\n                    const IconComp = val.icon;\n                    return (\n                        <button key={key} onClick={() => { setEnv(key); handleReset(); }} className={`p-2 rounded-lg border text-xs font-bold flex items-center gap-2 transition-all ${env === key ? 'bg-cyan-900/40 border-cyan-500 text-cyan-400' : 'bg-slate-800 border-transparent text-slate-400 hover:bg-slate-700'}`}>\n                            <IconComp size={14} /> {val.name}\n                        </button>\n                    )\n                })}\n            </div>\n        </div>\n\n        {/* Config */}\n        <ControlPanel title=\"Cấu hình hệ thống\" icon={Settings}>\n            <div className=\"space-y-4\">\n                <div>\n                    <div className=\"flex justify-between text-xs text-slate-400 mb-1\"><span>Tần số (f)</span> <span className=\"text-cyan-400 font-mono\">{params.f} Hz</span></div>\n                    <input type=\"range\" min=\"0.1\" max=\"2\" step=\"0.1\" value={params.f} onChange={(e) => { setParams({ ...params, f: Number(e.target.value) }); handleReset(); }} className=\"w-full accent-cyan-500 h-1.5 bg-slate-700 rounded-lg cursor-pointer\"/>\n                </div>\n                <div>\n                    <div className=\"flex justify-between text-xs text-slate-400 mb-1\"><span>Biên độ đầu (A)</span> <span className=\"text-cyan-400 font-mono\">{params.A} px</span></div>\n                    <input type=\"range\" min=\"20\" max=\"150\" value={params.A} onChange={(e) => { setParams({ ...params, A: Number(e.target.value) }); handleReset(); }} className=\"w-full accent-cyan-500 h-1.5 bg-slate-700 rounded-lg cursor-pointer\"/>\n                </div>\n                <div>\n                    <div className=\"flex justify-between text-xs text-slate-400 mb-1\"><span>Pha ban đầu (φ)</span> <span className=\"text-cyan-400 font-mono\">{params.phi.toFixed(2)}</span></div>\n                    <input type=\"range\" min=\"0\" max=\"6.28\" step=\"0.1\" value={params.phi} onChange={(e) => { setParams({ ...params, phi: Number(e.target.value) }); handleReset(); }} className=\"w-full accent-cyan-500 h-1.5 bg-slate-700 rounded-lg cursor-pointer\"/>\n                </div>\n            </div>\n            <div className=\"mt-4 pt-4 border-t border-slate-700/50 text-xs text-slate-400 font-mono space-y-1\">\n                <p>x = A·e^(-βt)·cos(ωt + φ)</p>\n                <p>β = {beta} (Hệ số tắt dần)</p>\n            </div>\n        </ControlPanel>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3912, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/experiments/harmonic-oscillation.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRef, useEffect, useState, useCallback } from \"react\"\nimport { Zap, RotateCcw, SkipBack, Pause, Play, SkipForward, ChevronLeft, ChevronRight } from \"lucide-react\"\n\n// Special angles in degrees within one circle (0 to 360)\nconst SPECIAL_ANGLES_DEG = [0, 30, 45, 60, 90, 120, 135, 150, 180, 210, 225, 240, 270, 300, 315, 330]\nconst SPECIAL_ANGLES_RAD = SPECIAL_ANGLES_DEG.map((d) => (d * Math.PI) / 180)\n\nexport default function HarmonicOscillation() {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [time, setTime] = useState(0)\n\n  const [showGraph, setShowGraph] = useState({ x: true, v: true, a: true })\n\n  const [params, setParams] = useState({\n    amplitude: 10,\n    frequency: 0.5,\n    phase: 0,\n  })\n\n  const animationRef = useRef<number>()\n  const timeRef = useRef(0)\n\n  const omega = 2 * Math.PI * params.frequency\n  const T = 1 / params.frequency\n  const dt = 0.016\n\n  const calculateState = useCallback(\n    (t: number) => {\n      const x = params.amplitude * Math.cos(omega * t + params.phase)\n      const v = -params.amplitude * omega * Math.sin(omega * t + params.phase)\n      const a = -params.amplitude * omega * omega * Math.cos(omega * t + params.phase)\n      return { x, v, a }\n    },\n    [params.amplitude, omega, params.phase],\n  )\n\n  const draw = useCallback(\n    (ctx: CanvasRenderingContext2D, t: number) => {\n      const width = ctx.canvas.width\n      const height = ctx.canvas.height\n      \n      // Layout config\n      const circleSectionWidth = 300\n      const graphStartX = circleSectionWidth + 40 // More space for labels\n      const graphWidth = width - graphStartX - 20\n      const centerX = circleSectionWidth / 2\n      const centerY = height / 2\n\n      ctx.fillStyle = \"#0f172a\"\n      ctx.fillRect(0, 0, width, height)\n\n      // --- CIRCLE SECTION ---\n      \n      const state = calculateState(t)\n      const angle = omega * t + params.phase\n      const radius = 80\n\n      // Circle Grid/Axes\n      ctx.strokeStyle = \"#1e293b\"\n      ctx.lineWidth = 1\n      ctx.beginPath()\n      ctx.moveTo(centerX, centerY - radius - 30)\n      ctx.lineTo(centerX, centerY + radius + 30)\n      ctx.moveTo(centerX - radius - 30, centerY)\n      ctx.lineTo(centerX + radius + 30, centerY)\n      ctx.stroke()\n\n      // Main Circle\n      ctx.strokeStyle = \"#475569\"\n      ctx.lineWidth = 2\n      ctx.beginPath()\n      ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI)\n      ctx.stroke()\n\n      // Vector\n      const vectorX = centerX + radius * Math.cos(angle)\n      const vectorY = centerY - radius * Math.sin(angle)\n\n      ctx.strokeStyle = \"#f97316\"\n      ctx.lineWidth = 3\n      ctx.beginPath()\n      ctx.moveTo(centerX, centerY)\n      ctx.lineTo(vectorX, vectorY)\n      ctx.stroke()\n\n      ctx.fillStyle = \"#f97316\"\n      ctx.beginPath()\n      ctx.arc(vectorX, vectorY, 6, 0, 2 * Math.PI)\n      ctx.fill()\n\n      // --- GRAPH SECTION ---\n\n      const activeGraphs = [showGraph.x, showGraph.v, showGraph.a].filter(Boolean).length\n      const graphHeight = activeGraphs > 0 ? (height - 40) / activeGraphs : 0\n      \n      let currentGraphIndex = 0\n\n      // Time Window (History length)\n      const timeWindow = 2.5 * T // Show 2.5 periods of history\n\n      const drawGraphLane = (\n        type: 'x' | 'v' | 'a', \n        color: string, \n        getValue: (wt: number) => number, \n        maxValue: number,\n        label: string,\n        unit: string\n      ) => {\n        if (!showGraph[type]) return\n\n        const laneY = 20 + currentGraphIndex * graphHeight\n        const laneCenterY = laneY + graphHeight / 2\n        \n        // Draw Axis Line\n        ctx.strokeStyle = \"#334155\"\n        ctx.lineWidth = 1\n        ctx.beginPath()\n        ctx.moveTo(graphStartX, laneCenterY)\n        ctx.lineTo(graphStartX + graphWidth, laneCenterY)\n        ctx.stroke()\n\n        // Y-Axis Labels (Min/Max values)\n        ctx.fillStyle = color\n        ctx.font = \"10px monospace\"\n        ctx.textAlign = \"right\"\n        // Top (+Max)\n        ctx.fillText(`+${maxValue.toFixed(2)}`, graphStartX - 5, laneY + 15)\n        // Bottom (-Max)\n        ctx.fillText(`-${maxValue.toFixed(2)}`, graphStartX - 5, laneY + graphHeight - 5)\n        // Zero\n        // ctx.fillStyle = \"#64748b\"\n        // ctx.fillText(\"0\", graphStartX - 5, laneCenterY + 3)\n\n        // Draw T/4 Grid Lines\n        // t is at the RIGHT edge (graphStartX + graphWidth)\n        // t - timeWindow is at the LEFT edge (graphStartX)\n        \n        const quarterT = T / 4\n        // Calculate the range of k for grid lines: k*T/4\n        const tEnd = t \n        const tStart = t - timeWindow\n        \n        const kStart = Math.ceil(tStart / quarterT)\n        const kEnd = Math.floor(tEnd / quarterT)\n\n        ctx.textAlign = \"center\"\n        ctx.font = \"10px monospace\"\n\n        for (let k = kStart; k <= kEnd; k++) {\n            if (k < 0) continue // Don't draw negative time\n            const tGrid = k * quarterT\n            // Map time to X position\n            // x = graphStartX + graphWidth - (tEnd - tGrid) * (graphWidth / timeWindow)\n            const xPos = graphStartX + graphWidth - ((tEnd - tGrid) / timeWindow) * graphWidth\n            \n            // Grid Line\n            ctx.strokeStyle = \"#334155\"\n            ctx.lineWidth = 1\n            ctx.setLineDash([2, 2])\n            ctx.beginPath()\n            ctx.moveTo(xPos, laneY)\n            ctx.lineTo(xPos, laneY + graphHeight)\n            ctx.stroke()\n            ctx.setLineDash([])\n\n            // Grid Label (Only draw if it's visible and not too close to edges)\n            if (xPos > graphStartX + 10 && xPos < graphStartX + graphWidth + 10) {\n                ctx.fillStyle = \"#94a3b8\"\n                let gridLabel = \"\"\n                if (k === 0) gridLabel = \"0\"\n                else if (k % 4 === 0) gridLabel = `${k/4}T`\n                else if (k % 2 === 0) gridLabel = `${k/2}T/2`\n                else gridLabel = `${k}T/4`\n                \n                // Draw label at the bottom of the lane\n                ctx.fillText(gridLabel, xPos, laneY + graphHeight - 5)\n            }\n        }\n\n        // Draw Curve\n        ctx.strokeStyle = color\n        ctx.lineWidth = 2\n        ctx.beginPath()\n        \n        // Draw from Left (Past) to Right (Present)\n        const step = 2 \n        let started = false\n        \n        for (let i = 0; i <= graphWidth; i += step) {\n            // i=0 corresponds to tStart (Left)\n            // i=graphWidth corresponds to tEnd (Right)\n            const waveT = tStart + (i / graphWidth) * timeWindow\n            \n            if (waveT < 0) continue // Don't draw negative time\n\n            const val = getValue(waveT)\n            const scale = (graphHeight / 2) * 0.8\n            const y = laneCenterY - (val / maxValue) * scale\n            \n            if (!started) {\n                ctx.moveTo(graphStartX + i, y)\n                started = true\n            } else {\n                ctx.lineTo(graphStartX + i, y)\n            }\n        }\n        ctx.stroke()\n\n        // Draw Current Value Dot (at Right Edge)\n        const currentVal = getValue(t)\n        const currentY = laneCenterY - (currentVal / maxValue) * ((graphHeight / 2) * 0.8)\n        \n        ctx.fillStyle = color\n        ctx.beginPath()\n        ctx.arc(graphStartX + graphWidth, currentY, 4, 0, 2 * Math.PI)\n        ctx.fill()\n\n        // Draw Label Title\n        ctx.font = \"bold 12px monospace\"\n        ctx.fillStyle = color\n        ctx.textAlign = \"left\"\n        ctx.fillText(`${label}`, graphStartX + 10, laneY + 20)\n        \n        // Current Value Text\n        ctx.textAlign = \"right\"\n        ctx.fillText(`${getValue(t).toFixed(2)} ${unit}`, graphStartX + graphWidth - 10, laneY + 20)\n        \n        currentGraphIndex++\n      }\n\n      // 1. Draw X (Red)\n      drawGraphLane('x', '#ef4444', \n        (wt) => params.amplitude * Math.cos(omega * wt + params.phase), \n        params.amplitude, \n        \"Li độ x (cm)\", \n        \"cm\"\n      )\n\n      // 2. Draw V (Green)\n      drawGraphLane('v', '#22c55e', \n        (wt) => -params.amplitude * omega * Math.sin(omega * wt + params.phase), \n        params.amplitude * omega, \n        \"Vận tốc v (cm/s)\", \n        \"cm/s\"\n      )\n\n      // 3. Draw A (Blue)\n      drawGraphLane('a', '#3b82f6', \n        (wt) => -params.amplitude * omega * omega * Math.cos(omega * wt + params.phase), \n        params.amplitude * omega * omega, \n        \"Gia tốc a (cm/s²)\", \n        \"cm/s²\"\n      )\n\n      // Labels\n      ctx.fillStyle = \"#94a3b8\"\n      ctx.font = \"12px monospace\"\n      ctx.textAlign = \"center\"\n      ctx.fillText(\"Vòng tròn lượng giác\", centerX, height - 10)\n      \n      // Info overlay on Circle\n      ctx.fillStyle = \"rgba(15, 23, 42, 0.8)\"\n      ctx.fillRect(10, 10, 100, 30)\n      ctx.strokeStyle = \"rgba(56, 189, 248, 0.3)\"\n      ctx.strokeRect(10, 10, 100, 30)\n      ctx.fillStyle = \"#e2e8f0\"\n      ctx.font = \"13px monospace\"\n      ctx.textAlign = \"left\"\n      ctx.fillText(`t = ${t.toFixed(3)}s`, 20, 28)\n\n      // Author\n      ctx.fillStyle = \"rgba(255, 255, 255, 0.15)\"\n      ctx.font = \"12px monospace\"\n      ctx.textAlign = \"right\"\n      ctx.fillText(\"Hô Hoàng Anh A1K50\", width - 15, height - 15)\n      ctx.textAlign = \"left\"\n    },\n    [params.amplitude, params.phase, omega, calculateState, showGraph, T],\n  )\n\n  const animate = useCallback(() => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n\n    timeRef.current += dt\n    // No more MAX_TIME limit\n    setTime(timeRef.current)\n    draw(ctx, timeRef.current)\n\n    if (isPlaying) {\n      animationRef.current = requestAnimationFrame(animate)\n    }\n  }, [isPlaying, draw])\n\n  useEffect(() => {\n    if (isPlaying) {\n      animationRef.current = requestAnimationFrame(animate)\n    }\n    return () => {\n      if (animationRef.current) cancelAnimationFrame(animationRef.current)\n    }\n  }, [isPlaying, animate])\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n    draw(ctx, timeRef.current)\n  }, [params, draw, showGraph])\n\n  const handleManualUpdate = (newTime: number) => {\n    setIsPlaying(false)\n    // Removed MAX_TIME limit\n    timeRef.current = Math.max(0, newTime)\n    setTime(timeRef.current)\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n    draw(ctx, timeRef.current)\n  }\n\n  // Handle large jumps\n  const handleSkip = (direction: number) => {\n    handleManualUpdate(timeRef.current + direction * 0.5) // Jump 0.5s\n  }\n\n  const handleReset = () => {\n    handleManualUpdate(0)\n  }\n\n  // Handle Micro Step (T/80) with snapping to special positions\n  const handleMicroStep = (direction: number) => {\n    const stepTime = T / 80\n    // Small epsilon to prevent floating point issues and getting stuck on a value\n    const epsilon = 1e-4 \n    \n    const currentPhaseTotal = omega * timeRef.current + params.phase\n    // Normalize to 0 -> 2PI for comparison\n    const currentPhaseNorm = currentPhaseTotal % (2 * Math.PI)\n    // Handle negative modulo result\n    const currentPhasePos = currentPhaseNorm < 0 ? currentPhaseNorm + 2 * Math.PI : currentPhaseNorm\n\n    let targetTime = timeRef.current + direction * stepTime\n    let snapped = false\n\n    // Step Phase in radians\n    const stepPhase = (2 * Math.PI) / 80\n\n    if (direction > 0) {\n        // Moving forward\n        let nextSpecial = SPECIAL_ANGLES_RAD.find(a => a > currentPhasePos + epsilon)\n        let distance = 0\n        \n        if (nextSpecial !== undefined) {\n            distance = nextSpecial - currentPhasePos\n        } else {\n            // Wrap around\n            nextSpecial = SPECIAL_ANGLES_RAD[0] + 2 * Math.PI\n            distance = nextSpecial - currentPhasePos\n        }\n        \n        // If the distance to the next special angle is within our step size (plus a tiny bit), snap to it\n        if (distance <= stepPhase + epsilon) {\n            targetTime = timeRef.current + distance / omega\n            snapped = true\n        }\n    } else {\n        // Moving backward\n        const reversed = [...SPECIAL_ANGLES_RAD].reverse()\n        let prevSpecial = reversed.find(a => a < currentPhasePos - epsilon)\n        let distance = 0\n\n        if (prevSpecial !== undefined) {\n            distance = currentPhasePos - prevSpecial\n        } else {\n             // Wrap around backward\n             prevSpecial = SPECIAL_ANGLES_RAD[SPECIAL_ANGLES_RAD.length - 1] - 2 * Math.PI\n             distance = currentPhasePos - prevSpecial\n        }\n\n        if (distance <= stepPhase + epsilon) {\n             targetTime = timeRef.current - distance / omega\n             snapped = true\n        }\n    }\n\n    handleManualUpdate(targetTime)\n  }\n\n  const state = calculateState(time)\n  const kineticEnergy = (0.5 * state.v * state.v) / 10000\n  const potentialEnergy = (0.5 * omega * omega * state.x * state.x) / 10000\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n      <div className=\"lg:col-span-2 space-y-4\">\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50 relative\">\n          {/* Toggle buttons */}\n          <div className=\"absolute top-4 right-4 flex gap-2 z-10 bg-[#0f172a]/80 p-1 rounded-lg backdrop-blur-sm border border-slate-700\">\n            <button\n              onClick={() => setShowGraph((p) => ({ ...p, x: !p.x }))}\n              className={`px-2 py-1 text-[10px] font-bold rounded transition-all ${showGraph.x ? \"bg-red-500 text-white\" : \"bg-slate-700 text-slate-400\"}`}\n            >\n              x(t)\n            </button>\n            <button\n              onClick={() => setShowGraph((p) => ({ ...p, v: !p.v }))}\n              className={`px-2 py-1 text-[10px] font-bold rounded transition-all ${showGraph.v ? \"bg-green-500 text-white\" : \"bg-slate-700 text-slate-400\"}`}\n            >\n              v(t)\n            </button>\n            <button\n              onClick={() => setShowGraph((p) => ({ ...p, a: !p.a }))}\n              className={`px-2 py-1 text-[10px] font-bold rounded transition-all ${showGraph.a ? \"bg-blue-500 text-white\" : \"bg-slate-700 text-slate-400\"}`}\n            >\n              a(t)\n            </button>\n          </div>\n\n          <canvas ref={canvasRef} width={800} height={400} className=\"w-full rounded-lg bg-[#0f172a]\" />\n        </div>\n\n        <div className=\"bg-[#1e293b] rounded-xl p-3 border border-slate-700/50 flex flex-wrap items-center justify-center gap-3\">\n          <button\n            onClick={handleReset}\n            className=\"w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 border border-slate-600 text-white flex items-center justify-center transition-all shadow-md active:scale-95\"\n            title=\"Reset về 0\"\n          >\n            <RotateCcw size={16} />\n          </button>\n          \n          <div className=\"w-[1px] h-8 bg-slate-700 mx-1\"></div>\n\n          <button\n            onClick={() => handleSkip(-1)}\n            className=\"w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 border border-slate-600 text-white flex items-center justify-center transition-all shadow-md active:scale-95\"\n            title=\"Lùi nhanh (0.5s)\"\n          >\n            <SkipBack size={16} />\n          </button>\n\n          <button\n            onClick={() => handleMicroStep(-1)}\n            className=\"w-12 h-12 rounded-xl bg-slate-800 hover:bg-slate-700 border border-slate-600 text-cyan-400 flex items-center justify-center transition-all shadow-md active:scale-95 ring-1 ring-slate-700/50\"\n            title=\"Bước lùi (T/80 + Snap)\"\n          >\n            <ChevronLeft size={24} />\n          </button>\n\n          <button\n            onClick={() => setIsPlaying(!isPlaying)}\n            className={`w-14 h-14 rounded-2xl flex items-center justify-center transition-all shadow-lg active:scale-95 border border-transparent mx-2 ${\n              isPlaying\n                ? \"bg-amber-500 hover:bg-amber-400 shadow-amber-900/20\"\n                : \"bg-cyan-500 hover:bg-cyan-400 shadow-cyan-500/30\"\n            } text-white`}\n            title={isPlaying ? \"Dừng\" : \"Chạy\"}\n          >\n            {isPlaying ? (\n              <Pause size={28} fill=\"currentColor\" />\n            ) : (\n              <Play size={28} fill=\"currentColor\" className=\"ml-1\" />\n            )}\n          </button>\n\n          <button\n            onClick={() => handleMicroStep(1)}\n            className=\"w-12 h-12 rounded-xl bg-slate-800 hover:bg-slate-700 border border-slate-600 text-cyan-400 flex items-center justify-center transition-all shadow-md active:scale-95 ring-1 ring-slate-700/50\"\n            title=\"Bước tiến (T/80 + Snap)\"\n          >\n            <ChevronRight size={24} />\n          </button>\n\n          <button\n            onClick={() => handleSkip(1)}\n            className=\"w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 border border-slate-600 text-white flex items-center justify-center transition-all shadow-md active:scale-95\"\n            title=\"Tiến nhanh (0.5s)\"\n          >\n            <SkipForward size={16} />\n          </button>\n        </div>\n      </div>\n\n      {/* Cột phải: Parameters */}\n      <div className=\"space-y-4\">\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50\">\n          <h3 className=\"text-cyan-400 font-semibold mb-4 text-sm\">Thông số dao động</h3>\n          <div className=\"space-y-4\">\n            <div>\n              <div className=\"flex justify-between text-xs mb-1\">\n                <label className=\"text-slate-400\">Biên độ A</label>\n                <span className=\"text-cyan-400 font-mono\">{params.amplitude} cm</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"20\"\n                max=\"150\"\n                value={params.amplitude}\n                onChange={(e) => setParams({ ...params, amplitude: Number(e.target.value) })}\n                className=\"w-full accent-cyan-500 h-2 bg-slate-700 rounded-lg cursor-pointer\"\n              />\n            </div>\n            <div>\n              <div className=\"flex justify-between text-xs mb-1\">\n                <label className=\"text-slate-400\">Tần số f (Chu kỳ T = {(1/params.frequency).toFixed(2)}s)</label>\n                <span className=\"text-cyan-400 font-mono\">{params.frequency} Hz</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"0.1\"\n                max=\"2\"\n                step=\"0.1\"\n                value={params.frequency}\n                onChange={(e) => setParams({ ...params, frequency: Number(e.target.value) })}\n                className=\"w-full accent-cyan-500 h-2 bg-slate-700 rounded-lg cursor-pointer\"\n              />\n            </div>\n            <div>\n              <div className=\"flex justify-between text-xs mb-1\">\n                <label className=\"text-slate-400\">Pha ban đầu φ</label>\n                <span className=\"text-cyan-400 font-mono\">{params.phase.toFixed(2)} rad</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max={Math.PI * 2}\n                step=\"0.1\"\n                value={params.phase}\n                onChange={(e) => setParams({ ...params, phase: Number(e.target.value) })}\n                className=\"w-full accent-cyan-500 h-2 bg-slate-700 rounded-lg cursor-pointer\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Energy Bars */}\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50\">\n          <h3 className=\"text-amber-400 font-semibold mb-3 text-sm flex items-center gap-2\">\n            <Zap size={14} /> Năng lượng\n          </h3>\n          <div className=\"space-y-3\">\n            <div>\n              <div className=\"flex justify-between text-xs mb-1\">\n                <span className=\"text-green-400\">Động năng Wđ</span>\n                <span className=\"text-green-400 font-mono\">{kineticEnergy.toFixed(3)} J</span>\n              </div>\n              <div className=\"h-2 bg-slate-700 rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full bg-green-500 transition-all duration-100\"\n                  style={{ width: `${(kineticEnergy / (kineticEnergy + potentialEnergy || 1)) * 100}%` }}\n                />\n              </div>\n            </div>\n            <div>\n              <div className=\"flex justify-between text-xs mb-1\">\n                <span className=\"text-blue-400\">Thế năng Wt</span>\n                <span className=\"text-blue-400 font-mono\">{potentialEnergy.toFixed(3)} J</span>\n              </div>\n              <div className=\"h-2 bg-slate-700 rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full bg-blue-500 transition-all duration-100\"\n                  style={{ width: `${(potentialEnergy / (kineticEnergy + potentialEnergy || 1)) * 100}%` }}\n                />\n              </div>\n            </div>\n            <div>\n              <div className=\"flex justify-between text-xs mb-1\">\n                <span className=\"text-yellow-400\">Cơ năng W</span>\n                <span className=\"text-yellow-400 font-mono\">{(kineticEnergy + potentialEnergy).toFixed(3)} J</span>\n              </div>\n              <div className=\"h-2 bg-yellow-500/30 rounded-full\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Formulas */}\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50\">\n          <h3 className=\"text-cyan-400 font-semibold mb-2 text-sm\">Công thức</h3>\n          <div className=\"text-xs text-slate-300 space-y-1 font-mono\">\n            <p className=\"flex justify-between\">\n              <span>x = A·cos(ωt + φ)</span> <span className=\"text-red-400\">Li độ</span>\n            </p>\n            <p className=\"flex justify-between\">\n              <span>v = -Aω·sin(ωt + φ)</span> <span className=\"text-green-400\">Vận tốc</span>\n            </p>\n            <p className=\"flex justify-between\">\n              <span>a = -Aω²·cos(ωt + φ)</span> <span className=\"text-blue-400\">Gia tốc</span>\n            </p>\n            <div className=\"w-full h-[1px] bg-slate-700 my-2\"></div>\n            <p>ω = 2πf = {omega.toFixed(2)} rad/s</p>\n            <p>T = 1/f = {(1 / params.frequency).toFixed(2)} s</p>\n             <div className=\"w-full h-[1px] bg-slate-700 my-2\"></div>\n            <p className=\"text-slate-400\">Vị trí đặc biệt:</p>\n            <p>0, ±A/2, ±A/√2, ±A√3/2, ±A</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAHA;;;AAKA,yDAAyD;AACzD,MAAM,qBAAqB;IAAC;IAAG;IAAI;IAAI;IAAI;IAAI;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;CAAI;AACrG,MAAM,qBAAqB,mBAAmB,GAAG,MAAC,CAAC,IAAM,AAAC,IAAI,KAAK,EAAE,GAAI;;AAE1D,SAAS;;IACtB,MAAM,YAAY,IAAA,uKAAM,EAAoB;IAC5C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IAEjC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;QAAE,GAAG;QAAM,GAAG;QAAM,GAAG;IAAK;IAEvE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;QACnC,WAAW;QACX,WAAW;QACX,OAAO;IACT;IAEA,MAAM,eAAe,IAAA,uKAAM;IAC3B,MAAM,UAAU,IAAA,uKAAM,EAAC;IAEvB,MAAM,QAAQ,IAAI,KAAK,EAAE,GAAG,OAAO,SAAS;IAC5C,MAAM,IAAI,IAAI,OAAO,SAAS;IAC9B,MAAM,KAAK;IAEX,MAAM,iBAAiB,IAAA,4KAAW;2DAChC,CAAC;YACC,MAAM,IAAI,OAAO,SAAS,GAAG,KAAK,GAAG,CAAC,QAAQ,IAAI,OAAO,KAAK;YAC9D,MAAM,IAAI,CAAC,OAAO,SAAS,GAAG,QAAQ,KAAK,GAAG,CAAC,QAAQ,IAAI,OAAO,KAAK;YACvE,MAAM,IAAI,CAAC,OAAO,SAAS,GAAG,QAAQ,QAAQ,KAAK,GAAG,CAAC,QAAQ,IAAI,OAAO,KAAK;YAC/E,OAAO;gBAAE;gBAAG;gBAAG;YAAE;QACnB;0DACA;QAAC,OAAO,SAAS;QAAE;QAAO,OAAO,KAAK;KAAC;IAGzC,MAAM,OAAO,IAAA,4KAAW;iDACtB,CAAC,KAA+B;YAC9B,MAAM,QAAQ,IAAI,MAAM,CAAC,KAAK;YAC9B,MAAM,SAAS,IAAI,MAAM,CAAC,MAAM;YAEhC,gBAAgB;YAChB,MAAM,qBAAqB;YAC3B,MAAM,cAAc,qBAAqB,GAAG,wBAAwB;;YACpE,MAAM,aAAa,QAAQ,cAAc;YACzC,MAAM,UAAU,qBAAqB;YACrC,MAAM,UAAU,SAAS;YAEzB,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO;YAE1B,yBAAyB;YAEzB,MAAM,QAAQ,eAAe;YAC7B,MAAM,QAAQ,QAAQ,IAAI,OAAO,KAAK;YACtC,MAAM,SAAS;YAEf,mBAAmB;YACnB,IAAI,WAAW,GAAG;YAClB,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,MAAM,CAAC,SAAS,UAAU,SAAS;YACvC,IAAI,MAAM,CAAC,SAAS,UAAU,SAAS;YACvC,IAAI,MAAM,CAAC,UAAU,SAAS,IAAI;YAClC,IAAI,MAAM,CAAC,UAAU,SAAS,IAAI;YAClC,IAAI,MAAM;YAEV,cAAc;YACd,IAAI,WAAW,GAAG;YAClB,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,GAAG,CAAC,SAAS,SAAS,QAAQ,GAAG,IAAI,KAAK,EAAE;YAChD,IAAI,MAAM;YAEV,SAAS;YACT,MAAM,UAAU,UAAU,SAAS,KAAK,GAAG,CAAC;YAC5C,MAAM,UAAU,UAAU,SAAS,KAAK,GAAG,CAAC;YAE5C,IAAI,WAAW,GAAG;YAClB,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,MAAM,CAAC,SAAS;YACpB,IAAI,MAAM,CAAC,SAAS;YACpB,IAAI,MAAM;YAEV,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,GAAG,CAAC,SAAS,SAAS,GAAG,GAAG,IAAI,KAAK,EAAE;YAC3C,IAAI,IAAI;YAER,wBAAwB;YAExB,MAAM,eAAe;gBAAC,UAAU,CAAC;gBAAE,UAAU,CAAC;gBAAE,UAAU,CAAC;aAAC,CAAC,MAAM,CAAC,SAAS,MAAM;YACnF,MAAM,cAAc,eAAe,IAAI,CAAC,SAAS,EAAE,IAAI,eAAe;YAEtE,IAAI,oBAAoB;YAExB,+BAA+B;YAC/B,MAAM,aAAa,MAAM,EAAE,8BAA8B;;YAEzD,MAAM;uEAAgB,CACpB,MACA,OACA,UACA,UACA,OACA;oBAEA,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE;oBAEtB,MAAM,QAAQ,KAAK,oBAAoB;oBACvC,MAAM,cAAc,QAAQ,cAAc;oBAE1C,iBAAiB;oBACjB,IAAI,WAAW,GAAG;oBAClB,IAAI,SAAS,GAAG;oBAChB,IAAI,SAAS;oBACb,IAAI,MAAM,CAAC,aAAa;oBACxB,IAAI,MAAM,CAAC,cAAc,YAAY;oBACrC,IAAI,MAAM;oBAEV,iCAAiC;oBACjC,IAAI,SAAS,GAAG;oBAChB,IAAI,IAAI,GAAG;oBACX,IAAI,SAAS,GAAG;oBAChB,aAAa;oBACb,IAAI,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS,OAAO,CAAC,IAAI,EAAE,cAAc,GAAG,QAAQ;oBACjE,gBAAgB;oBAChB,IAAI,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS,OAAO,CAAC,IAAI,EAAE,cAAc,GAAG,QAAQ,cAAc;oBAC/E,OAAO;oBACP,4BAA4B;oBAC5B,sDAAsD;oBAEtD,sBAAsB;oBACtB,oDAAoD;oBACpD,mDAAmD;oBAEnD,MAAM,WAAW,IAAI;oBACrB,iDAAiD;oBACjD,MAAM,OAAO;oBACb,MAAM,SAAS,IAAI;oBAEnB,MAAM,SAAS,KAAK,IAAI,CAAC,SAAS;oBAClC,MAAM,OAAO,KAAK,KAAK,CAAC,OAAO;oBAE/B,IAAI,SAAS,GAAG;oBAChB,IAAI,IAAI,GAAG;oBAEX,IAAK,IAAI,IAAI,QAAQ,KAAK,MAAM,IAAK;wBACjC,IAAI,IAAI,GAAG,UAAS,2BAA2B;wBAC/C,MAAM,QAAQ,IAAI;wBAClB,yBAAyB;wBACzB,4EAA4E;wBAC5E,MAAM,OAAO,cAAc,aAAa,AAAC,CAAC,OAAO,KAAK,IAAI,aAAc;wBAExE,YAAY;wBACZ,IAAI,WAAW,GAAG;wBAClB,IAAI,SAAS,GAAG;wBAChB,IAAI,WAAW,CAAC;4BAAC;4BAAG;yBAAE;wBACtB,IAAI,SAAS;wBACb,IAAI,MAAM,CAAC,MAAM;wBACjB,IAAI,MAAM,CAAC,MAAM,QAAQ;wBACzB,IAAI,MAAM;wBACV,IAAI,WAAW,CAAC,EAAE;wBAElB,oEAAoE;wBACpE,IAAI,OAAO,cAAc,MAAM,OAAO,cAAc,aAAa,IAAI;4BACjE,IAAI,SAAS,GAAG;4BAChB,IAAI,YAAY;4BAChB,IAAI,MAAM,GAAG,YAAY;iCACpB,IAAI,IAAI,MAAM,GAAG,YAAY,GAAG,IAAE,EAAE,CAAC,CAAC;iCACtC,IAAI,IAAI,MAAM,GAAG,YAAY,GAAG,IAAE,EAAE,GAAG,CAAC;iCACxC,YAAY,GAAG,EAAE,GAAG,CAAC;4BAE1B,uCAAuC;4BACvC,IAAI,QAAQ,CAAC,WAAW,MAAM,QAAQ,cAAc;wBACxD;oBACJ;oBAEA,aAAa;oBACb,IAAI,WAAW,GAAG;oBAClB,IAAI,SAAS,GAAG;oBAChB,IAAI,SAAS;oBAEb,2CAA2C;oBAC3C,MAAM,OAAO;oBACb,IAAI,UAAU;oBAEd,IAAK,IAAI,IAAI,GAAG,KAAK,YAAY,KAAK,KAAM;wBACxC,mCAAmC;wBACnC,2CAA2C;wBAC3C,MAAM,QAAQ,SAAS,AAAC,IAAI,aAAc;wBAE1C,IAAI,QAAQ,GAAG,UAAS,2BAA2B;wBAEnD,MAAM,MAAM,SAAS;wBACrB,MAAM,QAAQ,AAAC,cAAc,IAAK;wBAClC,MAAM,IAAI,cAAc,AAAC,MAAM,WAAY;wBAE3C,IAAI,CAAC,SAAS;4BACV,IAAI,MAAM,CAAC,cAAc,GAAG;4BAC5B,UAAU;wBACd,OAAO;4BACH,IAAI,MAAM,CAAC,cAAc,GAAG;wBAChC;oBACJ;oBACA,IAAI,MAAM;oBAEV,yCAAyC;oBACzC,MAAM,aAAa,SAAS;oBAC5B,MAAM,WAAW,cAAc,AAAC,aAAa,WAAY,CAAC,AAAC,cAAc,IAAK,GAAG;oBAEjF,IAAI,SAAS,GAAG;oBAChB,IAAI,SAAS;oBACb,IAAI,GAAG,CAAC,cAAc,YAAY,UAAU,GAAG,GAAG,IAAI,KAAK,EAAE;oBAC7D,IAAI,IAAI;oBAER,mBAAmB;oBACnB,IAAI,IAAI,GAAG;oBACX,IAAI,SAAS,GAAG;oBAChB,IAAI,SAAS,GAAG;oBAChB,IAAI,QAAQ,CAAC,GAAG,OAAO,EAAE,cAAc,IAAI,QAAQ;oBAEnD,qBAAqB;oBACrB,IAAI,SAAS,GAAG;oBAChB,IAAI,QAAQ,CAAC,GAAG,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,cAAc,aAAa,IAAI,QAAQ;oBAEzF;gBACF;;YAEA,kBAAkB;YAClB,cAAc,KAAK;yDACjB,CAAC,KAAO,OAAO,SAAS,GAAG,KAAK,GAAG,CAAC,QAAQ,KAAK,OAAO,KAAK;wDAC7D,OAAO,SAAS,EAChB,gBACA;YAGF,oBAAoB;YACpB,cAAc,KAAK;yDACjB,CAAC,KAAO,CAAC,OAAO,SAAS,GAAG,QAAQ,KAAK,GAAG,CAAC,QAAQ,KAAK,OAAO,KAAK;wDACtE,OAAO,SAAS,GAAG,OACnB,oBACA;YAGF,mBAAmB;YACnB,cAAc,KAAK;yDACjB,CAAC,KAAO,CAAC,OAAO,SAAS,GAAG,QAAQ,QAAQ,KAAK,GAAG,CAAC,QAAQ,KAAK,OAAO,KAAK;wDAC9E,OAAO,SAAS,GAAG,QAAQ,OAC3B,qBACA;YAGF,SAAS;YACT,IAAI,SAAS,GAAG;YAChB,IAAI,IAAI,GAAG;YACX,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,wBAAwB,SAAS,SAAS;YAEvD,yBAAyB;YACzB,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,IAAI,IAAI,KAAK;YAC1B,IAAI,WAAW,GAAG;YAClB,IAAI,UAAU,CAAC,IAAI,IAAI,KAAK;YAC5B,IAAI,SAAS,GAAG;YAChB,IAAI,IAAI,GAAG;YACX,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI;YAEzC,SAAS;YACT,IAAI,SAAS,GAAG;YAChB,IAAI,IAAI,GAAG;YACX,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,sBAAsB,QAAQ,IAAI,SAAS;YACxD,IAAI,SAAS,GAAG;QAClB;gDACA;QAAC,OAAO,SAAS;QAAE,OAAO,KAAK;QAAE;QAAO;QAAgB;QAAW;KAAE;IAGvE,MAAM,UAAU,IAAA,4KAAW;oDAAC;YAC1B,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,CAAC,QAAQ;YACb,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,CAAC,KAAK;YAEV,QAAQ,OAAO,IAAI;YACnB,yBAAyB;YACzB,QAAQ,QAAQ,OAAO;YACvB,KAAK,KAAK,QAAQ,OAAO;YAEzB,IAAI,WAAW;gBACb,aAAa,OAAO,GAAG,sBAAsB;YAC/C;QACF;mDAAG;QAAC;QAAW;KAAK;IAEpB,IAAA,0KAAS;yCAAC;YACR,IAAI,WAAW;gBACb,aAAa,OAAO,GAAG,sBAAsB;YAC/C;YACA;iDAAO;oBACL,IAAI,aAAa,OAAO,EAAE,qBAAqB,aAAa,OAAO;gBACrE;;QACF;wCAAG;QAAC;QAAW;KAAQ;IAEvB,IAAA,0KAAS;yCAAC;YACR,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,CAAC,QAAQ;YACb,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,CAAC,KAAK;YACV,KAAK,KAAK,QAAQ,OAAO;QAC3B;wCAAG;QAAC;QAAQ;QAAM;KAAU;IAE5B,MAAM,qBAAqB,CAAC;QAC1B,aAAa;QACb,yBAAyB;QACzB,QAAQ,OAAO,GAAG,KAAK,GAAG,CAAC,GAAG;QAC9B,QAAQ,QAAQ,OAAO;QACvB,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QACb,MAAM,MAAM,OAAO,UAAU,CAAC;QAC9B,IAAI,CAAC,KAAK;QACV,KAAK,KAAK,QAAQ,OAAO;IAC3B;IAEA,qBAAqB;IACrB,MAAM,aAAa,CAAC;QAClB,mBAAmB,QAAQ,OAAO,GAAG,YAAY,MAAK,YAAY;IACpE;IAEA,MAAM,cAAc;QAClB,mBAAmB;IACrB;IAEA,8DAA8D;IAC9D,MAAM,kBAAkB,CAAC;QACvB,MAAM,WAAW,IAAI;QACrB,8EAA8E;QAC9E,MAAM,UAAU;QAEhB,MAAM,oBAAoB,QAAQ,QAAQ,OAAO,GAAG,OAAO,KAAK;QAChE,uCAAuC;QACvC,MAAM,mBAAmB,oBAAoB,CAAC,IAAI,KAAK,EAAE;QACzD,gCAAgC;QAChC,MAAM,kBAAkB,mBAAmB,IAAI,mBAAmB,IAAI,KAAK,EAAE,GAAG;QAEhF,IAAI,aAAa,QAAQ,OAAO,GAAG,YAAY;QAC/C,IAAI,UAAU;QAEd,wBAAwB;QACxB,MAAM,YAAY,AAAC,IAAI,KAAK,EAAE,GAAI;QAElC,IAAI,YAAY,GAAG;YACf,iBAAiB;YACjB,IAAI,cAAc,mBAAmB,IAAI,CAAC,CAAA,IAAK,IAAI,kBAAkB;YACrE,IAAI,WAAW;YAEf,IAAI,gBAAgB,WAAW;gBAC3B,WAAW,cAAc;YAC7B,OAAO;gBACH,cAAc;gBACd,cAAc,kBAAkB,CAAC,EAAE,GAAG,IAAI,KAAK,EAAE;gBACjD,WAAW,cAAc;YAC7B;YAEA,kGAAkG;YAClG,IAAI,YAAY,YAAY,SAAS;gBACjC,aAAa,QAAQ,OAAO,GAAG,WAAW;gBAC1C,UAAU;YACd;QACJ,OAAO;YACH,kBAAkB;YAClB,MAAM,WAAW;mBAAI;aAAmB,CAAC,OAAO;YAChD,IAAI,cAAc,SAAS,IAAI,CAAC,CAAA,IAAK,IAAI,kBAAkB;YAC3D,IAAI,WAAW;YAEf,IAAI,gBAAgB,WAAW;gBAC3B,WAAW,kBAAkB;YACjC,OAAO;gBACF,uBAAuB;gBACvB,cAAc,kBAAkB,CAAC,mBAAmB,MAAM,GAAG,EAAE,GAAG,IAAI,KAAK,EAAE;gBAC7E,WAAW,kBAAkB;YAClC;YAEA,IAAI,YAAY,YAAY,SAAS;gBAChC,aAAa,QAAQ,OAAO,GAAG,WAAW;gBAC1C,UAAU;YACf;QACJ;QAEA,mBAAmB;IACrB;IAEA,MAAM,QAAQ,eAAe;IAC7B,MAAM,gBAAgB,AAAC,MAAM,MAAM,CAAC,GAAG,MAAM,CAAC,GAAI;IAClD,MAAM,kBAAkB,AAAC,MAAM,QAAQ,QAAQ,MAAM,CAAC,GAAG,MAAM,CAAC,GAAI;IAEpE,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAS,IAAM,aAAa,CAAC,IAAM,CAAC;oDAAE,GAAG,CAAC;oDAAE,GAAG,CAAC,EAAE,CAAC;gDAAC,CAAC;wCACrD,WAAW,CAAC,uDAAuD,EAAE,UAAU,CAAC,GAAG,0BAA0B,+BAA+B;kDAC7I;;;;;;kDAGD,6LAAC;wCACC,SAAS,IAAM,aAAa,CAAC,IAAM,CAAC;oDAAE,GAAG,CAAC;oDAAE,GAAG,CAAC,EAAE,CAAC;gDAAC,CAAC;wCACrD,WAAW,CAAC,uDAAuD,EAAE,UAAU,CAAC,GAAG,4BAA4B,+BAA+B;kDAC/I;;;;;;kDAGD,6LAAC;wCACC,SAAS,IAAM,aAAa,CAAC,IAAM,CAAC;oDAAE,GAAG,CAAC;oDAAE,GAAG,CAAC,EAAE,CAAC;gDAAC,CAAC;wCACrD,WAAW,CAAC,uDAAuD,EAAE,UAAU,CAAC,GAAG,2BAA2B,+BAA+B;kDAC9I;;;;;;;;;;;;0CAKH,6LAAC;gCAAO,KAAK;gCAAW,OAAO;gCAAK,QAAQ;gCAAK,WAAU;;;;;;;;;;;;kCAG7D,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAS;gCACT,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,gOAAS;oCAAC,MAAM;;;;;;;;;;;0CAGnB,6LAAC;gCAAI,WAAU;;;;;;0CAEf,6LAAC;gCACC,SAAS,IAAM,WAAW,CAAC;gCAC3B,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,6NAAQ;oCAAC,MAAM;;;;;;;;;;;0CAGlB,6LAAC;gCACC,SAAS,IAAM,gBAAgB,CAAC;gCAChC,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,sOAAW;oCAAC,MAAM;;;;;;;;;;;0CAGrB,6LAAC;gCACC,SAAS,IAAM,aAAa,CAAC;gCAC7B,WAAW,CAAC,+HAA+H,EACzI,YACI,wDACA,mDACL,WAAW,CAAC;gCACb,OAAO,YAAY,SAAS;0CAE3B,0BACC,6LAAC,gNAAK;oCAAC,MAAM;oCAAI,MAAK;;;;;yDAEtB,6LAAC,6MAAI;oCAAC,MAAM;oCAAI,MAAK;oCAAe,WAAU;;;;;;;;;;;0CAIlD,6LAAC;gCACC,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,yOAAY;oCAAC,MAAM;;;;;;;;;;;0CAGtB,6LAAC;gCACC,SAAS,IAAM,WAAW;gCAC1B,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,sOAAW;oCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;0BAMzB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA2C;;;;;;0CACzD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAM,WAAU;kEAAiB;;;;;;kEAClC,6LAAC;wDAAK,WAAU;;4DAA2B,OAAO,SAAS;4DAAC;;;;;;;;;;;;;0DAE9D,6LAAC;gDACC,MAAK;gDACL,KAAI;gDACJ,KAAI;gDACJ,OAAO,OAAO,SAAS;gDACvB,UAAU,CAAC,IAAM,UAAU;wDAAE,GAAG,MAAM;wDAAE,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAE;gDAC1E,WAAU;;;;;;;;;;;;kDAGd,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAM,WAAU;;4DAAiB;4DAAsB,CAAC,IAAE,OAAO,SAAS,EAAE,OAAO,CAAC;4DAAG;;;;;;;kEACxF,6LAAC;wDAAK,WAAU;;4DAA2B,OAAO,SAAS;4DAAC;;;;;;;;;;;;;0DAE9D,6LAAC;gDACC,MAAK;gDACL,KAAI;gDACJ,KAAI;gDACJ,MAAK;gDACL,OAAO,OAAO,SAAS;gDACvB,UAAU,CAAC,IAAM,UAAU;wDAAE,GAAG,MAAM;wDAAE,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAE;gDAC1E,WAAU;;;;;;;;;;;;kDAGd,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAM,WAAU;kEAAiB;;;;;;kEAClC,6LAAC;wDAAK,WAAU;;4DAA2B,OAAO,KAAK,CAAC,OAAO,CAAC;4DAAG;;;;;;;;;;;;;0DAErE,6LAAC;gDACC,MAAK;gDACL,KAAI;gDACJ,KAAK,KAAK,EAAE,GAAG;gDACf,MAAK;gDACL,OAAO,OAAO,KAAK;gDACnB,UAAU,CAAC,IAAM,UAAU;wDAAE,GAAG,MAAM;wDAAE,OAAO,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAE;gDACtE,WAAU;;;;;;;;;;;;;;;;;;;;;;;;kCAOlB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;;kDACZ,6LAAC,0MAAG;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAEnB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAK,WAAU;kEAAiB;;;;;;kEACjC,6LAAC;wDAAK,WAAU;;4DAA4B,cAAc,OAAO,CAAC;4DAAG;;;;;;;;;;;;;0DAEvE,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDACC,WAAU;oDACV,OAAO;wDAAE,OAAO,GAAG,AAAC,gBAAgB,CAAC,gBAAgB,mBAAmB,CAAC,IAAK,IAAI,CAAC,CAAC;oDAAC;;;;;;;;;;;;;;;;;kDAI3F,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,6LAAC;wDAAK,WAAU;;4DAA2B,gBAAgB,OAAO,CAAC;4DAAG;;;;;;;;;;;;;0DAExE,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDACC,WAAU;oDACV,OAAO;wDAAE,OAAO,GAAG,AAAC,kBAAkB,CAAC,gBAAgB,mBAAmB,CAAC,IAAK,IAAI,CAAC,CAAC;oDAAC;;;;;;;;;;;;;;;;;kDAI7F,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAK,WAAU;kEAAkB;;;;;;kEAClC,6LAAC;wDAAK,WAAU;;4DAA6B,CAAC,gBAAgB,eAAe,EAAE,OAAO,CAAC;4DAAG;;;;;;;;;;;;;0DAE5F,6LAAC;gDAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;kCAMrB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA2C;;;;;;0CACzD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;;0DACX,6LAAC;0DAAK;;;;;;4CAAwB;0DAAC,6LAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAEhE,6LAAC;wCAAE,WAAU;;0DACX,6LAAC;0DAAK;;;;;;4CAA0B;0DAAC,6LAAC;gDAAK,WAAU;0DAAiB;;;;;;;;;;;;kDAEpE,6LAAC;wCAAE,WAAU;;0DACX,6LAAC;0DAAK;;;;;;4CAA2B;0DAAC,6LAAC;gDAAK,WAAU;0DAAgB;;;;;;;;;;;;kDAEpE,6LAAC;wCAAI,WAAU;;;;;;kDACf,6LAAC;;4CAAE;4CAAW,MAAM,OAAO,CAAC;4CAAG;;;;;;;kDAC/B,6LAAC;;4CAAE;4CAAW,CAAC,IAAI,OAAO,SAAS,EAAE,OAAO,CAAC;4CAAG;;;;;;;kDAC/C,6LAAC;wCAAI,WAAU;;;;;;kDAChB,6LAAC;wCAAE,WAAU;kDAAiB;;;;;;kDAC9B,6LAAC;kDAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMf;GArlBwB;MAAA"}},
    {"offset": {"line": 5055, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/experiments/mechanical-waves.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRef, useEffect, useState, useCallback } from \"react\"\nimport { Play, Pause, RotateCcw, SkipForward, SkipBack } from \"lucide-react\"\n\nconst MAX_TIME = 20\n\nexport default function MechanicalWaves() {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [time, setTime] = useState(0)\n  const [waveType, setWaveType] = useState<\"transverse\" | \"longitudinal\">(\"transverse\")\n  const [params, setParams] = useState({\n    amplitude: 40,\n    wavelength: 150,\n    frequency: 0.5,\n  })\n\n  const animationRef = useRef<number>()\n  const timeRef = useRef(0)\n\n  const omega = 2 * Math.PI * params.frequency\n  const k = (2 * Math.PI) / params.wavelength\n  const velocity = params.frequency * params.wavelength\n  const dt = 0.016\n  const numParticles = 40\n\n  const draw = useCallback(\n    (ctx: CanvasRenderingContext2D, t: number) => {\n      const width = ctx.canvas.width\n      const height = ctx.canvas.height\n\n      ctx.fillStyle = \"#0f172a\"\n      ctx.fillRect(0, 0, width, height)\n\n      // Grid\n      ctx.strokeStyle = \"#1e293b\"\n      ctx.lineWidth = 0.5\n      for (let i = 0; i < width; i += 40) {\n        ctx.beginPath()\n        ctx.moveTo(i, 0)\n        ctx.lineTo(i, height)\n        ctx.stroke()\n      }\n      for (let i = 0; i < height; i += 40) {\n        ctx.beginPath()\n        ctx.moveTo(0, i)\n        ctx.lineTo(width, i)\n        ctx.stroke()\n      }\n\n      const centerY = height / 2\n      const startX = 50\n      const spacing = (width - 100) / numParticles\n\n      if (waveType === \"transverse\") {\n        ctx.strokeStyle = \"#4ade80\"\n        ctx.setLineDash([5, 5])\n        ctx.beginPath()\n        ctx.moveTo(startX, centerY)\n        ctx.lineTo(width - 50, centerY)\n        ctx.stroke()\n        ctx.setLineDash([])\n\n        ctx.strokeStyle = \"#22d3ee\"\n        ctx.lineWidth = 2\n        ctx.beginPath()\n        for (let x = startX; x < width - 50; x++) {\n          const y = centerY - params.amplitude * Math.sin(k * (x - startX) - omega * t)\n          if (x === startX) ctx.moveTo(x, y)\n          else ctx.lineTo(x, y)\n        }\n        ctx.stroke()\n\n        for (let i = 0; i < numParticles; i++) {\n          const x = startX + i * spacing\n          const displacement = params.amplitude * Math.sin(k * (x - startX) - omega * t)\n          const y = centerY - displacement\n          const vy = -params.amplitude * omega * Math.cos(k * (x - startX) - omega * t)\n\n          ctx.fillStyle = \"#3b82f6\"\n          ctx.beginPath()\n          ctx.arc(x, y, 6, 0, 2 * Math.PI)\n          ctx.fill()\n\n          if (Math.abs(vy) > 1) {\n            ctx.strokeStyle = \"#22c55e\"\n            ctx.lineWidth = 2\n            ctx.beginPath()\n            ctx.moveTo(x, y)\n            ctx.lineTo(x, y + vy * 0.3)\n            ctx.stroke()\n          }\n\n          ctx.fillStyle = \"rgba(74, 222, 128, 0.3)\"\n          ctx.beginPath()\n          ctx.arc(x, centerY, 3, 0, 2 * Math.PI)\n          ctx.fill()\n        }\n\n        ctx.fillStyle = \"#f97316\"\n        ctx.font = \"14px sans-serif\"\n        ctx.fillText(\"→ Hướng truyền sóng\", width / 2 - 60, 40)\n        ctx.fillText(\"↕ Hướng dao động\", width / 2 - 60, 60)\n      } else {\n        ctx.strokeStyle = \"#4ade80\"\n        ctx.setLineDash([5, 5])\n        ctx.beginPath()\n        ctx.moveTo(startX, centerY)\n        ctx.lineTo(width - 50, centerY)\n        ctx.stroke()\n        ctx.setLineDash([])\n\n        for (let i = 0; i < numParticles; i++) {\n          const baseX = startX + i * spacing\n          const displacement = params.amplitude * 0.5 * Math.sin(k * (baseX - startX) - omega * t)\n          const x = baseX + displacement\n          const vx = params.amplitude * 0.5 * omega * Math.cos(k * (baseX - startX) - omega * t)\n\n          const density = Math.cos(k * (baseX - startX) - omega * t)\n          const alpha = 0.5 + 0.5 * Math.abs(density)\n          ctx.fillStyle = density > 0 ? `rgba(239, 68, 68, ${alpha})` : `rgba(59, 130, 246, ${alpha})`\n\n          ctx.beginPath()\n          ctx.arc(x, centerY, 8, 0, 2 * Math.PI)\n          ctx.fill()\n\n          if (Math.abs(vx) > 1) {\n            ctx.strokeStyle = \"#22c55e\"\n            ctx.lineWidth = 2\n            ctx.beginPath()\n            ctx.moveTo(x, centerY)\n            ctx.lineTo(x + vx * 0.3, centerY)\n            ctx.stroke()\n          }\n\n          ctx.fillStyle = \"rgba(74, 222, 128, 0.3)\"\n          ctx.beginPath()\n          ctx.arc(baseX, centerY + 40, 3, 0, 2 * Math.PI)\n          ctx.fill()\n        }\n\n        ctx.fillStyle = \"#ef4444\"\n        ctx.font = \"12px monospace\"\n        ctx.fillText(\"Nén\", width / 2 - 100, centerY - 50)\n        ctx.fillStyle = \"#3b82f6\"\n        ctx.fillText(\"Dãn\", width / 2 + 50, centerY - 50)\n\n        ctx.fillStyle = \"#f97316\"\n        ctx.font = \"14px sans-serif\"\n        ctx.fillText(\"→ Hướng truyền sóng\", width / 2 - 60, 40)\n        ctx.fillText(\"↔ Hướng dao động\", width / 2 - 60, 60)\n      }\n\n      // Info panel\n      ctx.fillStyle = \"rgba(15, 23, 42, 0.8)\"\n      ctx.fillRect(10, height - 100, 180, 90)\n      ctx.strokeStyle = \"rgba(56, 189, 248, 0.3)\"\n      ctx.strokeRect(10, height - 100, 180, 90)\n\n      ctx.fillStyle = \"#4ade80\"\n      ctx.font = \"13px monospace\"\n      ctx.fillText(`t = ${t.toFixed(2)} s`, 20, height - 80)\n      ctx.fillText(`λ = ${params.wavelength} px`, 20, height - 60)\n      ctx.fillText(`f = ${params.frequency} Hz`, 20, height - 40)\n      ctx.fillText(`v = ${velocity.toFixed(0)} px/s`, 20, height - 20)\n\n      ctx.fillStyle = \"rgba(255, 255, 255, 0.15)\"\n      ctx.font = \"12px monospace\"\n      ctx.textAlign = \"right\"\n      ctx.fillText(\"Hô Hoàng Anh A1K50\", width - 15, height - 15)\n      ctx.textAlign = \"left\"\n    },\n    [waveType, params.amplitude, params.wavelength, params.frequency, omega, k, velocity],\n  )\n\n  const animate = useCallback(() => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n\n    timeRef.current += dt\n    if (timeRef.current > MAX_TIME) timeRef.current = MAX_TIME\n    setTime(timeRef.current)\n    draw(ctx, timeRef.current)\n\n    if (isPlaying && timeRef.current < MAX_TIME) {\n      animationRef.current = requestAnimationFrame(animate)\n    } else if (timeRef.current >= MAX_TIME) {\n      setIsPlaying(false)\n    }\n  }, [isPlaying, draw])\n\n  useEffect(() => {\n    if (isPlaying) {\n      animationRef.current = requestAnimationFrame(animate)\n    }\n    return () => {\n      if (animationRef.current) cancelAnimationFrame(animationRef.current)\n    }\n  }, [isPlaying, animate])\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n    draw(ctx, timeRef.current)\n  }, [params, waveType, draw])\n\n  const handleStep = (direction: number) => {\n    setIsPlaying(false)\n    timeRef.current = Math.max(0, Math.min(MAX_TIME, timeRef.current + dt * direction * 10))\n    setTime(timeRef.current)\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n    draw(ctx, timeRef.current)\n  }\n\n  const handleReset = () => {\n    setIsPlaying(false)\n    timeRef.current = 0\n    setTime(0)\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n    draw(ctx, 0)\n  }\n\n  const handleTimelineChange = (newTime: number) => {\n    setIsPlaying(false)\n    timeRef.current = newTime\n    setTime(newTime)\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n    draw(ctx, newTime)\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n      <div className=\"lg:col-span-2 space-y-4\">\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50\">\n          <canvas ref={canvasRef} width={800} height={400} className=\"w-full rounded-lg bg-[#0f172a]\" />\n        </div>\n\n        <div className=\"bg-[#1e293b] rounded-xl p-3 border border-slate-700/50 flex items-center gap-3\">\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={handleReset}\n              className=\"w-12 h-12 rounded-xl bg-slate-700 hover:bg-slate-600 border border-slate-600 text-white flex items-center justify-center transition-all shadow-md active:scale-95\"\n              title=\"Reset\"\n            >\n              <RotateCcw size={20} />\n            </button>\n            <button\n              onClick={() => handleStep(-1)}\n              className=\"w-12 h-12 rounded-xl bg-slate-700 hover:bg-slate-600 border border-slate-600 text-white flex items-center justify-center transition-all shadow-md active:scale-95\"\n              title=\"Lùi\"\n            >\n              <SkipBack size={20} />\n            </button>\n            <button\n              onClick={() => setIsPlaying(!isPlaying)}\n              className={`w-14 h-14 rounded-2xl flex items-center justify-center transition-all shadow-lg active:scale-95 border border-transparent ${\n                isPlaying\n                  ? \"bg-amber-500 hover:bg-amber-400 shadow-amber-900/20\"\n                  : \"bg-cyan-500 hover:bg-cyan-400 shadow-cyan-500/30\"\n              } text-white`}\n              title={isPlaying ? \"Dừng\" : \"Chạy\"}\n            >\n              {isPlaying ? (\n                <Pause size={28} fill=\"currentColor\" />\n              ) : (\n                <Play size={28} fill=\"currentColor\" className=\"ml-1\" />\n              )}\n            </button>\n            <button\n              onClick={() => handleStep(1)}\n              className=\"w-12 h-12 rounded-xl bg-slate-700 hover:bg-slate-600 border border-slate-600 text-white flex items-center justify-center transition-all shadow-md active:scale-95\"\n              title=\"Tiến\"\n            >\n              <SkipForward size={20} />\n            </button>\n          </div>\n\n          <span className=\"text-xs text-slate-400 font-mono w-8\">0s</span>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max={MAX_TIME}\n            step=\"0.01\"\n            value={time}\n            onChange={(e) => handleTimelineChange(Number(e.target.value))}\n            className=\"flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500\"\n          />\n          <span className=\"text-xs text-slate-400 font-mono w-10 text-right\">{MAX_TIME}s</span>\n        </div>\n      </div>\n\n      <div className=\"space-y-4\">\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50\">\n          <h3 className=\"text-cyan-400 font-semibold mb-3 text-sm\">Loại sóng</h3>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setWaveType(\"transverse\")}\n              className={`flex-1 py-3 px-4 rounded-lg text-sm font-semibold transition-all border ${\n                waveType === \"transverse\"\n                  ? \"bg-cyan-600 border-cyan-500 text-white shadow\"\n                  : \"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700\"\n              }`}\n            >\n              Sóng ngang\n            </button>\n            <button\n              onClick={() => setWaveType(\"longitudinal\")}\n              className={`flex-1 py-3 px-4 rounded-lg text-sm font-semibold transition-all border ${\n                waveType === \"longitudinal\"\n                  ? \"bg-cyan-600 border-cyan-500 text-white shadow\"\n                  : \"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700\"\n              }`}\n            >\n              Sóng dọc\n            </button>\n          </div>\n        </div>\n\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50\">\n          <h3 className=\"text-cyan-400 font-semibold mb-4 text-sm\">Thông số sóng</h3>\n          <div className=\"space-y-4\">\n            <div>\n              <div className=\"flex justify-between text-xs mb-1\">\n                <label className=\"text-slate-400\">Biên độ A</label>\n                <span className=\"text-cyan-400 font-mono\">{params.amplitude} px</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"10\"\n                max=\"80\"\n                value={params.amplitude}\n                onChange={(e) => setParams({ ...params, amplitude: Number(e.target.value) })}\n                className=\"w-full accent-cyan-500 h-2 bg-slate-700 rounded-lg cursor-pointer\"\n              />\n            </div>\n            <div>\n              <div className=\"flex justify-between text-xs mb-1\">\n                <label className=\"text-slate-400\">Bước sóng λ</label>\n                <span className=\"text-cyan-400 font-mono\">{params.wavelength} px</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"50\"\n                max=\"300\"\n                value={params.wavelength}\n                onChange={(e) => setParams({ ...params, wavelength: Number(e.target.value) })}\n                className=\"w-full accent-cyan-500 h-2 bg-slate-700 rounded-lg cursor-pointer\"\n              />\n            </div>\n            <div>\n              <div className=\"flex justify-between text-xs mb-1\">\n                <label className=\"text-slate-400\">Tần số f</label>\n                <span className=\"text-cyan-400 font-mono\">{params.frequency} Hz</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"0.1\"\n                max=\"2\"\n                step=\"0.1\"\n                value={params.frequency}\n                onChange={(e) => setParams({ ...params, frequency: Number(e.target.value) })}\n                className=\"w-full accent-cyan-500 h-2 bg-slate-700 rounded-lg cursor-pointer\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50\">\n          <h3 className=\"text-cyan-400 font-semibold mb-2 text-sm\">Công thức</h3>\n          <div className=\"text-xs text-slate-300 space-y-1 font-mono\">\n            <p>y = A·sin(kx - ωt)</p>\n            <p>v = λf = {velocity.toFixed(0)} px/s</p>\n            <p>k = 2π/λ = {k.toFixed(3)} rad/px</p>\n            <p>ω = 2πf = {omega.toFixed(2)} rad/s</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;;;AAHA;;;AAKA,MAAM,WAAW;AAEF,SAAS;;IACtB,MAAM,YAAY,IAAA,uKAAM,EAAoB;IAC5C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgC;IACxE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;QACnC,WAAW;QACX,YAAY;QACZ,WAAW;IACb;IAEA,MAAM,eAAe,IAAA,uKAAM;IAC3B,MAAM,UAAU,IAAA,uKAAM,EAAC;IAEvB,MAAM,QAAQ,IAAI,KAAK,EAAE,GAAG,OAAO,SAAS;IAC5C,MAAM,IAAI,AAAC,IAAI,KAAK,EAAE,GAAI,OAAO,UAAU;IAC3C,MAAM,WAAW,OAAO,SAAS,GAAG,OAAO,UAAU;IACrD,MAAM,KAAK;IACX,MAAM,eAAe;IAErB,MAAM,OAAO,IAAA,4KAAW;6CACtB,CAAC,KAA+B;YAC9B,MAAM,QAAQ,IAAI,MAAM,CAAC,KAAK;YAC9B,MAAM,SAAS,IAAI,MAAM,CAAC,MAAM;YAEhC,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO;YAE1B,OAAO;YACP,IAAI,WAAW,GAAG;YAClB,IAAI,SAAS,GAAG;YAChB,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,KAAK,GAAI;gBAClC,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,GAAG;gBACd,IAAI,MAAM,CAAC,GAAG;gBACd,IAAI,MAAM;YACZ;YACA,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAI;gBACnC,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,GAAG;gBACd,IAAI,MAAM,CAAC,OAAO;gBAClB,IAAI,MAAM;YACZ;YAEA,MAAM,UAAU,SAAS;YACzB,MAAM,SAAS;YACf,MAAM,UAAU,CAAC,QAAQ,GAAG,IAAI;YAEhC,IAAI,aAAa,cAAc;gBAC7B,IAAI,WAAW,GAAG;gBAClB,IAAI,WAAW,CAAC;oBAAC;oBAAG;iBAAE;gBACtB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,QAAQ;gBACnB,IAAI,MAAM,CAAC,QAAQ,IAAI;gBACvB,IAAI,MAAM;gBACV,IAAI,WAAW,CAAC,EAAE;gBAElB,IAAI,WAAW,GAAG;gBAClB,IAAI,SAAS,GAAG;gBAChB,IAAI,SAAS;gBACb,IAAK,IAAI,IAAI,QAAQ,IAAI,QAAQ,IAAI,IAAK;oBACxC,MAAM,IAAI,UAAU,OAAO,SAAS,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,IAAI,QAAQ;oBAC3E,IAAI,MAAM,QAAQ,IAAI,MAAM,CAAC,GAAG;yBAC3B,IAAI,MAAM,CAAC,GAAG;gBACrB;gBACA,IAAI,MAAM;gBAEV,IAAK,IAAI,IAAI,GAAG,IAAI,cAAc,IAAK;oBACrC,MAAM,IAAI,SAAS,IAAI;oBACvB,MAAM,eAAe,OAAO,SAAS,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,IAAI,QAAQ;oBAC5E,MAAM,IAAI,UAAU;oBACpB,MAAM,KAAK,CAAC,OAAO,SAAS,GAAG,QAAQ,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,IAAI,QAAQ;oBAE3E,IAAI,SAAS,GAAG;oBAChB,IAAI,SAAS;oBACb,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,KAAK,EAAE;oBAC/B,IAAI,IAAI;oBAER,IAAI,KAAK,GAAG,CAAC,MAAM,GAAG;wBACpB,IAAI,WAAW,GAAG;wBAClB,IAAI,SAAS,GAAG;wBAChB,IAAI,SAAS;wBACb,IAAI,MAAM,CAAC,GAAG;wBACd,IAAI,MAAM,CAAC,GAAG,IAAI,KAAK;wBACvB,IAAI,MAAM;oBACZ;oBAEA,IAAI,SAAS,GAAG;oBAChB,IAAI,SAAS;oBACb,IAAI,GAAG,CAAC,GAAG,SAAS,GAAG,GAAG,IAAI,KAAK,EAAE;oBACrC,IAAI,IAAI;gBACV;gBAEA,IAAI,SAAS,GAAG;gBAChB,IAAI,IAAI,GAAG;gBACX,IAAI,QAAQ,CAAC,uBAAuB,QAAQ,IAAI,IAAI;gBACpD,IAAI,QAAQ,CAAC,oBAAoB,QAAQ,IAAI,IAAI;YACnD,OAAO;gBACL,IAAI,WAAW,GAAG;gBAClB,IAAI,WAAW,CAAC;oBAAC;oBAAG;iBAAE;gBACtB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,QAAQ;gBACnB,IAAI,MAAM,CAAC,QAAQ,IAAI;gBACvB,IAAI,MAAM;gBACV,IAAI,WAAW,CAAC,EAAE;gBAElB,IAAK,IAAI,IAAI,GAAG,IAAI,cAAc,IAAK;oBACrC,MAAM,QAAQ,SAAS,IAAI;oBAC3B,MAAM,eAAe,OAAO,SAAS,GAAG,MAAM,KAAK,GAAG,CAAC,IAAI,CAAC,QAAQ,MAAM,IAAI,QAAQ;oBACtF,MAAM,IAAI,QAAQ;oBAClB,MAAM,KAAK,OAAO,SAAS,GAAG,MAAM,QAAQ,KAAK,GAAG,CAAC,IAAI,CAAC,QAAQ,MAAM,IAAI,QAAQ;oBAEpF,MAAM,UAAU,KAAK,GAAG,CAAC,IAAI,CAAC,QAAQ,MAAM,IAAI,QAAQ;oBACxD,MAAM,QAAQ,MAAM,MAAM,KAAK,GAAG,CAAC;oBACnC,IAAI,SAAS,GAAG,UAAU,IAAI,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;oBAE5F,IAAI,SAAS;oBACb,IAAI,GAAG,CAAC,GAAG,SAAS,GAAG,GAAG,IAAI,KAAK,EAAE;oBACrC,IAAI,IAAI;oBAER,IAAI,KAAK,GAAG,CAAC,MAAM,GAAG;wBACpB,IAAI,WAAW,GAAG;wBAClB,IAAI,SAAS,GAAG;wBAChB,IAAI,SAAS;wBACb,IAAI,MAAM,CAAC,GAAG;wBACd,IAAI,MAAM,CAAC,IAAI,KAAK,KAAK;wBACzB,IAAI,MAAM;oBACZ;oBAEA,IAAI,SAAS,GAAG;oBAChB,IAAI,SAAS;oBACb,IAAI,GAAG,CAAC,OAAO,UAAU,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE;oBAC9C,IAAI,IAAI;gBACV;gBAEA,IAAI,SAAS,GAAG;gBAChB,IAAI,IAAI,GAAG;gBACX,IAAI,QAAQ,CAAC,OAAO,QAAQ,IAAI,KAAK,UAAU;gBAC/C,IAAI,SAAS,GAAG;gBAChB,IAAI,QAAQ,CAAC,OAAO,QAAQ,IAAI,IAAI,UAAU;gBAE9C,IAAI,SAAS,GAAG;gBAChB,IAAI,IAAI,GAAG;gBACX,IAAI,QAAQ,CAAC,uBAAuB,QAAQ,IAAI,IAAI;gBACpD,IAAI,QAAQ,CAAC,oBAAoB,QAAQ,IAAI,IAAI;YACnD;YAEA,aAAa;YACb,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,IAAI,SAAS,KAAK,KAAK;YACpC,IAAI,WAAW,GAAG;YAClB,IAAI,UAAU,CAAC,IAAI,SAAS,KAAK,KAAK;YAEtC,IAAI,SAAS,GAAG;YAChB,IAAI,IAAI,GAAG;YACX,IAAI,QAAQ,CAAC,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,SAAS;YACnD,IAAI,QAAQ,CAAC,CAAC,IAAI,EAAE,OAAO,UAAU,CAAC,GAAG,CAAC,EAAE,IAAI,SAAS;YACzD,IAAI,QAAQ,CAAC,CAAC,IAAI,EAAE,OAAO,SAAS,CAAC,GAAG,CAAC,EAAE,IAAI,SAAS;YACxD,IAAI,QAAQ,CAAC,CAAC,IAAI,EAAE,SAAS,OAAO,CAAC,GAAG,KAAK,CAAC,EAAE,IAAI,SAAS;YAE7D,IAAI,SAAS,GAAG;YAChB,IAAI,IAAI,GAAG;YACX,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,sBAAsB,QAAQ,IAAI,SAAS;YACxD,IAAI,SAAS,GAAG;QAClB;4CACA;QAAC;QAAU,OAAO,SAAS;QAAE,OAAO,UAAU;QAAE,OAAO,SAAS;QAAE;QAAO;QAAG;KAAS;IAGvF,MAAM,UAAU,IAAA,4KAAW;gDAAC;YAC1B,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,CAAC,QAAQ;YACb,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,CAAC,KAAK;YAEV,QAAQ,OAAO,IAAI;YACnB,IAAI,QAAQ,OAAO,GAAG,UAAU,QAAQ,OAAO,GAAG;YAClD,QAAQ,QAAQ,OAAO;YACvB,KAAK,KAAK,QAAQ,OAAO;YAEzB,IAAI,aAAa,QAAQ,OAAO,GAAG,UAAU;gBAC3C,aAAa,OAAO,GAAG,sBAAsB;YAC/C,OAAO,IAAI,QAAQ,OAAO,IAAI,UAAU;gBACtC,aAAa;YACf;QACF;+CAAG;QAAC;QAAW;KAAK;IAEpB,IAAA,0KAAS;qCAAC;YACR,IAAI,WAAW;gBACb,aAAa,OAAO,GAAG,sBAAsB;YAC/C;YACA;6CAAO;oBACL,IAAI,aAAa,OAAO,EAAE,qBAAqB,aAAa,OAAO;gBACrE;;QACF;oCAAG;QAAC;QAAW;KAAQ;IAEvB,IAAA,0KAAS;qCAAC;YACR,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,CAAC,QAAQ;YACb,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,CAAC,KAAK;YACV,KAAK,KAAK,QAAQ,OAAO;QAC3B;oCAAG;QAAC;QAAQ;QAAU;KAAK;IAE3B,MAAM,aAAa,CAAC;QAClB,aAAa;QACb,QAAQ,OAAO,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,UAAU,QAAQ,OAAO,GAAG,KAAK,YAAY;QACpF,QAAQ,QAAQ,OAAO;QACvB,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QACb,MAAM,MAAM,OAAO,UAAU,CAAC;QAC9B,IAAI,CAAC,KAAK;QACV,KAAK,KAAK,QAAQ,OAAO;IAC3B;IAEA,MAAM,cAAc;QAClB,aAAa;QACb,QAAQ,OAAO,GAAG;QAClB,QAAQ;QACR,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QACb,MAAM,MAAM,OAAO,UAAU,CAAC;QAC9B,IAAI,CAAC,KAAK;QACV,KAAK,KAAK;IACZ;IAEA,MAAM,uBAAuB,CAAC;QAC5B,aAAa;QACb,QAAQ,OAAO,GAAG;QAClB,QAAQ;QACR,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QACb,MAAM,MAAM,OAAO,UAAU,CAAC;QAC9B,IAAI,CAAC,KAAK;QACV,KAAK,KAAK;IACZ;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAO,KAAK;4BAAW,OAAO;4BAAK,QAAQ;4BAAK,WAAU;;;;;;;;;;;kCAG7D,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAS;wCACT,WAAU;wCACV,OAAM;kDAEN,cAAA,6LAAC,gOAAS;4CAAC,MAAM;;;;;;;;;;;kDAEnB,6LAAC;wCACC,SAAS,IAAM,WAAW,CAAC;wCAC3B,WAAU;wCACV,OAAM;kDAEN,cAAA,6LAAC,6NAAQ;4CAAC,MAAM;;;;;;;;;;;kDAElB,6LAAC;wCACC,SAAS,IAAM,aAAa,CAAC;wCAC7B,WAAW,CAAC,0HAA0H,EACpI,YACI,wDACA,mDACL,WAAW,CAAC;wCACb,OAAO,YAAY,SAAS;kDAE3B,0BACC,6LAAC,gNAAK;4CAAC,MAAM;4CAAI,MAAK;;;;;iEAEtB,6LAAC,6MAAI;4CAAC,MAAM;4CAAI,MAAK;4CAAe,WAAU;;;;;;;;;;;kDAGlD,6LAAC;wCACC,SAAS,IAAM,WAAW;wCAC1B,WAAU;wCACV,OAAM;kDAEN,cAAA,6LAAC,sOAAW;4CAAC,MAAM;;;;;;;;;;;;;;;;;0CAIvB,6LAAC;gCAAK,WAAU;0CAAuC;;;;;;0CACvD,6LAAC;gCACC,MAAK;gCACL,KAAI;gCACJ,KAAK;gCACL,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,qBAAqB,OAAO,EAAE,MAAM,CAAC,KAAK;gCAC3D,WAAU;;;;;;0CAEZ,6LAAC;gCAAK,WAAU;;oCAAoD;oCAAS;;;;;;;;;;;;;;;;;;;0BAIjF,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA2C;;;;;;0CACzD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAS,IAAM,YAAY;wCAC3B,WAAW,CAAC,wEAAwE,EAClF,aAAa,eACT,kDACA,mEACJ;kDACH;;;;;;kDAGD,6LAAC;wCACC,SAAS,IAAM,YAAY;wCAC3B,WAAW,CAAC,wEAAwE,EAClF,aAAa,iBACT,kDACA,mEACJ;kDACH;;;;;;;;;;;;;;;;;;kCAML,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA2C;;;;;;0CACzD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAM,WAAU;kEAAiB;;;;;;kEAClC,6LAAC;wDAAK,WAAU;;4DAA2B,OAAO,SAAS;4DAAC;;;;;;;;;;;;;0DAE9D,6LAAC;gDACC,MAAK;gDACL,KAAI;gDACJ,KAAI;gDACJ,OAAO,OAAO,SAAS;gDACvB,UAAU,CAAC,IAAM,UAAU;wDAAE,GAAG,MAAM;wDAAE,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAE;gDAC1E,WAAU;;;;;;;;;;;;kDAGd,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAM,WAAU;kEAAiB;;;;;;kEAClC,6LAAC;wDAAK,WAAU;;4DAA2B,OAAO,UAAU;4DAAC;;;;;;;;;;;;;0DAE/D,6LAAC;gDACC,MAAK;gDACL,KAAI;gDACJ,KAAI;gDACJ,OAAO,OAAO,UAAU;gDACxB,UAAU,CAAC,IAAM,UAAU;wDAAE,GAAG,MAAM;wDAAE,YAAY,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAE;gDAC3E,WAAU;;;;;;;;;;;;kDAGd,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAM,WAAU;kEAAiB;;;;;;kEAClC,6LAAC;wDAAK,WAAU;;4DAA2B,OAAO,SAAS;4DAAC;;;;;;;;;;;;;0DAE9D,6LAAC;gDACC,MAAK;gDACL,KAAI;gDACJ,KAAI;gDACJ,MAAK;gDACL,OAAO,OAAO,SAAS;gDACvB,UAAU,CAAC,IAAM,UAAU;wDAAE,GAAG,MAAM;wDAAE,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAE;gDAC1E,WAAU;;;;;;;;;;;;;;;;;;;;;;;;kCAMlB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA2C;;;;;;0CACzD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;kDAAE;;;;;;kDACH,6LAAC;;4CAAE;4CAAU,SAAS,OAAO,CAAC;4CAAG;;;;;;;kDACjC,6LAAC;;4CAAE;4CAAY,EAAE,OAAO,CAAC;4CAAG;;;;;;;kDAC5B,6LAAC;;4CAAE;4CAAW,MAAM,OAAO,CAAC;4CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3C;GAlYwB;KAAA"}},
    {"offset": {"line": 5778, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/experiments/sound-waves.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Play, Pause, Mic, MicOff, Activity, Settings, RefreshCw, Volume2, Info, BookOpen, RotateCcw, SkipBack, SkipForward, BarChart3, Radio } from 'lucide-react';\n\n// --- COMPONENT CON ---\nconst ControlPanel = ({ title, icon: Icon, children }: { title: string; icon?: any; children: React.ReactNode }) => (\n  <div className=\"bg-[#1e293b] rounded-xl border border-slate-700/50 shadow-sm overflow-hidden flex flex-col h-full\">\n    <div className=\"bg-slate-800/50 px-4 py-3 border-b border-slate-700/50 flex items-center gap-2\">\n      {Icon && <Icon size={16} className=\"text-cyan-400\"/>}\n      <h3 className=\"text-slate-300 font-bold text-xs uppercase tracking-wider\">{title}</h3>\n    </div>\n    <div className=\"p-4 space-y-4 flex-1\">{children}</div>\n  </div>\n)\n\nconst StatBox = ({ label, value, unit, color = \"text-slate-200\" }: { label: string, value: string | number, unit?: string, color?: string }) => (\n    <div className=\"bg-slate-900/50 rounded-lg p-2 border border-slate-700/50 flex flex-col items-center justify-center min-w-[80px]\">\n        <div className=\"text-[10px] text-slate-500 uppercase font-semibold mb-1\">{label}</div>\n        <div className={`text-lg font-mono font-bold ${color}`}>\n            {value} <span className=\"text-xs font-normal text-slate-500\">{unit}</span>\n        </div>\n    </div>\n)\n\nconst SoundWaveLab = () => {\n  // --- STATE ---\n  const [isListening, setIsListening] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isFrozen, setIsFrozen] = useState(false);\n  \n  // Physics & Measurement\n  const [frequency, setFrequency] = useState(0); // Measured freq\n  const [medium, setMedium] = useState('air'); \n  const [velocity, setVelocity] = useState(343); \n\n  // Generator\n  const [genFreq, setGenFreq] = useState(440); \n  const [genType, setGenType] = useState<OscillatorType>('sine');\n  const [genVolume, setGenVolume] = useState(0.5);\n\n  // --- REFS ---\n  const audioContextRef = useRef<AudioContext | null>(null);\n  const analyserRef = useRef<AnalyserNode | null>(null);\n  const microphoneRef = useRef<MediaStreamAudioSourceNode | null>(null);\n  const oscillatorRef = useRef<OscillatorNode | null>(null);\n  const gainNodeRef = useRef<GainNode | null>(null);\n  const requestRef = useRef<number | null>(null);\n  \n  const canvasTimeRef = useRef<HTMLCanvasElement>(null); // Oscilloscope\n  const canvasFreqRef = useRef<HTMLCanvasElement>(null); // Spectrum\n  \n  const timeDataRef = useRef(new Uint8Array(0));\n  const freqDataRef = useRef(new Uint8Array(0));\n\n  const MEDIUMS: Record<string, { name: string; v: number }> = {\n    air: { name: 'Không khí (20°C)', v: 343 },\n    water: { name: 'Nước (25°C)', v: 1493 },\n    soil: { name: 'Đất', v: 3000 },\n  };\n\n  const WAVEFORMS: Record<string, string> = {\n      sine: 'Hình Sin',\n      square: 'Hình Vuông',\n      sawtooth: 'Răng Cưa',\n      triangle: 'Tam Giác'\n  };\n\n  useEffect(() => {\n    setVelocity(MEDIUMS[medium].v);\n  }, [medium]);\n\n  // --- AUDIO LOGIC ---\n  const initAudio = async () => {\n    if (!audioContextRef.current) {\n      audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\n    }\n    if (audioContextRef.current?.state === 'suspended') await audioContextRef.current.resume();\n  };\n\n  const startMicrophone = async () => {\n    try {\n      await initAudio();\n      if (!audioContextRef.current) return;\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      setupAnalyser();\n      microphoneRef.current = audioContextRef.current.createMediaStreamSource(stream);\n      microphoneRef.current.connect(analyserRef.current!);\n      setIsListening(true);\n      setIsGenerating(false);\n      setIsFrozen(false);\n    } catch (err) { alert(\"Cần cấp quyền Micro!\"); }\n  };\n\n  const startGenerator = async () => {\n    await initAudio();\n    if (!audioContextRef.current) return;\n    if (isListening) stopMicrophone();\n    \n    setupAnalyser();\n    oscillatorRef.current = audioContextRef.current.createOscillator();\n    gainNodeRef.current = audioContextRef.current.createGain();\n    \n    oscillatorRef.current.type = genType;\n    oscillatorRef.current.frequency.setValueAtTime(genFreq, audioContextRef.current.currentTime);\n    gainNodeRef.current!.gain.setValueAtTime(genVolume, audioContextRef.current.currentTime);\n    \n    oscillatorRef.current.connect(gainNodeRef.current!);\n    gainNodeRef.current!.connect(analyserRef.current!);\n    gainNodeRef.current!.connect(audioContextRef.current.destination);\n    \n    oscillatorRef.current.start();\n    setIsGenerating(true);\n    setIsListening(false);\n    setIsFrozen(false);\n  };\n\n  const setupAnalyser = () => {\n      if(!audioContextRef.current) return;\n      analyserRef.current = audioContextRef.current.createAnalyser();\n      analyserRef.current.fftSize = 2048;\n      analyserRef.current.smoothingTimeConstant = 0.8;\n  }\n\n  const stopMicrophone = () => {\n    microphoneRef.current?.disconnect();\n    microphoneRef.current = null;\n    setIsListening(false);\n  };\n\n  const stopGenerator = () => {\n    try { oscillatorRef.current?.stop(); } catch(e){}\n    oscillatorRef.current?.disconnect();\n    oscillatorRef.current = null;\n    setIsGenerating(false);\n  };\n\n  const updateGen = (freq: number, type: OscillatorType, vol: number) => {\n    if (audioContextRef.current && oscillatorRef.current && gainNodeRef.current) {\n      oscillatorRef.current.frequency.setValueAtTime(freq, audioContextRef.current.currentTime);\n      oscillatorRef.current.type = type;\n      gainNodeRef.current.gain.setValueAtTime(vol, audioContextRef.current.currentTime);\n    }\n    setGenFreq(freq); setGenType(type); setGenVolume(vol);\n  };\n\n  const getPitch = (buffer: Uint8Array, sampleRate: number) => {\n    let maxVal = -Infinity; let maxIndex = -1;\n    for (let i = 1; i < buffer.length / 2; i++) {\n      if (buffer[i] > maxVal) { maxVal = buffer[i]; maxIndex = i; }\n    }\n    if (maxVal < 100) return 0; // Noise gate\n    // Interpolation\n    const prev = buffer[maxIndex - 1]; const next = buffer[maxIndex + 1]; const curr = buffer[maxIndex];\n    const trueIndex = maxIndex + (next - prev) / (2 * (2 * curr - next - prev));\n    return trueIndex * sampleRate / (analyserRef.current?.fftSize || 2048);\n  };\n\n  // --- DRAW LOOP ---\n  const draw = useCallback(() => {\n    if (!analyserRef.current || !audioContextRef.current) return;\n    \n    if (!isFrozen) {\n      const bufferLength = analyserRef.current.frequencyBinCount;\n      if (timeDataRef.current.length !== bufferLength) {\n        timeDataRef.current = new Uint8Array(bufferLength);\n        freqDataRef.current = new Uint8Array(bufferLength);\n      }\n      analyserRef.current.getByteTimeDomainData(timeDataRef.current);\n      analyserRef.current.getByteFrequencyData(freqDataRef.current);\n      \n      // Update Freq Display\n      if (isGenerating) setFrequency(genFreq);\n      else {\n          const f = getPitch(freqDataRef.current, audioContextRef.current.sampleRate);\n          setFrequency(prev => (f > 0 && Math.abs(prev - f) > 5) ? f : prev); // Simple smoothing\n      }\n    }\n\n    // 1. Draw Time Domain (Oscilloscope)\n    const ctxTime = canvasTimeRef.current?.getContext('2d');\n    if (ctxTime && canvasTimeRef.current) {\n        const w = canvasTimeRef.current.width; const h = canvasTimeRef.current.height;\n        ctxTime.fillStyle = '#0f172a'; ctxTime.fillRect(0, 0, w, h);\n        \n        // Grid\n        ctxTime.strokeStyle = '#1e293b'; ctxTime.lineWidth = 1; ctxTime.beginPath();\n        for(let x=0; x<=w; x+=w/10) { ctxTime.moveTo(x,0); ctxTime.lineTo(x,h); }\n        ctxTime.stroke();\n        ctxTime.strokeStyle = '#334155'; ctxTime.beginPath(); ctxTime.moveTo(0, h/2); ctxTime.lineTo(w, h/2); ctxTime.stroke();\n\n        // Wave\n        ctxTime.lineWidth = 3; ctxTime.strokeStyle = '#38bdf8'; ctxTime.beginPath();\n        const sliceWidth = w * 1.0 / timeDataRef.current.length;\n        let x = 0;\n        for(let i=0; i<timeDataRef.current.length; i++) {\n            const v = timeDataRef.current[i] / 128.0;\n            const y = v * h/2;\n            if(i===0) ctxTime.moveTo(x, y); else ctxTime.lineTo(x, y);\n            x += sliceWidth;\n        }\n        ctxTime.stroke();\n        \n        // Author\n        ctxTime.fillStyle = \"rgba(255,255,255,0.1)\"; ctxTime.font = \"12px sans-serif\"; ctxTime.textAlign = \"right\";\n        ctxTime.fillText(\"Hô Hoàng Anh A1K50\", w - 10, h - 10);\n    }\n\n    // 2. Draw Frequency Domain (Spectrum)\n    const ctxFreq = canvasFreqRef.current?.getContext('2d');\n    if (ctxFreq && canvasFreqRef.current) {\n        const w = canvasFreqRef.current.width; const h = canvasFreqRef.current.height;\n        ctxFreq.fillStyle = '#0f172a'; ctxFreq.fillRect(0, 0, w, h);\n        \n        const barWidth = (w / freqDataRef.current.length) * 2.5;\n        let x = 0;\n        for(let i=0; i<freqDataRef.current.length; i++) {\n            const barHeight = freqDataRef.current[i] / 255 * h;\n            ctxFreq.fillStyle = `rgb(${barHeight + 100},50,200)`;\n            ctxFreq.fillRect(x, h - barHeight, barWidth, barHeight);\n            x += barWidth + 1;\n        }\n    }\n\n    requestRef.current = requestAnimationFrame(draw);\n  }, [isFrozen, isGenerating, genFreq]);\n\n  useEffect(() => {\n    requestRef.current = requestAnimationFrame(draw);\n    return () => { if(requestRef.current) cancelAnimationFrame(requestRef.current); }\n  }, [draw]);\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n      {/* CỘT TRÁI */}\n      <div className=\"lg:col-span-2 space-y-4\">\n        {/* Visualizer Main */}\n        <div className=\"bg-[#1e293b] rounded-xl border border-slate-700/50 shadow-lg relative overflow-hidden group\">\n            <canvas ref={canvasTimeRef} width={800} height={380} className=\"w-full h-[380px] bg-[#0f172a]\" />\n            <div className=\"absolute top-4 left-4 bg-slate-900/80 backdrop-blur px-3 py-2 rounded-lg border border-slate-700 text-xs font-mono text-cyan-400 flex gap-2 items-center\">\n                <Activity size={14}/> Dao động ký (Oscilloscope)\n            </div>\n        </div>\n\n        {/* Controls */}\n        <div className=\"bg-[#1e293b] rounded-xl p-3 border border-slate-700/50 shadow-md flex items-center gap-4 justify-between\">\n            <div className=\"flex gap-2\">\n                <button \n                    onClick={() => { if(isGenerating) stopGenerator(); else startGenerator(); }}\n                    disabled={isListening}\n                    className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${isGenerating ? 'bg-green-600 text-white shadow-lg' : 'bg-slate-700 text-slate-300 hover:bg-slate-600'} ${isListening ? 'opacity-30' : ''}`}\n                >\n                    <Radio size={18}/> {isGenerating ? \"Tắt Máy Phát\" : \"Bật Máy Phát\"}\n                </button>\n                <button \n                    onClick={() => { if(isListening) stopMicrophone(); else startMicrophone(); }}\n                    disabled={isGenerating}\n                    className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${isListening ? 'bg-red-500 text-white shadow-lg' : 'bg-slate-700 text-slate-300 hover:bg-slate-600'} ${isGenerating ? 'opacity-30' : ''}`}\n                >\n                    {isListening ? <MicOff size={18}/> : <Mic size={18}/>} {isListening ? \"Tắt Mic\" : \"Bật Mic\"}\n                </button>\n            </div>\n            \n            <button \n                onClick={() => setIsFrozen(!isFrozen)}\n                className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${isFrozen ? 'bg-amber-500 text-white' : 'bg-cyan-600 text-white'}`}\n            >\n                {isFrozen ? <Play size={18} fill=\"currentColor\"/> : <Pause size={18} fill=\"currentColor\"/>} {isFrozen ? \"Tiếp tục\" : \"Dừng hình\"}\n            </button>\n        </div>\n\n        {/* Spectrum Graph */}\n        <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50 shadow-md\">\n            <div className=\"flex justify-between items-center mb-2\">\n                <h3 className=\"text-xs font-bold text-purple-400 uppercase flex items-center gap-2\"><BarChart3 size={14}/> Phổ Tần Số (FFT)</h3>\n            </div>\n            <div className=\"relative w-full h-32 bg-[#0f172a] rounded-lg border border-slate-700 overflow-hidden\">\n                <canvas ref={canvasFreqRef} width={800} height={128} className=\"w-full h-full\"/>\n            </div>\n        </div>\n      </div>\n\n      {/* CỘT PHẢI */}\n      <div className=\"lg:col-span-1 space-y-4 flex flex-col\">\n        {/* Frequency Display */}\n        <div className=\"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-slate-700 shadow-2xl text-center relative\">\n               <div className=\"absolute top-4 right-4 animate-pulse\">\n                  <div className={`w-3 h-3 rounded-full ${frequency > 20 ? (isGenerating ? 'bg-green-500' : 'bg-red-500') : 'bg-slate-600'}`}></div>\n               </div>\n               <h2 className=\"text-slate-400 text-sm uppercase tracking-wider mb-2\">\n                 {isGenerating ? \"Tần số đang phát\" : \"Tần số đo được\"}\n               </h2>\n               <div className={`text-6xl font-mono font-bold tracking-tighter tabular-nums ${isGenerating ? 'text-green-400' : 'text-cyan-400'}`}>\n                 {frequency > 0 ? frequency.toFixed(1) : \"--\"}\n                 <span className=\"text-2xl text-slate-500 ml-2\">Hz</span>\n               </div>\n        </div>\n\n        {/* Generator Settings */}\n        <ControlPanel title=\"Cấu hình nguồn phát\" icon={Settings}>\n            <div className=\"space-y-4\">\n                <div>\n                   <div className=\"flex justify-between text-xs text-slate-400 mb-1\">\n                        <span>Tần số phát (Hz)</span> <span className=\"text-green-400 font-mono font-bold\">{genFreq.toFixed(0)}</span>\n                   </div>\n                   <input type=\"range\" min=\"20\" max=\"5000\" step=\"1\" value={genFreq} onChange={(e) => updateGen(Number(e.target.value), genType, genVolume)} className=\"w-full accent-green-500 h-1.5 bg-slate-700 rounded-lg cursor-pointer\" />\n                </div>\n                <div>\n                   <div className=\"flex justify-between text-xs text-slate-400 mb-1\">\n                        <span>Biên độ (Volume)</span> <span className=\"text-green-400 font-mono font-bold\">{(genVolume*100).toFixed(0)}%</span>\n                   </div>\n                   <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" value={genVolume} onChange={(e) => updateGen(genFreq, genType, Number(e.target.value))} className=\"w-full accent-green-500 h-1.5 bg-slate-700 rounded-lg cursor-pointer\" />\n                </div>\n                <div>\n                   <label className=\"text-xs text-slate-400 mb-2 block\">Dạng sóng</label>\n                   <div className=\"grid grid-cols-2 gap-2\">\n                      {Object.entries(WAVEFORMS).map(([key, label]) => (\n                        <button key={key} onClick={() => updateGen(genFreq, key as OscillatorType, genVolume)} className={`text-[10px] py-2 rounded border transition-all ${genType === key ? 'bg-green-600 border-green-500 text-white' : 'bg-slate-800 border-slate-600 text-slate-400 hover:text-white'}`}>{label}</button>\n                      ))}\n                   </div>\n                </div>\n            </div>\n        </ControlPanel>\n\n        {/* Physics Info */}\n        <ControlPanel title=\"Thông số vật lý\" icon={BookOpen}>\n            <div className=\"space-y-3 text-xs\">\n                <div>\n                    <label className=\"text-slate-400 mb-1 block\">Môi trường</label>\n                    <select value={medium} onChange={(e) => setMedium(e.target.value)} className=\"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1.5 text-slate-200 outline-none focus:border-cyan-500\">\n                      {Object.entries(MEDIUMS).map(([key, val]) => (\n                        <option key={key} value={key}>{val.name} (v={val.v}m/s)</option>\n                      ))}\n                    </select>\n                </div>\n                <div className=\"grid grid-cols-2 gap-2 mt-2\">\n                    <StatBox label=\"Bước sóng (λ)\" value={frequency > 0 ? (velocity/frequency).toFixed(3) : \"--\"} unit=\"m\" color=\"text-yellow-400\"/>\n                    <StatBox label=\"Chu kỳ (T)\" value={frequency > 0 ? (1000/frequency).toFixed(2) : \"--\"} unit=\"ms\" color=\"text-orange-400\"/>\n                </div>\n                <div className=\"mt-4 pt-4 border-t border-slate-700\">\n                    <h4 className=\"text-xs font-bold text-slate-300 mb-2 flex items-center gap-1\">\n                        <BookOpen size={14} /> CÔNG THỨC & CHÚ THÍCH\n                    </h4>\n                    <div className=\"bg-slate-900/50 p-3 rounded text-xs space-y-2 border border-slate-700/50 font-mono text-slate-400\">\n                        <div className=\"flex justify-between\">\n                            <span>x = A·cos(ωt + φ)</span>\n                            <span className=\"text-slate-600\">// PT Dao động</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                            <span>ω = 2πf</span>\n                            <span className=\"text-slate-600\">// Tần số góc</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                            <span>T = 1/f</span>\n                            <span className=\"text-slate-600\">// Chu kỳ</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                            <span>λ = v/f = v·T</span>\n                            <span className=\"text-slate-600\">// Bước sóng</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                            <span>k = 2π/λ</span>\n                            <span className=\"text-slate-600\">// Số sóng</span>\n                        </div>\n                        <div className=\"flex justify-between text-yellow-500/80 pt-1 border-t border-slate-800\">\n                            <span>u = A·cos(ωt - kx)</span>\n                            <span>// PT Sóng</span>\n                        </div>\n                    </div>\n                  </div>\n            </div>\n        </ControlPanel>\n      </div>\n    </div>\n  );\n};\n\nexport default SoundWaveLab;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6796, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/experiments/wave-interference.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRef, useEffect, useState, useCallback } from \"react\"\nimport { Play, Pause, RotateCcw, Eye, EyeOff, Waves, SkipBack, SkipForward, Sun, Zap, Disc, Maximize2, Rainbow } from \"lucide-react\"\n\nconst MAX_TIME = 20\n\n// --- CÁC HÀM BỔ TRỢ ---\n\n// Polyfill cho hàm sinc\nif (!Math.sinc) {\n  Math.sinc = function (x: number) {\n    return x === 0 ? 1 : Math.sin(x) / x\n  }\n}\n\n// Hàm chuyển đổi bước sóng (nm) sang màu RGB\nconst wavelengthToRGB = (wavelength: number) => {\n  let r, g, b, alpha\n  if (wavelength >= 380 && wavelength < 440) {\n    r = -(wavelength - 440) / (440 - 380); g = 0; b = 1\n  } else if (wavelength >= 440 && wavelength < 490) {\n    r = 0; g = (wavelength - 440) / (490 - 440); b = 1\n  } else if (wavelength >= 490 && wavelength < 510) {\n    r = 0; g = 1; b = -(wavelength - 510) / (510 - 490)\n  } else if (wavelength >= 510 && wavelength < 580) {\n    r = (wavelength - 510) / (580 - 510); g = 1; b = 0\n  } else if (wavelength >= 580 && wavelength < 645) {\n    r = 1; g = -(wavelength - 645) / (645 - 580); b = 0\n  } else if (wavelength >= 645 && wavelength < 781) {\n    r = 1; g = 0; b = 0\n  } else {\n    r = 0; g = 0; b = 0\n  }\n\n  if (wavelength >= 380 && wavelength < 420) {\n    alpha = 0.3 + (0.7 * (wavelength - 380)) / (420 - 380)\n  } else if (wavelength >= 420 && wavelength < 701) {\n    alpha = 1.0\n  } else if (wavelength >= 701 && wavelength < 781) {\n    alpha = 0.3 + (0.7 * (781 - wavelength)) / (781 - 701)\n  } else {\n    alpha = 0\n  }\n\n  return {\n    r: Math.round(r * 255 * alpha),\n    g: Math.round(g * 255 * alpha),\n    b: Math.round(b * 255 * alpha),\n    colorString: `rgb(${Math.round(r * 255 * alpha)}, ${Math.round(g * 255 * alpha)}, ${Math.round(b * 255 * alpha)})`\n  }\n}\n\n// --- COMPONENT CHÍNH ---\nexport default function WaveInterference() {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  \n  // State chung\n  const [mode, setMode] = useState<'mechanical' | 'light'>('mechanical')\n  \n  // State Sóng cơ\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [time, setTime] = useState(0)\n  const [showNodalLines, setShowNodalLines] = useState(false)\n  const [view3D, setView3D] = useState(false)\n  const [mechParams, setMechParams] = useState({\n    frequency: 0.8,\n    amplitude: 1.0,\n    sourceDistance: 120,\n    wavelength: 40,\n  })\n\n  // State Sóng ánh sáng\n  const [lightMode, setLightMode] = useState<'mono' | 'dual' | 'white'>('mono')\n  const [lightParams, setLightParams] = useState({\n    wavelength1: 500, // Lambda 1 (nm)\n    wavelength2: 650, // Lambda 2 (nm)\n    slitDistance: 1.0, // a (mm)\n    screenDistance: 2.0, // D (m)\n  })\n\n  const animationRef = useRef<number>()\n  const timeRef = useRef(0)\n\n  // --- LOGIC SÓNG CƠ ---\n  const omega = 2 * Math.PI * mechParams.frequency\n  const k_mech = (2 * Math.PI) / mechParams.wavelength\n  const dt = 1 / 60\n\n  const calculateWaveHeight = useCallback(\n    (x: number, y: number, s1x: number, s1y: number, s2x: number, s2y: number, t: number) => {\n      const d1 = Math.sqrt((x - s1x) ** 2 + (y - s1y) ** 2)\n      const d2 = Math.sqrt((x - s2x) ** 2 + (y - s2y) ** 2)\n      const amp1 = mechParams.amplitude / Math.sqrt(1 + d1 * 0.01)\n      const amp2 = mechParams.amplitude / Math.sqrt(1 + d2 * 0.01)\n      \n      const wave1 = amp1 * Math.sin(k_mech * d1 - omega * t)\n      const wave2 = amp2 * Math.sin(k_mech * d2 - omega * t)\n      return wave1 + wave2\n    },\n    [k_mech, omega, mechParams.amplitude],\n  )\n\n  const getNodalLinePoints = useCallback(\n    (width: number, height: number, s1x: number, s1y: number, s2x: number, s2y: number, order: number) => {\n      const points: { x: number; y: number }[] = []\n      const pathDiff = (order + 0.5) * mechParams.wavelength\n      for (let x = 0; x < width; x += 2) {\n        for (let y = 0; y < height; y += 2) {\n          const d1 = Math.sqrt((x - s1x) ** 2 + (y - s1y) ** 2)\n          const d2 = Math.sqrt((x - s2x) ** 2 + (y - s2y) ** 2)\n          if (Math.abs(Math.abs(d1 - d2) - pathDiff) < 2.5) points.push({ x, y })\n        }\n      }\n      return points\n    },\n    [mechParams.wavelength],\n  )\n\n  const drawMechanical = useCallback(\n    (ctx: CanvasRenderingContext2D, t: number) => {\n      const width = ctx.canvas.width\n      const height = ctx.canvas.height\n      const centerY = height / 2\n      const source1 = { x: 80, y: centerY - mechParams.sourceDistance / 2 }\n      const source2 = { x: 80, y: centerY + mechParams.sourceDistance / 2 }\n\n      const imageData = ctx.createImageData(width, height)\n      const data = imageData.data\n      const resolution = view3D ? 3 : 2\n\n      if (view3D) {\n        ctx.fillStyle = \"#0f172a\"; ctx.fillRect(0, 0, width, height)\n        const perspectiveScale = 0.6; const horizonY = height * 0.2; const gridSpacing = 8\n        for (let z = 0; z < height * 1.5; z += gridSpacing) {\n          const perspY = horizonY + z * perspectiveScale; if (perspY > height) continue\n          const scale = 0.3 + (z / (height * 1.5)) * 0.7\n          for (let x = 0; x < width; x += gridSpacing) {\n            const worldX = (x - width / 2) / scale + width / 2; const worldZ = z\n            const waveHeight = calculateWaveHeight(worldX, worldZ, source1.x, source1.y, source2.x, source2.y, t)\n            const normalizedHeight = (waveHeight + 2 * mechParams.amplitude) / (4 * mechParams.amplitude)\n            const r = Math.floor(30 + normalizedHeight * 50); const g = Math.floor(100 + normalizedHeight * 155); const b = Math.floor(180 + normalizedHeight * 75)\n            const screenX = width / 2 + (x - width / 2) * scale; const screenY = perspY - waveHeight * 15 * scale\n            ctx.fillStyle = `rgb(${r}, ${g}, ${b})`; ctx.fillRect(screenX - 2, screenY - 2, 4, 4)\n          }\n        }\n      } else {\n        for (let y = 0; y < height; y += resolution) {\n          for (let x = 0; x < width; x += resolution) {\n            const waveHeight = calculateWaveHeight(x, y, source1.x, source1.y, source2.x, source2.y, t)\n            const maxAmp = 2 * mechParams.amplitude * 0.8\n            const normalizedHeight = (waveHeight + maxAmp) / (2 * maxAmp)\n            let r, g, b\n            if (normalizedHeight > 0.5) {\n              const intensity = (normalizedHeight - 0.5) * 2\n              r = Math.floor(50 + intensity * 205); g = Math.floor(150 + intensity * 105); b = Math.floor(200 + intensity * 55)\n            } else {\n              const intensity = normalizedHeight * 2\n              r = Math.floor(5 + intensity * 45); g = Math.floor(20 + intensity * 130); b = Math.floor(60 + intensity * 140)\n            }\n            for (let dy = 0; dy < resolution && y + dy < height; dy++) {\n              for (let dx = 0; dx < resolution && x + dx < width; dx++) {\n                const idx = ((y + dy) * width + (x + dx)) * 4\n                data[idx] = r; data[idx + 1] = g; data[idx + 2] = b; data[idx + 3] = 255\n              }\n            }\n          }\n        }\n        ctx.putImageData(imageData, 0, 0)\n      }\n\n      if (showNodalLines && !view3D) {\n        ctx.strokeStyle = \"rgba(255, 100, 100, 0.8)\"; ctx.lineWidth = 2; ctx.setLineDash([5, 5])\n        const maxOrder = Math.floor(mechParams.sourceDistance / mechParams.wavelength) + 2\n        for (let order = 0; order <= maxOrder; order++) {\n          const points = getNodalLinePoints(width, height, source1.x, source1.y, source2.x, source2.y, order)\n          if (points.length > 0) {\n            const upperPoints = points.filter((p) => p.y < centerY).sort((a, b) => a.x - b.x)\n            const lowerPoints = points.filter((p) => p.y >= centerY).sort((a, b) => a.x - b.x)\n            if (upperPoints.length > 5) { ctx.beginPath(); ctx.moveTo(upperPoints[0].x, upperPoints[0].y); for (let i = 1; i < upperPoints.length; i++) ctx.lineTo(upperPoints[i].x, upperPoints[i].y); ctx.stroke(); }\n            if (lowerPoints.length > 5) { ctx.beginPath(); ctx.moveTo(lowerPoints[0].x, lowerPoints[0].y); for (let i = 1; i < lowerPoints.length; i++) ctx.lineTo(lowerPoints[i].x, lowerPoints[i].y); ctx.stroke(); }\n          }\n        }\n        ctx.strokeStyle = \"rgba(100, 255, 100, 0.5)\"; ctx.setLineDash([8, 4]); ctx.beginPath(); ctx.moveTo(source1.x, centerY); ctx.lineTo(width, centerY); ctx.stroke(); ctx.setLineDash([])\n      }\n\n      if(!view3D) {\n          const drawSource = (x: number, y: number, label: string) => {\n              const gradient = ctx.createRadialGradient(x, y, 0, x, y, 20)\n              gradient.addColorStop(0, \"rgba(255, 50, 50, 1)\"); gradient.addColorStop(1, \"rgba(255, 50, 50, 0)\")\n              ctx.fillStyle = gradient; ctx.beginPath(); ctx.arc(x, y, 20, 0, 2 * Math.PI); ctx.fill()\n              ctx.fillStyle = \"#fff\"; ctx.beginPath(); ctx.arc(x, y, 4, 0, 2 * Math.PI); ctx.fill()\n              ctx.fillStyle = \"#fff\"; ctx.font = \"bold 14px monospace\"; ctx.fillText(label, x - 25, y + 5)\n          }\n          drawSource(source1.x, source1.y, \"S₁\"); drawSource(source2.x, source2.y, \"S₂\")\n      }\n    },\n    [mechParams, view3D, showNodalLines, calculateWaveHeight, getNodalLinePoints]\n  )\n\n  // --- HÀM VẼ GIAO THOA ÁNH SÁNG ---\n  const drawLight = useCallback((ctx: CanvasRenderingContext2D) => {\n    const width = ctx.canvas.width\n    const height = ctx.canvas.height\n    const centerX = width / 2\n    \n    // Nền tối\n    ctx.fillStyle = \"#020617\"\n    ctx.fillRect(0, 0, width, height)\n\n    const a = lightParams.slitDistance * 1e-3\n    const D = lightParams.screenDistance\n    const physicalScreenWidth = 0.04 \n    const pixelsPerMeter = width / physicalScreenWidth\n\n    let wavelengths: { wl: number, intensityScale: number }[] = []\n\n    if (lightMode === 'mono') {\n        wavelengths.push({ wl: lightParams.wavelength1, intensityScale: 1.0 })\n    } else if (lightMode === 'dual') {\n        wavelengths.push({ wl: lightParams.wavelength1, intensityScale: 0.8 })\n        wavelengths.push({ wl: lightParams.wavelength2, intensityScale: 0.8 })\n    } else if (lightMode === 'white') {\n        for (let w = 380; w <= 750; w += 10) {\n            let scale = 0.5\n            if (w > 450 && w < 650) scale = 0.8\n            wavelengths.push({ wl: w, intensityScale: scale * 0.15 })\n        }\n    }\n\n    const imageData = ctx.createImageData(width, height)\n    const data = imageData.data\n\n    for (let x = 0; x < width; x++) {\n      const xPhysical = (x - centerX) / pixelsPerMeter\n      let rTotal = 0, gTotal = 0, bTotal = 0\n\n      for (const src of wavelengths) {\n          const lambda = src.wl * 1e-9\n          const phaseDifference = (2 * Math.PI * a * xPhysical) / (lambda * D)\n          let intensity = Math.cos(phaseDifference / 2) ** 2\n          \n          // SỬA LỖI: Đổi tên biến 'b' thành 'slitWidth' để không trùng với 'b' trong RGB\n          const slitWidth = a / 10 \n          const diffractionPhase = (Math.PI * slitWidth * xPhysical) / (lambda * D)\n          const diffractionFactor = Math.sinc(diffractionPhase) ** 2\n          intensity = intensity * diffractionFactor * src.intensityScale\n\n          const rgb = wavelengthToRGB(src.wl)\n          rTotal += rgb.r * intensity\n          gTotal += rgb.g * intensity\n          bTotal += rgb.b * intensity\n      }\n\n      rTotal = Math.min(255, rTotal)\n      gTotal = Math.min(255, gTotal)\n      bTotal = Math.min(255, bTotal)\n\n      // Vẽ Full Màn hình (xử lý từng pixel theo chiều dọc)\n      for (let y = 0; y < height; y++) {\n        const idx = (y * width + x) * 4\n        // Thêm noise nhẹ\n        const noise = (Math.random() - 0.5) * 5\n        data[idx] = Math.max(0, Math.min(255, rTotal + noise))\n        data[idx + 1] = Math.max(0, Math.min(255, gTotal + noise))\n        data[idx + 2] = Math.max(0, Math.min(255, bTotal + noise))\n        data[idx + 3] = 255\n      }\n    }\n    ctx.putImageData(imageData, 0, 0)\n\n    // --- VẼ KÍ HIỆU VÂN TRUNG TÂM (k=0) ---\n    ctx.save()\n    ctx.strokeStyle = \"rgba(255, 255, 255, 0.3)\"\n    ctx.setLineDash([8, 6])\n    ctx.lineWidth = 1\n    ctx.beginPath()\n    ctx.moveTo(centerX, 0)\n    ctx.lineTo(centerX, height)\n    ctx.stroke()\n\n    ctx.fillStyle = \"rgba(255, 255, 255, 0.9)\"\n    ctx.font = \"bold 12px monospace\"\n    ctx.textAlign = \"center\"\n    \n    // Hộp chứa chữ \"Vân trung tâm\"\n    const label = \"Vân trung tâm (k=0)\"\n    const textWidth = ctx.measureText(label).width\n    ctx.fillStyle = \"rgba(0,0,0,0.7)\"\n    ctx.fillRect(centerX - textWidth/2 - 6, 10, textWidth + 12, 24)\n    ctx.fillStyle = \"#fff\"\n    ctx.fillText(label, centerX, 26)\n    ctx.restore()\n\n    // --- VẼ THƯỚC ĐO ---\n    if (lightMode !== 'white') {\n        const i1_meter = (lightParams.wavelength1 * 1e-9 * D) / a\n        const i1_pixel = i1_meter * pixelsPerMeter\n\n        ctx.textAlign = \"center\"\n        const markerY = height / 2\n        \n        if (i1_pixel > 15 && i1_pixel < width/2) {\n            const firstBrightX = centerX + i1_pixel\n            const color1 = wavelengthToRGB(lightParams.wavelength1).colorString\n\n            ctx.strokeStyle = \"rgba(255,255,255,0.9)\"; ctx.fillStyle = \"rgba(255,255,255,0.9)\"; ctx.lineWidth = 1.5\n            \n            ctx.beginPath(); ctx.moveTo(centerX, markerY); ctx.lineTo(firstBrightX, markerY); ctx.stroke()\n            ctx.beginPath(); ctx.moveTo(centerX+5, markerY-4); ctx.lineTo(centerX, markerY); ctx.lineTo(centerX+5, markerY+4); ctx.fill()\n            ctx.beginPath(); ctx.moveTo(firstBrightX-5, markerY-4); ctx.lineTo(firstBrightX, markerY); ctx.lineTo(firstBrightX-5, markerY+4); ctx.fill()\n            \n            ctx.font = \"bold 14px monospace\"\n            const text = `i₁ = ${(i1_meter * 1000).toFixed(2)}mm`\n            const textWidth = ctx.measureText(text).width\n            ctx.fillStyle = \"rgba(0,0,0,0.8)\"; ctx.fillRect(centerX + i1_pixel/2 - textWidth/2 - 4, markerY - 24, textWidth + 8, 20)\n            ctx.fillStyle = color1; ctx.fillText(text, centerX + i1_pixel/2, markerY - 10)\n        }\n    }\n    ctx.textAlign = \"left\"\n  }, [lightParams, lightMode])\n\n\n  // --- ANIMATION LOOP ---\n  const animate = useCallback(() => {\n    const ctx = canvasRef.current?.getContext(\"2d\")\n    if (!ctx) return\n\n    if (mode === 'mechanical') {\n        timeRef.current += dt\n        if (timeRef.current > MAX_TIME) timeRef.current = MAX_TIME\n        setTime(timeRef.current)\n        drawMechanical(ctx, timeRef.current)\n        if (isPlaying && timeRef.current < MAX_TIME) {\n            animationRef.current = requestAnimationFrame(animate)\n        } else if (timeRef.current >= MAX_TIME) {\n            setIsPlaying(false)\n        }\n    } else {\n        drawLight(ctx)\n    }\n  }, [isPlaying, drawMechanical, drawLight, mode, dt])\n\n  useEffect(() => {\n    if (isPlaying && mode === 'mechanical') {\n      animationRef.current = requestAnimationFrame(animate)\n    }\n    return () => { if (animationRef.current) cancelAnimationFrame(animationRef.current) }\n  }, [isPlaying, animate, mode])\n\n  useEffect(() => {\n    const ctx = canvasRef.current?.getContext(\"2d\")\n    if (!ctx) return\n    if (mode === 'mechanical') {\n        drawMechanical(ctx, timeRef.current)\n    } else {\n        drawLight(ctx)\n    }\n  }, [mechParams, view3D, showNodalLines, lightParams, lightMode, mode, drawMechanical, drawLight])\n\n  const handleReset = () => {\n    if (mode !== 'mechanical') return\n    setIsPlaying(false); timeRef.current = 0; setTime(0)\n    canvasRef.current?.getContext(\"2d\") && drawMechanical(canvasRef.current.getContext(\"2d\")!, 0)\n  }\n  const handleStep = (direction: number) => {\n    if (mode !== 'mechanical') return\n    setIsPlaying(false)\n    timeRef.current = Math.max(0, Math.min(MAX_TIME, timeRef.current + dt * direction * 5))\n    setTime(timeRef.current)\n    canvasRef.current?.getContext(\"2d\") && drawMechanical(canvasRef.current.getContext(\"2d\")!, timeRef.current)\n  }\n\n  const calculateI = (wl: number) => (wl * 1e-9 * lightParams.screenDistance) / (lightParams.slitDistance * 1e-3) * 1000\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-4 font-sans items-start\">\n      <div className=\"lg:col-span-3 space-y-4\">\n        {/* Nút chuyển chế độ */}\n        <div className=\"flex gap-3 mb-2 p-1 bg-slate-800/50 rounded-xl w-fit backdrop-blur-sm border border-slate-700/50\">\n            <button\n                onClick={() => { setMode('mechanical'); setIsPlaying(false); }}\n                className={`px-5 py-2 rounded-lg font-bold flex items-center gap-2 transition-all text-sm ${mode === 'mechanical' ? 'bg-cyan-500 text-white shadow-lg shadow-cyan-500/25 scale-[1.02]' : 'text-slate-400 hover:text-white hover:bg-slate-700/50'}`}\n            >\n                <Waves size={18} className={mode === 'mechanical' ? 'animate-pulse' : ''} /> mặt nước\n            </button>\n            <button\n                onClick={() => { setMode('light'); setIsPlaying(false); }}\n                className={`px-5 py-2 rounded-lg font-bold flex items-center gap-2 transition-all text-sm ${mode === 'light' ? 'bg-amber-500 text-white shadow-lg shadow-amber-500/25 scale-[1.02]' : 'text-slate-400 hover:text-white hover:bg-slate-700/50'}`}\n            >\n                <Sun size={18} className={mode === 'light' ? 'animate-spin-slow' : ''}/> Ánh Sáng\n            </button>\n        </div>\n\n        {/* Khung mô phỏng - Full height */}\n        <div className=\"bg-[#1e293b] rounded-xl border border-slate-700/50 shadow-xl overflow-hidden group\">\n          {/* Header của Canvas */}\n          <div className=\"px-4 py-2 border-b border-slate-700/50 bg-slate-800/50 flex items-center justify-between\">\n             <h3 className=\"text-sm font-bold text-slate-200 flex items-center gap-2\">\n               {mode === 'mechanical' ? <Waves className=\"w-4 h-4 text-cyan-400\"/> : <Rainbow className=\"w-4 h-4 text-amber-400\"/>}\n               {mode === 'mechanical' ? 'Mô phỏng giao thoa mặt nước' : 'Mô phỏng giao thoa ánh sáng'}\n             </h3>\n             <div className=\"flex gap-2\">\n                <span className=\"w-2 h-2 rounded-full bg-red-500\"></span>\n                <span className=\"w-2 h-2 rounded-full bg-yellow-500\"></span>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n             </div>\n          </div>\n          \n          <div className=\"p-1 bg-[#0f172a] relative\">\n             <canvas ref={canvasRef} width={800} height={340} className=\"w-full rounded-b-lg block\" />\n             <div className=\"absolute bottom-2 right-4 text-[10px] text-slate-600 font-mono pointer-events-none group-hover:text-slate-500 transition-colors\">\n                Hô Hoàng Anh A1K50\n             </div>\n          </div>\n        </div>\n\n        {/* Controls Sóng cơ (Chỉ hiện khi ở chế độ sóng cơ) */}\n        {mode === 'mechanical' && (\n            <div className=\"bg-[#1e293b]/80 backdrop-blur rounded-xl p-3 border border-slate-700/50 flex items-center gap-4 animate-in fade-in slide-in-from-top-2\">\n            <div className=\"flex items-center gap-2\">\n                <button onClick={handleReset} className=\"w-9 h-9 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white flex items-center justify-center transition-all active:scale-95\">\n                    <RotateCcw size={16} />\n                </button>\n                <button onClick={() => handleStep(-1)} className=\"w-9 h-9 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white flex items-center justify-center transition-all active:scale-95\">\n                    <SkipBack size={16} />\n                </button>\n                <button\n                onClick={() => setIsPlaying(!isPlaying)}\n                className={`w-10 h-10 rounded-xl flex items-center justify-center transition-all shadow-lg active:scale-95 ${\n                    isPlaying ? \"bg-amber-500 hover:bg-amber-400 shadow-amber-900/20\" : \"bg-cyan-500 hover:bg-cyan-400 shadow-cyan-500/30\"\n                } text-white`}\n                >\n                {isPlaying ? <Pause size={20} fill=\"currentColor\" /> : <Play size={20} fill=\"currentColor\" className=\"ml-1\" />}\n                </button>\n                <button onClick={() => handleStep(1)} className=\"w-9 h-9 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white flex items-center justify-center transition-all active:scale-95\">\n                    <SkipForward size={16} />\n                </button>\n            </div>\n            <div className=\"flex-1 flex items-center gap-3 bg-slate-800/50 px-3 py-2 rounded-lg\">\n                <span className=\"text-xs text-slate-400 font-mono w-12\">{(time).toFixed(1)}s</span>\n                <input\n                    type=\"range\" min=\"0\" max={MAX_TIME} step=\"0.05\" value={time}\n                    onChange={(e) => { setIsPlaying(false); timeRef.current = Number(e.target.value); setTime(Number(e.target.value)); }}\n                    className=\"flex-1 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500\"\n                />\n            </div>\n            </div>\n        )}\n      </div>\n\n      {/* CỘT PHẢI: BẢNG THAM SỐ */}\n      <div className=\"space-y-4\">\n        {mode === 'mechanical' ? (\n        <>\n            <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50 animate-in fade-in slide-in-from-right-4 shadow-lg\">\n            <h3 className=\"text-cyan-400 font-bold mb-4 flex items-center gap-2 text-sm uppercase tracking-wider border-b border-slate-700/50 pb-2\">\n                <Waves className=\"w-4 h-4\" /> Thông số nguồn\n            </h3>\n            <div className=\"space-y-4\">\n                <div className=\"group\">\n                    <div className=\"flex justify-between text-xs mb-1\">\n                        <label className=\"text-slate-300\">Tần số (f)</label>\n                        <span className=\"text-cyan-400 font-mono\">{mechParams.frequency.toFixed(1)} Hz</span>\n                    </div>\n                    <input type=\"range\" min=\"0.5\" max=\"2.0\" step=\"0.1\" value={mechParams.frequency} onChange={(e) => setMechParams({ ...mechParams, frequency: Number(e.target.value) })} className=\"w-full h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500\" />\n                </div>\n                <div className=\"group\">\n                    <div className=\"flex justify-between text-xs mb-1\">\n                        <label className=\"text-slate-300\">Bước sóng (λ)</label>\n                        <span className=\"text-cyan-400 font-mono\">{mechParams.wavelength} px</span>\n                    </div>\n                    <input type=\"range\" min=\"20\" max=\"80\" step=\"5\" value={mechParams.wavelength} onChange={(e) => setMechParams({ ...mechParams, wavelength: Number(e.target.value) })} className=\"w-full h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500\" />\n                </div>\n                 <div className=\"group\">\n                    <div className=\"flex justify-between text-xs mb-1\">\n                        <label className=\"text-slate-300\">Khoảng cách nguồn</label>\n                        <span className=\"text-cyan-400 font-mono\">{mechParams.sourceDistance} px</span>\n                    </div>\n                    <input type=\"range\" min=\"40\" max=\"250\" step=\"10\" value={mechParams.sourceDistance} onChange={(e) => setMechParams({ ...mechParams, sourceDistance: Number(e.target.value) })} className=\"w-full h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500\" />\n                </div>\n                <div className=\"group\">\n                    <div className=\"flex justify-between text-xs mb-1\">\n                        <label className=\"text-slate-300\">Biên độ nguồn</label>\n                        <span className=\"text-cyan-400 font-mono\">{mechParams.amplitude.toFixed(1)}</span>\n                    </div>\n                    <input type=\"range\" min=\"0.5\" max=\"2.5\" step=\"0.1\" value={mechParams.amplitude} onChange={(e) => setMechParams({ ...mechParams, amplitude: Number(e.target.value) })} className=\"w-full h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500\" />\n                </div>\n            </div>\n            </div>\n\n            <div className=\"bg-[#1e293b] rounded-xl p-4 border border-slate-700/50 shadow-lg\">\n                <h3 className=\"text-cyan-400 font-bold mb-3 text-sm uppercase tracking-wider border-b border-slate-700/50 pb-2\">Hiển thị</h3>\n                <div className=\"space-y-2\">\n                    <label className=\"flex items-center justify-between cursor-pointer group hover:bg-slate-800/50 p-2 rounded transition-colors\">\n                        <span className=\"text-slate-300 text-xs flex items-center gap-2\">\n                            {showNodalLines ? <Eye className=\"w-3 h-3 text-cyan-400\" /> : <EyeOff className=\"w-3 h-3 text-slate-500\" />}\n                            Đường cực tiểu (Nodal)\n                        </span>\n                        <div onClick={() => setShowNodalLines(!showNodalLines)} className={`w-8 h-4 rounded-full transition-all cursor-pointer flex items-center px-0.5 border ${showNodalLines ? \"bg-cyan-600 border-cyan-500\" : \"bg-slate-700 border-slate-600\"}`}>\n                            <div className={`w-3 h-3 bg-white rounded-full shadow-sm transform transition-transform ${showNodalLines ? \"translate-x-4\" : \"translate-x-0\"}`} />\n                        </div>\n                    </label>\n                    <label className=\"flex items-center justify-between cursor-pointer group hover:bg-slate-800/50 p-2 rounded transition-colors\">\n                        <span className=\"text-slate-300 text-xs flex items-center gap-2\">\n                             <Maximize2 className=\"w-3 h-3 text-slate-400\"/>\n                            Chế độ 3D Surface\n                        </span>\n                        {/* SỬA LỖI SVG: Xóa xmlns bị lỗi */}\n                        <div onClick={() => setView3D(!view3D)} className={`w-8 h-4 rounded-full transition-all cursor-pointer flex items-center px-0.5 border ${view3D ? \"bg-cyan-600 border-cyan-500\" : \"bg-slate-700 border-slate-600\"}`}>\n                            <div className={`w-3 h-3 bg-white rounded-full shadow-sm transform transition-transform ${view3D ? \"translate-x-4\" : \"translate-x-0\"}`} />\n                        </div>\n                    </label>\n                </div>\n            </div>\n        </>\n        ) : (\n        <>\n            <div className=\"bg-slate-900 rounded-xl p-4 border border-slate-700 animate-in fade-in slide-in-from-right-4 shadow-lg\">\n                <h3 className=\"text-emerald-400 font-bold mb-4 flex items-center gap-2 text-sm uppercase tracking-wider border-b border-slate-700 pb-2\">\n                    <Zap className=\"w-4 h-4\" /> Điều Khiển\n                </h3>\n                \n                <div className=\"bg-slate-800/50 p-3 rounded-lg mb-4 space-y-1\">\n                    <p className=\"text-[10px] font-bold text-slate-400 mb-2 uppercase tracking-wide\">Chế độ</p>\n                    <label className=\"flex items-center gap-2 cursor-pointer p-1.5 rounded hover:bg-slate-700/50 transition-colors\">\n                        <input type=\"radio\" name=\"lightMode\" checked={lightMode === 'mono'} onChange={() => setLightMode('mono')} className=\"accent-emerald-500 w-3 h-3\" />\n                        <span className={`text-xs ${lightMode === 'mono' ? 'text-white' : 'text-slate-400'}`}>Đơn sắc (<span className=\"font-serif italic\">λ₁</span>)</span>\n                    </label>\n                    <label className=\"flex items-center gap-2 cursor-pointer p-1.5 rounded hover:bg-slate-700/50 transition-colors\">\n                        <input type=\"radio\" name=\"lightMode\" checked={lightMode === 'dual'} onChange={() => setLightMode('dual')} className=\"accent-emerald-500 w-3 h-3\" />\n                        <span className={`text-xs ${lightMode === 'dual' ? 'text-white' : 'text-slate-400'}`}>Hai màu (<span className=\"font-serif italic\">λ₁, λ₂</span>)</span>\n                    </label>\n                    <label className=\"flex items-center gap-2 cursor-pointer p-1.5 rounded hover:bg-slate-700/50 transition-colors\">\n                        <input type=\"radio\" name=\"lightMode\" checked={lightMode === 'white'} onChange={() => setLightMode('white')} className=\"accent-emerald-500 w-3 h-3\" />\n                        <span className={`text-xs ${lightMode === 'white' ? 'text-white' : 'text-slate-400'}`}>Ánh sáng Trắng</span>\n                    </label>\n                </div>\n\n                <div className=\"space-y-4\">\n                    {(lightMode === 'mono' || lightMode === 'dual') && (\n                        <div className=\"group\">\n                            <div className=\"flex justify-between text-xs mb-1\">\n                                <label className=\"text-slate-300\">Bước sóng 1 (λ₁)</label>\n                                <span style={{ color: wavelengthToRGB(lightParams.wavelength1).colorString }} className=\"font-mono font-bold text-xs bg-slate-800 px-1.5 rounded\">\n                                    {lightParams.wavelength1} nm\n                                </span>\n                            </div>\n                            <input type=\"range\" min=\"380\" max=\"750\" step=\"5\" value={lightParams.wavelength1} onChange={(e) => setLightParams({ ...lightParams, wavelength1: Number(e.target.value) })} className=\"w-full h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-emerald-500\" />\n                        </div>\n                    )}\n\n                    {lightMode === 'dual' && (\n                        <div className=\"group\">\n                            <div className=\"flex justify-between text-xs mb-1\">\n                                <label className=\"text-slate-300\">Bước sóng 2 (λ₂)</label>\n                                <span style={{ color: wavelengthToRGB(lightParams.wavelength2).colorString }} className=\"font-mono font-bold text-xs bg-slate-800 px-1.5 rounded\">\n                                    {lightParams.wavelength2} nm\n                                </span>\n                            </div>\n                            <input type=\"range\" min=\"380\" max=\"750\" step=\"5\" value={lightParams.wavelength2} onChange={(e) => setLightParams({ ...lightParams, wavelength2: Number(e.target.value) })} className=\"w-full h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-emerald-500\" />\n                        </div>\n                    )}\n\n                    <div className=\"pt-2 border-t border-slate-700/50 space-y-3\">\n                        <div className=\"group\">\n                            <div className=\"flex justify-between text-xs mb-1\">\n                                <label className=\"text-slate-300\">Khoảng cách a</label>\n                                <span className=\"text-emerald-400 font-mono text-xs\">{lightParams.slitDistance.toFixed(2)} mm</span>\n                            </div>\n                            <input type=\"range\" min=\"0.2\" max=\"2.0\" step=\"0.05\" value={lightParams.slitDistance} onChange={(e) => setLightParams({ ...lightParams, slitDistance: Number(e.target.value) })} className=\"w-full h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-emerald-500\" />\n                        </div>\n\n                        <div className=\"group\">\n                            <div className=\"flex justify-between text-xs mb-1\">\n                                <label className=\"text-slate-300\">Khoảng cách D</label>\n                                <span className=\"text-emerald-400 font-mono text-xs\">{lightParams.screenDistance.toFixed(1)} m</span>\n                            </div>\n                            <input type=\"range\" min=\"1.0\" max=\"4.0\" step=\"0.1\" value={lightParams.screenDistance} onChange={(e) => setLightParams({ ...lightParams, screenDistance: Number(e.target.value) })} className=\"w-full h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-emerald-500\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"bg-emerald-600 rounded-xl p-3 border border-emerald-500 shadow-lg text-white\">\n                <h3 className=\"font-bold mb-2 text-xs flex items-center gap-2 uppercase tracking-wide opacity-90\">\n                    <Disc className=\"w-3 h-3\" /> Kết Quả\n                </h3>\n                \n                {lightMode === 'white' ? (\n                    <div className=\"text-xs space-y-1 opacity-90\">\n                        <p>Dải màu cầu vồng.</p>\n                        <p>Vân trung tâm màu trắng.</p>\n                    </div>\n                ) : (\n                    <div className=\"space-y-2\">\n                        <div className=\"flex justify-between items-end border-b border-emerald-500/50 pb-1\">\n                            <span className=\"text-xs text-emerald-100 opacity-80\">i₁:</span>\n                            <span className=\"font-mono text-lg font-bold leading-none\">{calculateI(lightParams.wavelength1).toFixed(2)} <span className=\"text-[10px] font-normal opacity-70\">mm</span></span>\n                        </div>\n                        {lightMode === 'dual' && (\n                            <div className=\"flex justify-between items-end border-b border-emerald-500/50 pb-1\">\n                                <span className=\"text-xs text-emerald-100 opacity-80\">i₂:</span>\n                                <span className=\"font-mono text-lg font-bold leading-none\">{calculateI(lightParams.wavelength2).toFixed(2)} <span className=\"text-[10px] font-normal opacity-70\">mm</span></span>\n                            </div>\n                        )}\n                    </div>\n                )}\n            </div>\n        </>\n        )}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAHA;;;AAKA,MAAM,WAAW;AAEjB,yBAAyB;AAEzB,wBAAwB;AACxB,IAAI,CAAC,KAAK,IAAI,EAAE;IACd,KAAK,IAAI,GAAG,SAAU,CAAS;QAC7B,OAAO,MAAM,IAAI,IAAI,KAAK,GAAG,CAAC,KAAK;IACrC;AACF;AAEA,6CAA6C;AAC7C,MAAM,kBAAkB,CAAC;IACvB,IAAI,GAAG,GAAG,GAAG;IACb,IAAI,cAAc,OAAO,aAAa,KAAK;QACzC,IAAI,CAAC,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,GAAG;QAAG,IAAI;QAAG,IAAI;IACpD,OAAO,IAAI,cAAc,OAAO,aAAa,KAAK;QAChD,IAAI;QAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,GAAG;QAAG,IAAI;IACnD,OAAO,IAAI,cAAc,OAAO,aAAa,KAAK;QAChD,IAAI;QAAG,IAAI;QAAG,IAAI,CAAC,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,GAAG;IACpD,OAAO,IAAI,cAAc,OAAO,aAAa,KAAK;QAChD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,GAAG;QAAG,IAAI;QAAG,IAAI;IACnD,OAAO,IAAI,cAAc,OAAO,aAAa,KAAK;QAChD,IAAI;QAAG,IAAI,CAAC,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,GAAG;QAAG,IAAI;IACpD,OAAO,IAAI,cAAc,OAAO,aAAa,KAAK;QAChD,IAAI;QAAG,IAAI;QAAG,IAAI;IACpB,OAAO;QACL,IAAI;QAAG,IAAI;QAAG,IAAI;IACpB;IAEA,IAAI,cAAc,OAAO,aAAa,KAAK;QACzC,QAAQ,MAAM,AAAC,MAAM,CAAC,aAAa,GAAG,IAAK,CAAC,MAAM,GAAG;IACvD,OAAO,IAAI,cAAc,OAAO,aAAa,KAAK;QAChD,QAAQ;IACV,OAAO,IAAI,cAAc,OAAO,aAAa,KAAK;QAChD,QAAQ,MAAM,AAAC,MAAM,CAAC,MAAM,UAAU,IAAK,CAAC,MAAM,GAAG;IACvD,OAAO;QACL,QAAQ;IACV;IAEA,OAAO;QACL,GAAG,KAAK,KAAK,CAAC,IAAI,MAAM;QACxB,GAAG,KAAK,KAAK,CAAC,IAAI,MAAM;QACxB,GAAG,KAAK,KAAK,CAAC,IAAI,MAAM;QACxB,aAAa,CAAC,IAAI,EAAE,KAAK,KAAK,CAAC,IAAI,MAAM,OAAO,EAAE,EAAE,KAAK,KAAK,CAAC,IAAI,MAAM,OAAO,EAAE,EAAE,KAAK,KAAK,CAAC,IAAI,MAAM,OAAO,CAAC,CAAC;IACpH;AACF;AAGe,SAAS;;IACtB,MAAM,YAAY,IAAA,uKAAM,EAAoB;IAE5C,cAAc;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAyB;IAEzD,gBAAgB;IAChB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IACrD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;QAC3C,WAAW;QACX,WAAW;QACX,gBAAgB;QAChB,YAAY;IACd;IAEA,sBAAsB;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAA4B;IACtE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;QAC7C,aAAa;QACb,aAAa;QACb,cAAc;QACd,gBAAgB;IAClB;IAEA,MAAM,eAAe,IAAA,uKAAM;IAC3B,MAAM,UAAU,IAAA,uKAAM,EAAC;IAEvB,wBAAwB;IACxB,MAAM,QAAQ,IAAI,KAAK,EAAE,GAAG,WAAW,SAAS;IAChD,MAAM,SAAS,AAAC,IAAI,KAAK,EAAE,GAAI,WAAW,UAAU;IACpD,MAAM,KAAK,IAAI;IAEf,MAAM,sBAAsB,IAAA,4KAAW;6DACrC,CAAC,GAAW,GAAW,KAAa,KAAa,KAAa,KAAa;YACzE,MAAM,KAAK,KAAK,IAAI,CAAC,CAAC,IAAI,GAAG,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK;YACnD,MAAM,KAAK,KAAK,IAAI,CAAC,CAAC,IAAI,GAAG,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK;YACnD,MAAM,OAAO,WAAW,SAAS,GAAG,KAAK,IAAI,CAAC,IAAI,KAAK;YACvD,MAAM,OAAO,WAAW,SAAS,GAAG,KAAK,IAAI,CAAC,IAAI,KAAK;YAEvD,MAAM,QAAQ,OAAO,KAAK,GAAG,CAAC,SAAS,KAAK,QAAQ;YACpD,MAAM,QAAQ,OAAO,KAAK,GAAG,CAAC,SAAS,KAAK,QAAQ;YACpD,OAAO,QAAQ;QACjB;4DACA;QAAC;QAAQ;QAAO,WAAW,SAAS;KAAC;IAGvC,MAAM,qBAAqB,IAAA,4KAAW;4DACpC,CAAC,OAAe,QAAgB,KAAa,KAAa,KAAa,KAAa;YAClF,MAAM,SAAqC,EAAE;YAC7C,MAAM,WAAW,CAAC,QAAQ,GAAG,IAAI,WAAW,UAAU;YACtD,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,KAAK,EAAG;gBACjC,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,KAAK,EAAG;oBAClC,MAAM,KAAK,KAAK,IAAI,CAAC,CAAC,IAAI,GAAG,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK;oBACnD,MAAM,KAAK,KAAK,IAAI,CAAC,CAAC,IAAI,GAAG,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK;oBACnD,IAAI,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,KAAK,MAAM,YAAY,KAAK,OAAO,IAAI,CAAC;wBAAE;wBAAG;oBAAE;gBACvE;YACF;YACA,OAAO;QACT;2DACA;QAAC,WAAW,UAAU;KAAC;IAGzB,MAAM,iBAAiB,IAAA,4KAAW;wDAChC,CAAC,KAA+B;YAC9B,MAAM,QAAQ,IAAI,MAAM,CAAC,KAAK;YAC9B,MAAM,SAAS,IAAI,MAAM,CAAC,MAAM;YAChC,MAAM,UAAU,SAAS;YACzB,MAAM,UAAU;gBAAE,GAAG;gBAAI,GAAG,UAAU,WAAW,cAAc,GAAG;YAAE;YACpE,MAAM,UAAU;gBAAE,GAAG;gBAAI,GAAG,UAAU,WAAW,cAAc,GAAG;YAAE;YAEpE,MAAM,YAAY,IAAI,eAAe,CAAC,OAAO;YAC7C,MAAM,OAAO,UAAU,IAAI;YAC3B,MAAM,aAAa,SAAS,IAAI;YAEhC,IAAI,QAAQ;gBACV,IAAI,SAAS,GAAG;gBAAW,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO;gBACrD,MAAM,mBAAmB;gBAAK,MAAM,WAAW,SAAS;gBAAK,MAAM,cAAc;gBACjF,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,KAAK,KAAK,YAAa;oBAClD,MAAM,SAAS,WAAW,IAAI;oBAAkB,IAAI,SAAS,QAAQ;oBACrE,MAAM,QAAQ,MAAM,AAAC,IAAI,CAAC,SAAS,GAAG,IAAK;oBAC3C,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,KAAK,YAAa;wBAC3C,MAAM,SAAS,CAAC,IAAI,QAAQ,CAAC,IAAI,QAAQ,QAAQ;wBAAG,MAAM,SAAS;wBACnE,MAAM,aAAa,oBAAoB,QAAQ,QAAQ,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE;wBACnG,MAAM,mBAAmB,CAAC,aAAa,IAAI,WAAW,SAAS,IAAI,CAAC,IAAI,WAAW,SAAS;wBAC5F,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,mBAAmB;wBAAK,MAAM,IAAI,KAAK,KAAK,CAAC,MAAM,mBAAmB;wBAAM,MAAM,IAAI,KAAK,KAAK,CAAC,MAAM,mBAAmB;wBACpJ,MAAM,UAAU,QAAQ,IAAI,CAAC,IAAI,QAAQ,CAAC,IAAI;wBAAO,MAAM,UAAU,SAAS,aAAa,KAAK;wBAChG,IAAI,SAAS,GAAG,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;wBAAE,IAAI,QAAQ,CAAC,UAAU,GAAG,UAAU,GAAG,GAAG;oBACrF;gBACF;YACF,OAAO;gBACL,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,KAAK,WAAY;oBAC3C,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,KAAK,WAAY;wBAC1C,MAAM,aAAa,oBAAoB,GAAG,GAAG,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE;wBACzF,MAAM,SAAS,IAAI,WAAW,SAAS,GAAG;wBAC1C,MAAM,mBAAmB,CAAC,aAAa,MAAM,IAAI,CAAC,IAAI,MAAM;wBAC5D,IAAI,GAAG,GAAG;wBACV,IAAI,mBAAmB,KAAK;4BAC1B,MAAM,YAAY,CAAC,mBAAmB,GAAG,IAAI;4BAC7C,IAAI,KAAK,KAAK,CAAC,KAAK,YAAY;4BAAM,IAAI,KAAK,KAAK,CAAC,MAAM,YAAY;4BAAM,IAAI,KAAK,KAAK,CAAC,MAAM,YAAY;wBAChH,OAAO;4BACL,MAAM,YAAY,mBAAmB;4BACrC,IAAI,KAAK,KAAK,CAAC,IAAI,YAAY;4BAAK,IAAI,KAAK,KAAK,CAAC,KAAK,YAAY;4BAAM,IAAI,KAAK,KAAK,CAAC,KAAK,YAAY;wBAC5G;wBACA,IAAK,IAAI,KAAK,GAAG,KAAK,cAAc,IAAI,KAAK,QAAQ,KAAM;4BACzD,IAAK,IAAI,KAAK,GAAG,KAAK,cAAc,IAAI,KAAK,OAAO,KAAM;gCACxD,MAAM,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI;gCAC5C,IAAI,CAAC,IAAI,GAAG;gCAAG,IAAI,CAAC,MAAM,EAAE,GAAG;gCAAG,IAAI,CAAC,MAAM,EAAE,GAAG;gCAAG,IAAI,CAAC,MAAM,EAAE,GAAG;4BACvE;wBACF;oBACF;gBACF;gBACA,IAAI,YAAY,CAAC,WAAW,GAAG;YACjC;YAEA,IAAI,kBAAkB,CAAC,QAAQ;gBAC7B,IAAI,WAAW,GAAG;gBAA4B,IAAI,SAAS,GAAG;gBAAG,IAAI,WAAW,CAAC;oBAAC;oBAAG;iBAAE;gBACvF,MAAM,WAAW,KAAK,KAAK,CAAC,WAAW,cAAc,GAAG,WAAW,UAAU,IAAI;gBACjF,IAAK,IAAI,QAAQ,GAAG,SAAS,UAAU,QAAS;oBAC9C,MAAM,SAAS,mBAAmB,OAAO,QAAQ,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE;oBAC7F,IAAI,OAAO,MAAM,GAAG,GAAG;wBACrB,MAAM,cAAc,OAAO,MAAM;wFAAC,CAAC,IAAM,EAAE,CAAC,GAAG;uFAAS,IAAI;wFAAC,CAAC,GAAG,IAAM,EAAE,CAAC,GAAG,EAAE,CAAC;;wBAChF,MAAM,cAAc,OAAO,MAAM;wFAAC,CAAC,IAAM,EAAE,CAAC,IAAI;uFAAS,IAAI;wFAAC,CAAC,GAAG,IAAM,EAAE,CAAC,GAAG,EAAE,CAAC;;wBACjF,IAAI,YAAY,MAAM,GAAG,GAAG;4BAAE,IAAI,SAAS;4BAAI,IAAI,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;4BAAG,IAAK,IAAI,IAAI,GAAG,IAAI,YAAY,MAAM,EAAE,IAAK,IAAI,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;4BAAG,IAAI,MAAM;wBAAI;wBAC1M,IAAI,YAAY,MAAM,GAAG,GAAG;4BAAE,IAAI,SAAS;4BAAI,IAAI,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;4BAAG,IAAK,IAAI,IAAI,GAAG,IAAI,YAAY,MAAM,EAAE,IAAK,IAAI,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;4BAAG,IAAI,MAAM;wBAAI;oBAC5M;gBACF;gBACA,IAAI,WAAW,GAAG;gBAA4B,IAAI,WAAW,CAAC;oBAAC;oBAAG;iBAAE;gBAAG,IAAI,SAAS;gBAAI,IAAI,MAAM,CAAC,QAAQ,CAAC,EAAE;gBAAU,IAAI,MAAM,CAAC,OAAO;gBAAU,IAAI,MAAM;gBAAI,IAAI,WAAW,CAAC,EAAE;YACtL;YAEA,IAAG,CAAC,QAAQ;gBACR,MAAM;+EAAa,CAAC,GAAW,GAAW;wBACtC,MAAM,WAAW,IAAI,oBAAoB,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG;wBACzD,SAAS,YAAY,CAAC,GAAG;wBAAyB,SAAS,YAAY,CAAC,GAAG;wBAC3E,IAAI,SAAS,GAAG;wBAAU,IAAI,SAAS;wBAAI,IAAI,GAAG,CAAC,GAAG,GAAG,IAAI,GAAG,IAAI,KAAK,EAAE;wBAAG,IAAI,IAAI;wBACtF,IAAI,SAAS,GAAG;wBAAQ,IAAI,SAAS;wBAAI,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,KAAK,EAAE;wBAAG,IAAI,IAAI;wBACnF,IAAI,SAAS,GAAG;wBAAQ,IAAI,IAAI,GAAG;wBAAuB,IAAI,QAAQ,CAAC,OAAO,IAAI,IAAI,IAAI;oBAC9F;;gBACA,WAAW,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE;gBAAO,WAAW,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE;YAC7E;QACF;uDACA;QAAC;QAAY;QAAQ;QAAgB;QAAqB;KAAmB;IAG/E,oCAAoC;IACpC,MAAM,YAAY,IAAA,4KAAW;mDAAC,CAAC;YAC7B,MAAM,QAAQ,IAAI,MAAM,CAAC,KAAK;YAC9B,MAAM,SAAS,IAAI,MAAM,CAAC,MAAM;YAChC,MAAM,UAAU,QAAQ;YAExB,UAAU;YACV,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO;YAE1B,MAAM,IAAI,YAAY,YAAY,GAAG;YACrC,MAAM,IAAI,YAAY,cAAc;YACpC,MAAM,sBAAsB;YAC5B,MAAM,iBAAiB,QAAQ;YAE/B,IAAI,cAAwD,EAAE;YAE9D,IAAI,cAAc,QAAQ;gBACtB,YAAY,IAAI,CAAC;oBAAE,IAAI,YAAY,WAAW;oBAAE,gBAAgB;gBAAI;YACxE,OAAO,IAAI,cAAc,QAAQ;gBAC7B,YAAY,IAAI,CAAC;oBAAE,IAAI,YAAY,WAAW;oBAAE,gBAAgB;gBAAI;gBACpE,YAAY,IAAI,CAAC;oBAAE,IAAI,YAAY,WAAW;oBAAE,gBAAgB;gBAAI;YACxE,OAAO,IAAI,cAAc,SAAS;gBAC9B,IAAK,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,GAAI;oBACjC,IAAI,QAAQ;oBACZ,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ;oBAChC,YAAY,IAAI,CAAC;wBAAE,IAAI;wBAAG,gBAAgB,QAAQ;oBAAK;gBAC3D;YACJ;YAEA,MAAM,YAAY,IAAI,eAAe,CAAC,OAAO;YAC7C,MAAM,OAAO,UAAU,IAAI;YAE3B,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,IAAK;gBAC9B,MAAM,YAAY,CAAC,IAAI,OAAO,IAAI;gBAClC,IAAI,SAAS,GAAG,SAAS,GAAG,SAAS;gBAErC,KAAK,MAAM,OAAO,YAAa;oBAC3B,MAAM,SAAS,IAAI,EAAE,GAAG;oBACxB,MAAM,kBAAkB,AAAC,IAAI,KAAK,EAAE,GAAG,IAAI,YAAa,CAAC,SAAS,CAAC;oBACnE,IAAI,YAAY,KAAK,GAAG,CAAC,kBAAkB,MAAM;oBAEjD,+EAA+E;oBAC/E,MAAM,YAAY,IAAI;oBACtB,MAAM,mBAAmB,AAAC,KAAK,EAAE,GAAG,YAAY,YAAa,CAAC,SAAS,CAAC;oBACxE,MAAM,oBAAoB,KAAK,IAAI,CAAC,qBAAqB;oBACzD,YAAY,YAAY,oBAAoB,IAAI,cAAc;oBAE9D,MAAM,MAAM,gBAAgB,IAAI,EAAE;oBAClC,UAAU,IAAI,CAAC,GAAG;oBAClB,UAAU,IAAI,CAAC,GAAG;oBAClB,UAAU,IAAI,CAAC,GAAG;gBACtB;gBAEA,SAAS,KAAK,GAAG,CAAC,KAAK;gBACvB,SAAS,KAAK,GAAG,CAAC,KAAK;gBACvB,SAAS,KAAK,GAAG,CAAC,KAAK;gBAEvB,qDAAqD;gBACrD,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,IAAK;oBAC/B,MAAM,MAAM,CAAC,IAAI,QAAQ,CAAC,IAAI;oBAC9B,iBAAiB;oBACjB,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK,GAAG,IAAI;oBACtC,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,KAAK,SAAS;oBAC/C,IAAI,CAAC,MAAM,EAAE,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,KAAK,SAAS;oBACnD,IAAI,CAAC,MAAM,EAAE,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,KAAK,SAAS;oBACnD,IAAI,CAAC,MAAM,EAAE,GAAG;gBAClB;YACF;YACA,IAAI,YAAY,CAAC,WAAW,GAAG;YAE/B,yCAAyC;YACzC,IAAI,IAAI;YACR,IAAI,WAAW,GAAG;YAClB,IAAI,WAAW,CAAC;gBAAC;gBAAG;aAAE;YACtB,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,MAAM,CAAC,SAAS;YACpB,IAAI,MAAM,CAAC,SAAS;YACpB,IAAI,MAAM;YAEV,IAAI,SAAS,GAAG;YAChB,IAAI,IAAI,GAAG;YACX,IAAI,SAAS,GAAG;YAEhB,+BAA+B;YAC/B,MAAM,QAAQ;YACd,MAAM,YAAY,IAAI,WAAW,CAAC,OAAO,KAAK;YAC9C,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,UAAU,YAAU,IAAI,GAAG,IAAI,YAAY,IAAI;YAC5D,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,OAAO,SAAS;YAC7B,IAAI,OAAO;YAEX,sBAAsB;YACtB,IAAI,cAAc,SAAS;gBACvB,MAAM,WAAW,AAAC,YAAY,WAAW,GAAG,OAAO,IAAK;gBACxD,MAAM,WAAW,WAAW;gBAE5B,IAAI,SAAS,GAAG;gBAChB,MAAM,UAAU,SAAS;gBAEzB,IAAI,WAAW,MAAM,WAAW,QAAM,GAAG;oBACrC,MAAM,eAAe,UAAU;oBAC/B,MAAM,SAAS,gBAAgB,YAAY,WAAW,EAAE,WAAW;oBAEnE,IAAI,WAAW,GAAG;oBAAyB,IAAI,SAAS,GAAG;oBAAyB,IAAI,SAAS,GAAG;oBAEpG,IAAI,SAAS;oBAAI,IAAI,MAAM,CAAC,SAAS;oBAAU,IAAI,MAAM,CAAC,cAAc;oBAAU,IAAI,MAAM;oBAC5F,IAAI,SAAS;oBAAI,IAAI,MAAM,CAAC,UAAQ,GAAG,UAAQ;oBAAI,IAAI,MAAM,CAAC,SAAS;oBAAU,IAAI,MAAM,CAAC,UAAQ,GAAG,UAAQ;oBAAI,IAAI,IAAI;oBAC3H,IAAI,SAAS;oBAAI,IAAI,MAAM,CAAC,eAAa,GAAG,UAAQ;oBAAI,IAAI,MAAM,CAAC,cAAc;oBAAU,IAAI,MAAM,CAAC,eAAa,GAAG,UAAQ;oBAAI,IAAI,IAAI;oBAE1I,IAAI,IAAI,GAAG;oBACX,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC,WAAW,IAAI,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC;oBACrD,MAAM,YAAY,IAAI,WAAW,CAAC,MAAM,KAAK;oBAC7C,IAAI,SAAS,GAAG;oBAAmB,IAAI,QAAQ,CAAC,UAAU,WAAS,IAAI,YAAU,IAAI,GAAG,UAAU,IAAI,YAAY,GAAG;oBACrH,IAAI,SAAS,GAAG;oBAAQ,IAAI,QAAQ,CAAC,MAAM,UAAU,WAAS,GAAG,UAAU;gBAC/E;YACJ;YACA,IAAI,SAAS,GAAG;QAClB;kDAAG;QAAC;QAAa;KAAU;IAG3B,yBAAyB;IACzB,MAAM,UAAU,IAAA,4KAAW;iDAAC;YAC1B,MAAM,MAAM,UAAU,OAAO,EAAE,WAAW;YAC1C,IAAI,CAAC,KAAK;YAEV,IAAI,SAAS,cAAc;gBACvB,QAAQ,OAAO,IAAI;gBACnB,IAAI,QAAQ,OAAO,GAAG,UAAU,QAAQ,OAAO,GAAG;gBAClD,QAAQ,QAAQ,OAAO;gBACvB,eAAe,KAAK,QAAQ,OAAO;gBACnC,IAAI,aAAa,QAAQ,OAAO,GAAG,UAAU;oBACzC,aAAa,OAAO,GAAG,sBAAsB;gBACjD,OAAO,IAAI,QAAQ,OAAO,IAAI,UAAU;oBACpC,aAAa;gBACjB;YACJ,OAAO;gBACH,UAAU;YACd;QACF;gDAAG;QAAC;QAAW;QAAgB;QAAW;QAAM;KAAG;IAEnD,IAAA,0KAAS;sCAAC;YACR,IAAI,aAAa,SAAS,cAAc;gBACtC,aAAa,OAAO,GAAG,sBAAsB;YAC/C;YACA;8CAAO;oBAAQ,IAAI,aAAa,OAAO,EAAE,qBAAqB,aAAa,OAAO;gBAAE;;QACtF;qCAAG;QAAC;QAAW;QAAS;KAAK;IAE7B,IAAA,0KAAS;sCAAC;YACR,MAAM,MAAM,UAAU,OAAO,EAAE,WAAW;YAC1C,IAAI,CAAC,KAAK;YACV,IAAI,SAAS,cAAc;gBACvB,eAAe,KAAK,QAAQ,OAAO;YACvC,OAAO;gBACH,UAAU;YACd;QACF;qCAAG;QAAC;QAAY;QAAQ;QAAgB;QAAa;QAAW;QAAM;QAAgB;KAAU;IAEhG,MAAM,cAAc;QAClB,IAAI,SAAS,cAAc;QAC3B,aAAa;QAAQ,QAAQ,OAAO,GAAG;QAAG,QAAQ;QAClD,UAAU,OAAO,EAAE,WAAW,SAAS,eAAe,UAAU,OAAO,CAAC,UAAU,CAAC,OAAQ;IAC7F;IACA,MAAM,aAAa,CAAC;QAClB,IAAI,SAAS,cAAc;QAC3B,aAAa;QACb,QAAQ,OAAO,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,UAAU,QAAQ,OAAO,GAAG,KAAK,YAAY;QACpF,QAAQ,QAAQ,OAAO;QACvB,UAAU,OAAO,EAAE,WAAW,SAAS,eAAe,UAAU,OAAO,CAAC,UAAU,CAAC,OAAQ,QAAQ,OAAO;IAC5G;IAEA,MAAM,aAAa,CAAC,KAAe,AAAC,KAAK,OAAO,YAAY,cAAc,GAAI,CAAC,YAAY,YAAY,GAAG,IAAI,IAAI;IAElH,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCACG,SAAS;oCAAQ,QAAQ;oCAAe,aAAa;gCAAQ;gCAC7D,WAAW,CAAC,8EAA8E,EAAE,SAAS,eAAe,qEAAqE,yDAAyD;;kDAElP,6LAAC,gNAAK;wCAAC,MAAM;wCAAI,WAAW,SAAS,eAAe,kBAAkB;;;;;;oCAAM;;;;;;;0CAEhF,6LAAC;gCACG,SAAS;oCAAQ,QAAQ;oCAAU,aAAa;gCAAQ;gCACxD,WAAW,CAAC,8EAA8E,EAAE,SAAS,UAAU,uEAAuE,yDAAyD;;kDAE/O,6LAAC,0MAAG;wCAAC,MAAM;wCAAI,WAAW,SAAS,UAAU,sBAAsB;;;;;;oCAAK;;;;;;;;;;;;;kCAKhF,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;gCAAI,WAAU;;kDACZ,6LAAC;wCAAG,WAAU;;4CACX,SAAS,6BAAe,6LAAC,gNAAK;gDAAC,WAAU;;;;;qEAA4B,6LAAC,sNAAO;gDAAC,WAAU;;;;;;4CACxF,SAAS,eAAe,gCAAgC;;;;;;;kDAE3D,6LAAC;wCAAI,WAAU;;0DACZ,6LAAC;gDAAK,WAAU;;;;;;0DAChB,6LAAC;gDAAK,WAAU;;;;;;0DAChB,6LAAC;gDAAK,WAAU;;;;;;;;;;;;;;;;;;0CAItB,6LAAC;gCAAI,WAAU;;kDACZ,6LAAC;wCAAO,KAAK;wCAAW,OAAO;wCAAK,QAAQ;wCAAK,WAAU;;;;;;kDAC3D,6LAAC;wCAAI,WAAU;kDAAkI;;;;;;;;;;;;;;;;;;oBAOrJ,SAAS,8BACN,6LAAC;wBAAI,WAAU;;0CACf,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAO,SAAS;wCAAa,WAAU;kDACpC,cAAA,6LAAC,gOAAS;4CAAC,MAAM;;;;;;;;;;;kDAErB,6LAAC;wCAAO,SAAS,IAAM,WAAW,CAAC;wCAAI,WAAU;kDAC7C,cAAA,6LAAC,6NAAQ;4CAAC,MAAM;;;;;;;;;;;kDAEpB,6LAAC;wCACD,SAAS,IAAM,aAAa,CAAC;wCAC7B,WAAW,CAAC,+FAA+F,EACvG,YAAY,wDAAwD,mDACvE,WAAW,CAAC;kDAEZ,0BAAY,6LAAC,gNAAK;4CAAC,MAAM;4CAAI,MAAK;;;;;iEAAoB,6LAAC,6MAAI;4CAAC,MAAM;4CAAI,MAAK;4CAAe,WAAU;;;;;;;;;;;kDAErG,6LAAC;wCAAO,SAAS,IAAM,WAAW;wCAAI,WAAU;kDAC5C,cAAA,6LAAC,sOAAW;4CAAC,MAAM;;;;;;;;;;;;;;;;;0CAG3B,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;;4CAA0C,KAAM,OAAO,CAAC;4CAAG;;;;;;;kDAC3E,6LAAC;wCACG,MAAK;wCAAQ,KAAI;wCAAI,KAAK;wCAAU,MAAK;wCAAO,OAAO;wCACvD,UAAU,CAAC;4CAAQ,aAAa;4CAAQ,QAAQ,OAAO,GAAG,OAAO,EAAE,MAAM,CAAC,KAAK;4CAAG,QAAQ,OAAO,EAAE,MAAM,CAAC,KAAK;wCAAI;wCACnH,WAAU;;;;;;;;;;;;;;;;;;;;;;;;0BAQxB,6LAAC;gBAAI,WAAU;0BACZ,SAAS,6BACV;;sCACI,6LAAC;4BAAI,WAAU;;8CACf,6LAAC;oCAAG,WAAU;;sDACV,6LAAC,gNAAK;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAEjC,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAM,WAAU;sEAAiB;;;;;;sEAClC,6LAAC;4DAAK,WAAU;;gEAA2B,WAAW,SAAS,CAAC,OAAO,CAAC;gEAAG;;;;;;;;;;;;;8DAE/E,6LAAC;oDAAM,MAAK;oDAAQ,KAAI;oDAAM,KAAI;oDAAM,MAAK;oDAAM,OAAO,WAAW,SAAS;oDAAE,UAAU,CAAC,IAAM,cAAc;4DAAE,GAAG,UAAU;4DAAE,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;wDAAE;oDAAI,WAAU;;;;;;;;;;;;sDAEpL,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAM,WAAU;sEAAiB;;;;;;sEAClC,6LAAC;4DAAK,WAAU;;gEAA2B,WAAW,UAAU;gEAAC;;;;;;;;;;;;;8DAErE,6LAAC;oDAAM,MAAK;oDAAQ,KAAI;oDAAK,KAAI;oDAAK,MAAK;oDAAI,OAAO,WAAW,UAAU;oDAAE,UAAU,CAAC,IAAM,cAAc;4DAAE,GAAG,UAAU;4DAAE,YAAY,OAAO,EAAE,MAAM,CAAC,KAAK;wDAAE;oDAAI,WAAU;;;;;;;;;;;;sDAEjL,6LAAC;4CAAI,WAAU;;8DACZ,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAM,WAAU;sEAAiB;;;;;;sEAClC,6LAAC;4DAAK,WAAU;;gEAA2B,WAAW,cAAc;gEAAC;;;;;;;;;;;;;8DAEzE,6LAAC;oDAAM,MAAK;oDAAQ,KAAI;oDAAK,KAAI;oDAAM,MAAK;oDAAK,OAAO,WAAW,cAAc;oDAAE,UAAU,CAAC,IAAM,cAAc;4DAAE,GAAG,UAAU;4DAAE,gBAAgB,OAAO,EAAE,MAAM,CAAC,KAAK;wDAAE;oDAAI,WAAU;;;;;;;;;;;;sDAE5L,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAM,WAAU;sEAAiB;;;;;;sEAClC,6LAAC;4DAAK,WAAU;sEAA2B,WAAW,SAAS,CAAC,OAAO,CAAC;;;;;;;;;;;;8DAE5E,6LAAC;oDAAM,MAAK;oDAAQ,KAAI;oDAAM,KAAI;oDAAM,MAAK;oDAAM,OAAO,WAAW,SAAS;oDAAE,UAAU,CAAC,IAAM,cAAc;4DAAE,GAAG,UAAU;4DAAE,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;wDAAE;oDAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;sCAKxL,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;8CAAkG;;;;;;8CAChH,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAM,WAAU;;8DACb,6LAAC;oDAAK,WAAU;;wDACX,+BAAiB,6LAAC,0MAAG;4DAAC,WAAU;;;;;iFAA6B,6LAAC,uNAAM;4DAAC,WAAU;;;;;;wDAA4B;;;;;;;8DAGhH,6LAAC;oDAAI,SAAS,IAAM,kBAAkB,CAAC;oDAAiB,WAAW,CAAC,mFAAmF,EAAE,iBAAiB,gCAAgC,iCAAiC;8DACvO,cAAA,6LAAC;wDAAI,WAAW,CAAC,uEAAuE,EAAE,iBAAiB,kBAAkB,iBAAiB;;;;;;;;;;;;;;;;;sDAGtJ,6LAAC;4CAAM,WAAU;;8DACb,6LAAC;oDAAK,WAAU;;sEACX,6LAAC,gOAAS;4DAAC,WAAU;;;;;;wDAA0B;;;;;;;8DAIpD,6LAAC;oDAAI,SAAS,IAAM,UAAU,CAAC;oDAAS,WAAW,CAAC,mFAAmF,EAAE,SAAS,gCAAgC,iCAAiC;8DAC/M,cAAA,6LAAC;wDAAI,WAAW,CAAC,uEAAuE,EAAE,SAAS,kBAAkB,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iDAO1J;;sCACI,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;;sDACV,6LAAC,0MAAG;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAG/B,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAE,WAAU;sDAAoE;;;;;;sDACjF,6LAAC;4CAAM,WAAU;;8DACb,6LAAC;oDAAM,MAAK;oDAAQ,MAAK;oDAAY,SAAS,cAAc;oDAAQ,UAAU,IAAM,aAAa;oDAAS,WAAU;;;;;;8DACpH,6LAAC;oDAAK,WAAW,CAAC,QAAQ,EAAE,cAAc,SAAS,eAAe,kBAAkB;;wDAAE;sEAAS,6LAAC;4DAAK,WAAU;sEAAoB;;;;;;wDAAS;;;;;;;;;;;;;sDAEhJ,6LAAC;4CAAM,WAAU;;8DACb,6LAAC;oDAAM,MAAK;oDAAQ,MAAK;oDAAY,SAAS,cAAc;oDAAQ,UAAU,IAAM,aAAa;oDAAS,WAAU;;;;;;8DACpH,6LAAC;oDAAK,WAAW,CAAC,QAAQ,EAAE,cAAc,SAAS,eAAe,kBAAkB;;wDAAE;sEAAS,6LAAC;4DAAK,WAAU;sEAAoB;;;;;;wDAAa;;;;;;;;;;;;;sDAEpJ,6LAAC;4CAAM,WAAU;;8DACb,6LAAC;oDAAM,MAAK;oDAAQ,MAAK;oDAAY,SAAS,cAAc;oDAAS,UAAU,IAAM,aAAa;oDAAU,WAAU;;;;;;8DACtH,6LAAC;oDAAK,WAAW,CAAC,QAAQ,EAAE,cAAc,UAAU,eAAe,kBAAkB;8DAAE;;;;;;;;;;;;;;;;;;8CAI/F,6LAAC;oCAAI,WAAU;;wCACV,CAAC,cAAc,UAAU,cAAc,MAAM,mBAC1C,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAM,WAAU;sEAAiB;;;;;;sEAClC,6LAAC;4DAAK,OAAO;gEAAE,OAAO,gBAAgB,YAAY,WAAW,EAAE,WAAW;4DAAC;4DAAG,WAAU;;gEACnF,YAAY,WAAW;gEAAC;;;;;;;;;;;;;8DAGjC,6LAAC;oDAAM,MAAK;oDAAQ,KAAI;oDAAM,KAAI;oDAAM,MAAK;oDAAI,OAAO,YAAY,WAAW;oDAAE,UAAU,CAAC,IAAM,eAAe;4DAAE,GAAG,WAAW;4DAAE,aAAa,OAAO,EAAE,MAAM,CAAC,KAAK;wDAAE;oDAAI,WAAU;;;;;;;;;;;;wCAI5L,cAAc,wBACX,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAM,WAAU;sEAAiB;;;;;;sEAClC,6LAAC;4DAAK,OAAO;gEAAE,OAAO,gBAAgB,YAAY,WAAW,EAAE,WAAW;4DAAC;4DAAG,WAAU;;gEACnF,YAAY,WAAW;gEAAC;;;;;;;;;;;;;8DAGjC,6LAAC;oDAAM,MAAK;oDAAQ,KAAI;oDAAM,KAAI;oDAAM,MAAK;oDAAI,OAAO,YAAY,WAAW;oDAAE,UAAU,CAAC,IAAM,eAAe;4DAAE,GAAG,WAAW;4DAAE,aAAa,OAAO,EAAE,MAAM,CAAC,KAAK;wDAAE;oDAAI,WAAU;;;;;;;;;;;;sDAI7L,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAI,WAAU;;8EACX,6LAAC;oEAAM,WAAU;8EAAiB;;;;;;8EAClC,6LAAC;oEAAK,WAAU;;wEAAsC,YAAY,YAAY,CAAC,OAAO,CAAC;wEAAG;;;;;;;;;;;;;sEAE9F,6LAAC;4DAAM,MAAK;4DAAQ,KAAI;4DAAM,KAAI;4DAAM,MAAK;4DAAO,OAAO,YAAY,YAAY;4DAAE,UAAU,CAAC,IAAM,eAAe;oEAAE,GAAG,WAAW;oEAAE,cAAc,OAAO,EAAE,MAAM,CAAC,KAAK;gEAAE;4DAAI,WAAU;;;;;;;;;;;;8DAG9L,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAI,WAAU;;8EACX,6LAAC;oEAAM,WAAU;8EAAiB;;;;;;8EAClC,6LAAC;oEAAK,WAAU;;wEAAsC,YAAY,cAAc,CAAC,OAAO,CAAC;wEAAG;;;;;;;;;;;;;sEAEhG,6LAAC;4DAAM,MAAK;4DAAQ,KAAI;4DAAM,KAAI;4DAAM,MAAK;4DAAM,OAAO,YAAY,cAAc;4DAAE,UAAU,CAAC,IAAM,eAAe;oEAAE,GAAG,WAAW;oEAAE,gBAAgB,OAAO,EAAE,MAAM,CAAC,KAAK;gEAAE;4DAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAM7M,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;;sDACV,6LAAC,6MAAI;4CAAC,WAAU;;;;;;wCAAY;;;;;;;gCAG/B,cAAc,wBACX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;sDAAE;;;;;;sDACH,6LAAC;sDAAE;;;;;;;;;;;yDAGP,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAK,WAAU;8DAAsC;;;;;;8DACtD,6LAAC;oDAAK,WAAU;;wDAA4C,WAAW,YAAY,WAAW,EAAE,OAAO,CAAC;wDAAG;sEAAC,6LAAC;4DAAK,WAAU;sEAAqC;;;;;;;;;;;;;;;;;;wCAEpK,cAAc,wBACX,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAK,WAAU;8DAAsC;;;;;;8DACtD,6LAAC;oDAAK,WAAU;;wDAA4C,WAAW,YAAY,WAAW,EAAE,OAAO,CAAC;wDAAG;sEAAC,6LAAC;4DAAK,WAAU;sEAAqC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWjM;GAhjBwB;KAAA"}},
    {"offset": {"line": 8491, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/experiments/standing-waves.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Play, Pause, RefreshCw, Info, Settings } from 'lucide-react';\n\nconst StandingWaveSim = () => {\n  // --- State Configuration ---\n  // Physical parameters\n  const [length, setLength] = useState(1.0); // Length (m)\n  const [amplitude, setAmplitude] = useState(0.5); // Amplitude (relative units)\n  const [tension, setTension] = useState(50); // Tension (N)\n  const [linearDensity, setLinearDensity] = useState(0.01); // kg/m\n  const [harmonics, setHarmonics] = useState(3); // n (number of antinodes/bụng)\n  \n  // Simulation state\n  const [isPlaying, setIsPlaying] = useState(true);\n  const [time, setTime] = useState(0);\n\n  // Canvas Refs\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const animationRef = useRef<number>();\n\n  // --- Physics Calculations ---\n  // Wave speed v = sqrt(T / mu)\n  const waveSpeed = Math.sqrt(tension / linearDensity);\n  \n  // Wavelength lambda = 2L / n\n  const wavelength = (2 * length) / harmonics;\n  \n  // Frequency f = v / lambda\n  const frequency = waveSpeed / wavelength;\n  \n  // Angular frequency omega = 2 * pi * f\n  const omega = 2 * Math.PI * frequency;\n\n  // Wave Number k = 2 * pi / lambda\n  const k = (2 * Math.PI) / wavelength;\n\n  // --- Animation Loop ---\n  const animate = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Canvas dimensions\n    const width = canvas.width;\n    const height = canvas.height;\n    const centerY = height / 2;\n    \n    // Scale factor to fit the string length into the canvas width\n    // Leave some padding (50px) on each side\n    const padding = 60;\n    const drawWidth = width - 2 * padding;\n    const pxPerMeter = drawWidth / length;\n\n    // Clear canvas\n    ctx.clearRect(0, 0, width, height);\n\n    // 1. Draw Grid/Background\n    ctx.strokeStyle = '#e5e7eb';\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    for (let i = 0; i <= height; i += 40) {\n      ctx.moveTo(0, i);\n      ctx.lineTo(width, i);\n    }\n    for (let i = 0; i <= width; i += 40) {\n      ctx.moveTo(i, 0);\n      ctx.lineTo(i, height);\n    }\n    ctx.stroke();\n\n    // 2. Draw Equilibrium Line (Dotted)\n    ctx.strokeStyle = '#94a3b8';\n    ctx.setLineDash([5, 5]);\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(padding, centerY);\n    ctx.lineTo(width - padding, centerY);\n    ctx.stroke();\n    ctx.setLineDash([]);\n\n    // 3. Draw The Wave\n    // Equation for standing wave with fixed ends at x=0 and x=L:\n    // y(x,t) = 2A * sin(kx) * cos(omega * t)\n    \n    ctx.beginPath();\n    ctx.moveTo(padding, centerY);\n\n    // Visual amplitude scaling (to make it visible on screen)\n    const visualAmplitudeScale = 80; \n\n    // Draw segment by segment\n    for (let px = 0; px <= drawWidth; px++) {\n      const xPhysical = px / pxPerMeter; // Convert pixel to meters\n      \n      // Standing wave equation\n      const yPhysical = 2 * amplitude * Math.sin(k * xPhysical) * Math.cos(omega * time);\n      \n      const yDraw = centerY - yPhysical * visualAmplitudeScale;\n      \n      ctx.lineTo(padding + px, yDraw);\n    }\n\n    // Styling the string\n    ctx.strokeStyle = '#3b82f6'; // Blue-500\n    ctx.lineWidth = 4;\n    ctx.stroke();\n    \n    // Add \"Glow\" effect\n    ctx.shadowBlur = 10;\n    ctx.shadowColor = '#60a5fa';\n    ctx.stroke();\n    ctx.shadowBlur = 0;\n\n    // 4. Draw Nodes (Fixed Points A and B)\n    const drawNode = (x: number, label: string) => {\n      ctx.fillStyle = '#ef4444'; // Red\n      ctx.beginPath();\n      ctx.arc(x, centerY, 8, 0, Math.PI * 2);\n      ctx.fill();\n      \n      // Label\n      ctx.fillStyle = '#1e293b';\n      ctx.font = 'bold 16px sans-serif';\n      ctx.fillText(label, x - 5, centerY - 20);\n    };\n\n    drawNode(padding, 'A');\n    drawNode(width - padding, 'B');\n\n    // Update time\n    // Slow down time for visualization purposes, otherwise high freq blurs out\n    const timeStep = 0.005; \n    if (isPlaying) {\n      setTime(prev => prev + timeStep);\n    }\n\n    animationRef.current = requestAnimationFrame(animate);\n  }, [length, amplitude, harmonics, k, omega, time, isPlaying]);\n\n  useEffect(() => {\n    animationRef.current = requestAnimationFrame(animate);\n    return () => {\n      if (animationRef.current) cancelAnimationFrame(animationRef.current);\n    };\n  }, [animate]);\n\n  // --- Handlers ---\n  const handleReset = () => {\n    setTime(0);\n    setIsPlaying(true);\n  };\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-slate-50 font-sans text-slate-800\">\n      {/* Header */}\n      <header className=\"bg-blue-600 text-white p-4 shadow-md\">\n        <div className=\"max-w-6xl mx-auto flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <Settings className=\"w-6 h-6\" />\n            <h1 className=\"text-xl font-bold\">Mô Phỏng Sóng Dừng (Hai Đầu Cố Định)</h1>\n          </div>\n          <div className=\"text-sm opacity-90 hidden sm:block\">\n            Phân tích sóng trên dây đàn hồi\n          </div>\n        </div>\n      </header>\n\n      <main className=\"flex-grow p-4 md:p-6 max-w-6xl mx-auto w-full grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        \n        {/* Left Column: Visualization */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          <div className=\"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden relative\">\n            <div className=\"absolute top-4 left-4 z-10 bg-white/80 backdrop-blur px-3 py-1 rounded-full text-xs font-semibold shadow-sm border border-slate-200\">\n              Mô hình trực quan\n            </div>\n            \n            <canvas \n              ref={canvasRef} \n              width={800} \n              height={400} \n              className=\"w-full h-auto bg-white cursor-crosshair\"\n            />\n\n            {/* Playback Controls */}\n            <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-4\">\n              <button \n                onClick={() => setIsPlaying(!isPlaying)}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full shadow-lg transition-transform active:scale-95\"\n              >\n                {isPlaying ? <Pause size={24} /> : <Play size={24} />}\n              </button>\n              <button \n                onClick={handleReset}\n                className=\"bg-slate-600 hover:bg-slate-700 text-white p-2 rounded-full shadow-lg transition-transform active:scale-95\"\n              >\n                <RefreshCw size={24} />\n              </button>\n            </div>\n          </div>\n\n          {/* Analysis Panel */}\n          <div className=\"bg-white rounded-xl shadow-md border border-slate-200 p-6\">\n            <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2 text-slate-700\">\n              <Info size={20} /> Kết quả tính toán\n            </h3>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\">\n              <div className=\"p-3 bg-blue-50 rounded-lg border border-blue-100\">\n                <div className=\"text-xs text-blue-600 font-semibold uppercase\">Tần số (Frequency)</div>\n                <div className=\"text-2xl font-bold text-blue-800\">{frequency.toFixed(1)} <span className=\"text-sm\">Hz</span></div>\n                <div className=\"text-xs text-slate-500 mt-1\">f = v / λ</div>\n              </div>\n              <div className=\"p-3 bg-purple-50 rounded-lg border border-purple-100\">\n                <div className=\"text-xs text-purple-600 font-semibold uppercase\">Bước sóng (Wavelength)</div>\n                <div className=\"text-2xl font-bold text-purple-800\">{wavelength.toFixed(2)} <span className=\"text-sm\">m</span></div>\n                <div className=\"text-xs text-slate-500 mt-1\">λ = 2L / k</div>\n              </div>\n              <div className=\"p-3 bg-emerald-50 rounded-lg border border-emerald-100\">\n                <div className=\"text-xs text-emerald-600 font-semibold uppercase\">Vận tốc truyền sóng</div>\n                <div className=\"text-2xl font-bold text-emerald-800\">{waveSpeed.toFixed(1)} <span className=\"text-sm\">m/s</span></div>\n                <div className=\"text-xs text-slate-500 mt-1\">v = √(T / μ)</div>\n              </div>\n              <div className=\"p-3 bg-orange-50 rounded-lg border border-orange-100\">\n                <div className=\"text-xs text-orange-600 font-semibold uppercase\">Số bụng sóng</div>\n                <div className=\"text-2xl font-bold text-orange-800\">{harmonics}</div>\n                <div className=\"text-xs text-slate-500 mt-1\">Nút = {harmonics + 1}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Right Column: Controls */}\n        <div className=\"lg:col-span-1 space-y-6\">\n          <div className=\"bg-white rounded-xl shadow-md border border-slate-200 p-6\">\n            <h2 className=\"text-lg font-bold mb-6 text-slate-800 border-b pb-2\">Bảng điều khiển</h2>\n            \n            {/* Control 1: Harmonic (Mode) */}\n            <div className=\"mb-6\">\n              <label className=\"flex justify-between text-sm font-medium text-slate-700 mb-2\">\n                <span>Số bó sóng / Bụng sóng (k)</span>\n                <span className=\"bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs\">Chế độ hòa âm</span>\n              </label>\n              <input \n                type=\"range\" \n                min=\"1\" \n                max=\"10\" \n                step=\"1\" \n                value={harmonics} \n                onChange={(e) => setHarmonics(parseInt(e.target.value))}\n                className=\"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600\"\n              />\n              <div className=\"flex justify-between mt-1\">\n                <span className=\"text-xs text-slate-500\">Cơ bản (1)</span>\n                <span className=\"text-lg font-bold text-blue-600\">{harmonics}</span>\n                <span className=\"text-xs text-slate-500\">Bậc cao (10)</span>\n              </div>\n              <p className=\"text-xs text-slate-500 mt-2 italic\">\n                *Điều chỉnh số bó sóng để thỏa mãn điều kiện L = k(λ/2)\n              </p>\n            </div>\n\n            <hr className=\"my-6 border-slate-100\" />\n\n            {/* Control 2: Tension */}\n            <div className=\"mb-6\">\n              <label className=\"flex justify-between text-sm font-medium text-slate-700 mb-2\">\n                <span>Lực căng dây (T)</span>\n                <span className=\"text-slate-900 font-bold\">{tension} N</span>\n              </label>\n              <input \n                type=\"range\" \n                min=\"10\" \n                max=\"200\" \n                step=\"1\" \n                value={tension} \n                onChange={(e) => setTension(Number(e.target.value))}\n                className=\"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-emerald-500\"\n              />\n              <p className=\"text-xs text-slate-500 mt-1\">Lực căng tăng → Vận tốc truyền sóng tăng</p>\n            </div>\n\n            {/* Control 3: Length */}\n            <div className=\"mb-6\">\n              <label className=\"flex justify-between text-sm font-medium text-slate-700 mb-2\">\n                <span>Chiều dài dây AB (L)</span>\n                <span className=\"text-slate-900 font-bold\">{length.toFixed(1)} m</span>\n              </label>\n              <input \n                type=\"range\" \n                min=\"0.5\" \n                max=\"5.0\" \n                step=\"0.1\" \n                value={length} \n                onChange={(e) => setLength(Number(e.target.value))}\n                className=\"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-purple-500\"\n              />\n            </div>\n\n            {/* Control 4: Amplitude */}\n            <div className=\"mb-6\">\n              <label className=\"flex justify-between text-sm font-medium text-slate-700 mb-2\">\n                <span>Biên độ nguồn (A)</span>\n                <span className=\"text-slate-900 font-bold\">{(amplitude * 2).toFixed(1)} cm</span>\n              </label>\n              <input \n                type=\"range\" \n                min=\"0.1\" \n                max=\"1.0\" \n                step=\"0.1\" \n                value={amplitude} \n                onChange={(e) => setAmplitude(Number(e.target.value))}\n                className=\"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-orange-500\"\n              />\n            </div>\n\n            {/* Control 5: Density (Advanced) */}\n            <div className=\"mb-2\">\n              <label className=\"flex justify-between text-sm font-medium text-slate-700 mb-2\">\n                <span>Mật độ dòng (μ)</span>\n                <span className=\"text-slate-900 font-bold\">{linearDensity.toFixed(3)} kg/m</span>\n              </label>\n              <input \n                type=\"range\" \n                min=\"0.001\" \n                max=\"0.05\" \n                step=\"0.001\" \n                value={linearDensity} \n                onChange={(e) => setLinearDensity(Number(e.target.value))}\n                className=\"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-400\"\n              />\n            </div>\n\n          </div>\n\n          <div className=\"bg-blue-50 p-4 rounded-xl border border-blue-100 text-sm text-blue-800\">\n            <h4 className=\"font-bold mb-2\">Lý thuyết tóm tắt:</h4>\n            <ul className=\"list-disc pl-4 space-y-1\">\n              <li>Điều kiện sóng dừng 2 đầu cố định: <br/> L = k(λ/2) (k ∈ Z⁺)</li>\n              <li>Khoảng cách giữa 2 nút liên tiếp: λ/2.</li>\n              <li>Khi tăng T (Lực căng), vận tốc v tăng, để giữ nguyên số bụng k thì tần số f phải tăng theo.</li>\n            </ul>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default StandingWaveSim;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9392, "column": 0}, "map": {"version":3,"sources":["file:///E:/test_python/vat-ly-11-lab/test/components/physics-lab.tsx"],"sourcesContent":["  \"use client\"\n\n  import React, { useState } from \"react\"\n  import { \n    FlaskConical, \n    Menu, \n    X, \n    Activity, \n    Waves, \n    Zap, \n    Anchor, \n    TrendingDown, \n    Mic, \n    Aperture, \n    Infinity \n  } from \"lucide-react\"\n\n  // Import UI Library mới\n  import { LabLayout, NeonButton } from \"./components/ui/sci-fi-lab\"\n\n  // Imports Experiments (Giữ nguyên logic import của bạn)\n  import PhysicsIntro from \"./experiments/physics-intro\"\n  import SpringOscillator from \"./experiments/spring-oscillator\"\n  import SimplePendulum from \"./experiments/simple-pendulum\"\n  import DampedOscillation from \"./experiments/damped-oscillation\"\n  import HarmonicOscillation from \"./experiments/harmonic-oscillation\"\n  import MechanicalWaves from \"./experiments/mechanical-waves\"\n  import SoundWaves from \"./experiments/sound-waves\"\n  import WaveInterference from \"./experiments/wave-interference\"\n  import StandingWaves from \"./experiments/standing-waves\"\n\n  const EXPERIMENTS = [\n    { id: \"intro\", label: \"Trung tâm điều khiển\", icon: FlaskConical },\n    { id: \"harmonic-oscillation\", label: \"Dao động điều hòa\", icon: Zap },\n    { id: \"spring-oscillator\", label: \"Con lắc lò xo\", icon: Activity },\n    { id: \"simple-pendulum\", label: \"Con lắc đơn\", icon: Anchor },\n    { id: \"damped-oscillation\", label: \"Dao động tắt dần\", icon: TrendingDown },\n    { id: \"mechanical-waves\", label: \"Sóng cơ\", icon: Waves },\n    { id: \"sound-waves\", label: \"Sóng âm\", icon: Mic },\n    { id: \"wave-interference\", label: \"Giao thoa sóng\", icon: Aperture },\n    { id: \"standing-waves\", label: \"Sóng dừng\", icon: Infinity },\n  ]\n\n  export default function PhysicsLab() {\n    const [activeTab, setActiveTab] = useState(\"intro\")\n    const [isSidebarOpen, setIsSidebarOpen] = useState(true)\n\n    const renderContent = () => {\n      switch (activeTab) {\n        case \"intro\": return <PhysicsIntro onSelectExperiment={setActiveTab} />\n        case \"spring-oscillator\": return <SpringOscillator />\n        case \"simple-pendulum\": return <SimplePendulum />\n        case \"damped-oscillation\": return <DampedOscillation />\n        case \"harmonic-oscillation\": return <HarmonicOscillation />\n        case \"mechanical-waves\": return <MechanicalWaves />\n        case \"sound-waves\": return <SoundWaves />\n        case \"wave-interference\": return <WaveInterference />\n        case \"standing-waves\": return <StandingWaves />\n        default: return <PhysicsIntro onSelectExperiment={setActiveTab} />\n      }\n    }\n\n    const ActiveIcon = EXPERIMENTS.find(e => e.id === activeTab)?.icon || FlaskConical\n\n    return (\n      <LabLayout>\n        {/* HEADER BAR */}\n        <header className=\"flex items-center justify-between mb-6 pb-4 border-b border-slate-800/60 shrink-0\">\n          <div className=\"flex items-center gap-4\">\n            <NeonButton \n              onClick={() => setIsSidebarOpen(!isSidebarOpen)} \n              className=\"!px-3 !py-2\"\n            >\n              {isSidebarOpen ? <X size={20} /> : <Menu size={20} />}\n            </NeonButton>\n            \n            <div className=\"flex flex-col\">\n              <h1 className=\"text-2xl md:text-3xl font-bold font-mono tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600 uppercase\">\n                PHYSICS.LAB <span className=\"text-xs align-top opacity-50 text-slate-400\">v2.0</span>\n              </h1>\n              <div className=\"flex items-center gap-2 text-[10px] text-slate-500 font-mono uppercase tracking-widest\">\n                <span className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\"></span>\n                System Online\n              </div>\n            </div>\n          </div>\n\n          <div className=\"hidden md:flex items-center gap-6\">\n            <div className=\"text-right\">\n              <div className=\"text-[10px] text-slate-500 uppercase font-bold\">Current Module</div>\n              <div className=\"text-cyan-400 font-mono font-bold flex items-center justify-end gap-2\">\n                {EXPERIMENTS.find(e => e.id === activeTab)?.label} <ActiveIcon size={16}/>\n              </div>\n            </div>\n            <div className=\"w-[1px] h-8 bg-slate-800\"></div>\n            <div className=\"text-right\">\n              <div className=\"text-[10px] text-slate-500 uppercase font-bold\">User</div>\n              <div className=\"text-slate-300 font-mono\">Student A1K50</div>\n            </div>\n          </div>\n        </header>\n\n        {/* MAIN BODY */}\n        <div className=\"flex flex-1 overflow-hidden gap-6 relative\">\n          \n          {/* SIDEBAR NAVIGATION */}\n          <aside \n            className={`\n              fixed md:static inset-y-0 left-0 z-50 w-64 bg-[#02040a]/95 md:bg-transparent backdrop-blur-xl md:backdrop-blur-none border-r border-slate-800/50 md:border-none\n              transform transition-transform duration-300 ease-out flex flex-col gap-2 p-4 md:p-0\n              ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full md:hidden'}\n            `}\n          >\n            <div className=\"md:hidden flex justify-end mb-4\">\n              <button onClick={() => setIsSidebarOpen(false)} className=\"text-slate-500\"><X/></button>\n            </div>\n\n            <div className=\"text-xs font-bold text-slate-600 uppercase tracking-widest mb-2 px-2\">Experiments</div>\n            <div className=\"space-y-1 overflow-y-auto scrollbar-hide flex-1\">\n              {EXPERIMENTS.map((item) => (\n                <button\n                  key={item.id}\n                  onClick={() => { setActiveTab(item.id); if(window.innerWidth < 768) setIsSidebarOpen(false); }}\n                  className={`\n                    w-full text-left px-4 py-3 rounded border font-mono text-xs font-bold uppercase tracking-wide flex items-center gap-3 transition-all\n                    ${activeTab === item.id \n                      ? 'bg-cyan-950/40 border-cyan-500/50 text-cyan-400 shadow-[0_0_10px_rgba(6,182,212,0.1)]' \n                      : 'bg-transparent border-transparent text-slate-500 hover:bg-slate-900 hover:text-slate-300'}\n                  `}\n                >\n                  <item.icon size={16} className={activeTab === item.id ? \"animate-pulse\" : \"\"} />\n                  {item.label}\n                </button>\n              ))}\n            </div>\n            \n            <div className=\"mt-auto pt-4 border-t border-slate-800/50\">\n              <div className=\"p-3 rounded bg-slate-900/30 border border-slate-800/50 text-[10px] text-slate-500 font-mono text-center\">\n                  LAB SIMULATION CORE <br/> RUNNING ON REACT\n              </div>\n            </div>\n          </aside>\n\n          {/* CONTENT AREA */}\n          <main className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-800 scrollbar-track-transparent pr-2 pb-10\">\n            {/* Overlay đóng sidebar trên mobile */}\n            {isSidebarOpen && <div className=\"fixed inset-0 bg-black/50 z-40 md:hidden\" onClick={() => setIsSidebarOpen(false)}></div>}\n            \n            <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\n              {renderContent()}\n            </div>\n          </main>\n        </div>\n      </LabLayout>\n    )\n  }"],"names":[],"mappings":"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"}}]
}